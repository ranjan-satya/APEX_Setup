/*!
 Copyright (c) 2017, 2024, Oracle and/or its affiliates. All rights reserved.
*/
apex.clipboard=function(e,t,n){"use strict";const o=".is-disabled, .js-no-select",a="apexCBMDummySelection",c=document.execCommand&&document.queryCommandSupported;let i=[];const d="click";function r(e){const t=e.originalEvent,o=n(document.activeElement),a=t.clipboardData||window.clipboardData;if(!a)return;const c={dt:a,setData:function(e,t){(window.clipboardData||/Edge\/\d./i.test(navigator.userAgent))&&("text/plain"===e&&(e="text"),"text"!==e)||this.dt.setData(e,t)}};for(let t=0;t<i.length;t++){const n=i[t];if(o.closest(n.element).length>0){n.handler(c)&&e.preventDefault();break}}}function l(){const e=document.activeElement;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)return;window.getSelection().removeAllRanges();let t=document.createRange();t.selectNode(n("#"+a)[0]),window.getSelection().addRange(t),n(e).trigger("focus")}const s={isSupported:function(){return c&&document.queryCommandSupported("copy")},copy:function(o){let a=!1,c="APEX.CLIPBOARD.NOTSUP";return o=o||{},this.isSupported()&&(l(),a=document.execCommand("copy")),a||(o.noWarn||t.loadMessagesIfNeeded([c],(function(){apex.message.alert(t.getMessage(c))})),e.warn("Browser does not support clipboard copy command.")),a&&o.tooltipElement&&n(o.tooltipElement).tooltip({content:t.getMessage("APEX.CLIPBOARD.COPIED"),close:function(){n(this).tooltip("destroy")}}),a},addElement:function(e,t){const o=this,a=n(e);-1===a.prop("tabIndex")&&a.prop("tabIndex",0),apex.clipboard.addHandler(a[0],(function(e){return e.setData("text/plain",(a.text()||a.val()).replace(/\n/g,"\r\n")),!0})),t&&n(t).on(d,(function(){a.trigger("focus"),o.copy({tooltipElement:t}),n(this).trigger("focus")}))},addText:function(e,t){const o=this,a=n(t);apex.clipboard.addHandler(a[0],(function(t){return t.setData("text/plain",e),!0})),n(t).on(d,(function(){o.copy({tooltipElement:t}),n(this).trigger("focus")}))},addHandler:function(e,t){0===i.length&&(n(document).on("copy.cbManager",r),n(document.body).append("<input id='"+a+"' class='u-hidden' value='x'>")),n(e).on("keydown.cbManager",(function(e){n(this).is(o)||((e.metaKey||e.ctrlKey)&&67===e.which||e.shiftKey&&121===e.which)&&l()})).on("contextmenu.cbManager",(function(){n(this).is(o)||l()})),i.push({element:e,handler:t})},removeHandler:function(e){for(let t=0;t<i.length;t++){if(i[t].element===e){i.splice(t,1);break}}n(e).off(".cbManager"),0===i.length&&(n(document).off(".cbManager"),n("#"+a).remove())}};return n((function(){n("[data-clipboard-source]",apex.gPageContext$).each((function(){const e=n(this),t=e.attr("data-clipboard-source");"#"===t.substring(0,1)?s.addElement(n(t)[0],e[0]):s.addText(t,e[0])}))})),s}(apex.debug,apex.lang,apex.jQuery);