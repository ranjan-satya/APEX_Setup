/*!
 * Copyright (c) 2012, 2024, Oracle and/or its affiliates.
 */
apex.navigation={},function(e,o,i,t,n,a){"use strict";const l="apexclosedialoginternal",r="#action$",s="a-dialog-open",d=/^#\S*$/,c={title:"title",h:"height",w:"width",mxw:"maxWidth",isModal:"modal"};let g;function u(e,o,i,t){let a=i.parseActionBinding(e);if(a&&o.includes(a.actionName)){let e=i.lookup(a.actionName);e?e.convertBindingArguments&&(a.args=i.convertBindingArguments(a.args)):n.error("Action not found '"+a.actionName+"'")}else t&&n.error("Action not supported '"+a?.actionName+"'"),a=null;return a}e.redirect=function(e,o=!1){if(e.startsWith(r)){const o=apex.actions;let i=u(e,[s,"a-dialog-close","a-dialog-chain"],o,!1);if(i)return o.invoke(i.actionName,void 0,void 0,i.args)}else a("base").length&&e.match(d)?location.hash=e:(o&&apex.page.ignoreWarnOnUnsavedChanges(),location.href=e)},e.popup=function(e){var o=a.extend({url:"about:blank",name:"_blank",width:600,height:600,scroll:"yes",resizable:"yes",toolbar:"no",location:"no",statusbar:"no",menubar:"no"},e),i=window.open(o.url,"_blank"===(o.name+"").toLowerCase()?o.name:o.name+"_"+t.APP_SESSION,"toolbar="+o.toolbar+",scrollbars="+o.scroll+",location="+o.location+",status="+o.statusbar+",menubar="+o.menubar+",resizable="+o.resizable+",width="+o.width+",height="+o.height);return"auto"===o.height&&(o.height=i.outerHeight),"auto"===o.width&&(o.width=i.outerWidth),i.resizeTo(o.width,o.height),i&&(null===i.opener&&(i.opener=window.self),i.focus()),i},e.popup.url=function(o){e.popup({url:o,name:"winLov",width:800,height:600})},e.openInNewWindow=function(e,o,i){var n,a,l=!0,r=i&&i.noopener,s=i&&i.altSuffix||null;return void 0===o&&(o="_blank"),"_blank"!==o.toLowerCase()&&(null===s&&(s=t.APP_SESSION),s&&(o+="_"+s),l=!1),void 0===r&&(r=l),i&&!0===i.favorTabbedBrowsing||(a=/msie\s|trident\//i.exec(navigator.userAgent)?"personalbar,menubar,titlebar,toolbar,location,resizable,scrollbars":"personalbar,menubar,titlebar,toolbar,location,status,resizable,scrollbars"),r&&!/msie\s|trident\/|edge\//i.exec(navigator.userAgent)&&(a=a?a+",":"",a+="noopener"),(n=a?window.open(e,o,a):window.open(e,o))&&(n.focus(),r&&(n.opener=null,n=null)),n},e.popup.close=function(e,o){window.opener.$x_Value(e,o),window.close()},o.getTopApex().navigation._gNextDialogId||(o.getTopApex().navigation._gNextDialogId=1),e.dialog=function(t,n,l,d){var g,f,p,h,w,b,m,x={width:500,maxWidth:1500,height:500,closeText:i.getMessage("APEX.DIALOG.CLOSE"),modal:!0,resizable:!1,scroll:"auto",closeOnEscape:!0,dialog:null,show:"apexDialogShow",hide:"apexDialogHide"},v=n.dialogAttributes,A=a.extend(x,n);if(t.startsWith(r)){const e=apex.actions;let o=u(t,[s],e,!0);if(o){let i=o.args=o.args||{};for(const e in c)Object.hasOwn(i,e)&&Object.hasOwn(n,c[e])&&(i[e]=n[c[e]],delete n[c[e]]);return l&&(i.dlgCls=l),d&&(i.trgEl=d),i.dialogAttributes=n,e.invoke(s,void 0,void 0,i)}}else v&&delete(A=a.extend(A,v)).dialogAttributes,A.dialogClass="ui-dialog--apex",n.dialogClass&&(A.dialogClass+=" "+n.dialogClass),n.baseDialogClass&&(A.dialogClass+=" "+n.baseDialogClass),b=A.close,A.close=function(e,i){b&&b(e,i),o.getTopApex().jQuery(this).dialog("destroy").remove()},m=A.beforeClose,A.beforeClose=function(e,o){var i=a(this).children("iframe")[0].contentWindow.apex;m&&m(e,o),i?.page&&i.page.cancelWarnOnUnsavedChanges()},l&&(n.jsDialogClass?l.split(" ").forEach((e=>{const o=/js-dialog-class-(.+)/.exec(e);o&&(A.dialogClass+=" "+o[1])})):A.dialogClass+=" "+l),g=a(d,apex.gPageContext$),A.modal?(p="apex_dialog_"+o.getTopApex().navigation._gNextDialogId,o.getTopApex().navigation._gNextDialogId+=1,(f=o.getTopApex().jQuery('<div id="'+p+'"><iframe src="'+o.escapeHTMLAttr(t)+'"title="'+o.escapeHTMLAttr(A.title)+'" width="100%" height="100%" style="min-width: 95%;height:100%;" scrolling="'+o.escapeHTMLAttr(A.scroll)+'"></iframe></div>')).on("dialogcreate",(function(){a(this).closest(".ui-dialog").css("position","fixed").attr("aria-modal",!0)})).on("dialogopen",(function(){A.modal&&o.getTopApex().navigation.beginFreezeScroll(),f.children("iframe").on("load",(function(){this.contentDocument&&a(this.contentDocument.body).on("keydown",(function(o){if(o.which===a.ui.keyCode.ESCAPE&&A.closeOnEscape&&!o.isDefaultPrevented())e.dialog.fireCloseHandler(f,!1);else if(o.which===a.ui.keyCode.TAB){var i=a(this).find(":tabbable").last(),t=f.closest(".ui-dialog").find(":tabbable").first();o.target!==i[0]||o.shiftKey||(setTimeout((function(){t.trigger("focus")}),1),o.preventDefault())}}))})),f.closest(".ui-dialog").find("button.ui-dialog-titlebar-close").off("click").on("click",(function(){e.dialog.fireCloseHandler(f,!1)}))})).on("dialogclose",(function(){A.modal&&o.getTopApex().navigation.endFreezeScroll()})).on("dialogresize",(function(){var e=f.height(),o=f.width();f.closest(".ui-dialog").css("position","fixed"),f.children("iframe").width(o).height(e)})),f.dialog(A),(A.draggable||void 0===A.draggable)&&f.parent().draggable("option","containment","window"),f.closest(".ui-dialog").on("keydown",(function(e){if(e.keyCode===a.ui.keyCode.TAB){var o=a(f.children("iframe")[0].contentDocument.body).find(":tabbable"),i=o.filter(":first"),t=o.filter(":last"),n=a(this).find(":tabbable"),l=n.filter(":first"),r=n.filter(":last");e.target!==r[0]&&e.target!==f[0]||e.shiftKey?e.target!==l[0]&&e.target!==f[0]||!e.shiftKey||(setTimeout((function(){t.trigger("focus")}),1),e.preventDefault()):(setTimeout((function(){i.trigger("focus")}),1),e.preventDefault())}})),e.dialog.registerCloseHandler({handler$:f,dialog:f,triggeringElement$:g,closeFunction:function(){f.dialog("close")}}),f.on("dialogclose",(function(o){A.closeOnEscape&&o.originalEvent&&"keydown"===o.originalEvent.handleObj.type&&o.originalEvent.keyCode===a.ui.keyCode.ESCAPE&&e.dialog.fireCloseHandler(f,!1)}))):(w=void 0!==g.id&&void 0!==g[0].id&&""!==g[0].id&&g?g[0].id:"winDialog",h=e.popup({url:t,name:w,width:A.width,height:A.height}),e.dialog.registerCloseHandler({handler$:g,dialog:h,triggeringElement$:g,closeFunction:function(){h.close()}}))},e.dialog.close=function(i,n){var a;Array.isArray(n)?n=function(e){var o,i,n,a={};for(o=0;o<e.length;o++)n=e[o],i=$v(n),a[n]=i;return a.dialogPageId=t.APP_PAGE_ID,a.closeAction="close",a}(n):"object"==typeof n&&n.successMessage?.text&&n.showMessage&&o.getTopApex().message.showPageSuccess(n.successMessage.text),i?e.dialog.fireCloseHandler(o.getTopApex().jQuery(".ui-dialog--apex:not(.is-closing)").last().children(".ui-dialog-content"),n):window.opener&&!window.opener.closed&&function(){try{if(window.opener.apex&&window.opener.apex.jQuery)return!0}catch(e){return!1}return!1}()?((a=o.escapeCSS(window.name)).lastIndexOf("_")>0&&(a=a.substring(0,a.lastIndexOf("_"))),void 0===a?window.close():"winDialog"===a?"function"==typeof n?n.call(this,window):window.close():e.dialog.fireCloseHandler(window.opener.apex.jQuery("#"+a),n)):"function"==typeof n?n.call(this,window):window.close()},e.dialog.cancel=function(o){e.dialog.close(o,!1)},e.dialog.registerCloseHandler=function(o){o.handler$.off(l).on(l,(function(i,t){var n;"function"==typeof t?t.call(this,o.dialog,o):"string"===a.type(t)?(n=location.href,e.redirect(t),location.href!==n&&o.closeFunction()):!1===t?(o.closeFunction(),o.triggeringElement$.trigger("apexafterclosecanceldialog",{dialogPageId:e.dialog.getPageId(),closeAction:"cancel"})):(o.closeFunction(),o.triggeringElement$.trigger("apexafterclosedialog",[t]),o.triggeringElement$.trigger("apexafterclosecanceldialog",[t]))}))},e.dialog.fireCloseHandler=function(e,o){e.trigger(l,o)},e.dialog.getPageId=function(e){let i=t.APP_PAGE_ID,n=(e||o.getTopApex().jQuery(".ui-dialog--apex").last().children(".ui-dialog-content")).find("iframe");return n.length>0&&n[0].contentWindow&&n[0].contentWindow.apex&&(i=n[0].contentWindow.apex.env.APP_PAGE_ID),i};var f,p=0,h=function(){a(document.body).css("width",f),a(window).off("apexwindowresized",h)};e.beginFreezeScroll=function(){0===p&&(a(window).on("apexwindowresized",h),f=document.body.style.width,a(document.body).width(a(document.body).width()).addClass("apex-no-scroll")),p+=1},e.endFreezeScroll=function(){(p-=1)<=0&&(h(),a(document.body).removeClass("apex-no-scroll"),p=0)},e.download=function(e,o){g=g||document.createElement("a"),g.download=o||"download",g.href=e,g.click()},a("base").length&&a((function(){setTimeout((function(){a(document).on("click","a",(function(e){var o;e.isDefaultPrevented()||(o=a(this).attr("href"))&&(o=o.trim()).match(d)&&(e.preventDefault(),location.hash=o)}))}),0)}))}(apex.navigation,apex.util,apex.lang,apex.env,apex.debug,apex.jQuery);