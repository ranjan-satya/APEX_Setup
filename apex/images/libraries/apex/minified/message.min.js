/*!
 * Copyright (c) 2017, 2024, Oracle and/or its affiliates.
 */
apex.message={},function(e,t,a,o,i){"use strict";const s="inline",n="template-id",l="FALLBACK_ET",r="click",c="u-visible",d="u-hidden",u="apex-page-item-error",f="a-Form-error",p="aria-describedby",g="aria-invalid",m="data-old-aria-describedby";let S,E=!1,h=()=>{clearTimeout(S)};var v={},C=[],A=[],b={beforeShow:null,beforeHide:null,closeNotificationSelector:"button.t-Button--closeAlert",pageErrorsContainerSelector:"#t_Alert_Notification",successMessageContainerSelector:"#t_Alert_Success"},I={};e.TYPE={SUCCESS:"success",ERROR:"error"},e.registerTemplates=function(a){var o,i,s,n;if(t.isPlainObject(a))v=t.extend(v,a);else for(o=0;o<a.length;o++)for(s=a[o].ids.split(","),i=0;i<s.length;i++)(n={})[s[i]]=a[o].markup,e.registerTemplates(n)},e.clearTemplates=function(){v={}},e.getTemplates=function(){return v},e.setThemeHooks=function(e){b=t.extend(b,e)},e.setDismissPreferences=function(e){I=t.extend(I,e),S&&!I.dismissPageSuccess?h():E&&(G(),E=!1)},e.showErrors=function(i){let l,r,u=t.isPlainObject(i)?[i]:i,f=[],p=t("#APEX_SUCCESS_MESSAGE"),g=0;for(let e=0;e<u.length;e++)C.push(u[e]);!function(e){let o=[],i=[];e.forEach((e=>{e.pageItem?o.push("#"+a.escapeCSS(e.pageItem)):e.regionStaticId&&o.push("#"+a.escapeCSS(e.regionStaticId))})),o.length>0&&t(o.join(", ")).each(((e,t)=>i.push(t.id)));e.sort(((e,t)=>{let a,o,s;return e.pageItem?a=i.indexOf(e.pageItem):e.regionStaticId&&(a=i.indexOf(e.regionStaticId)),-1===a&&(a=void 0),t.pageItem?o=i.indexOf(t.pageItem):t.regionStaticId&&(o=i.indexOf(t.regionStaticId)),-1===o&&(o=void 0),void 0!==a&&void 0===o?s=-1:void 0!==o&&void 0===a?s=1:void 0===a&&void 0===o?s=0:void 0!==a&&void 0!==o&&(s=a-o),s}))}(C);for(let e=0;e<C.length;e++)l=C[e],r="string"==typeof l.location?[l.location]:l.location,t.inArray(s,r)>-1&&l.pageItem&&(w(l),g+=1),t.inArray("page",r)>-1&&f.push(l);f.length>0&&function(i){var s,l=a.htmlBuilder(),r={},u=!0,f=t("#APEX_ERROR_MESSAGE");f.html(v[f.data(n)]),l.markup("<div").attr("class","a-Notification a-Notification--error").markup(">"),l.markup("<div").attr("class","a-Notification-title aErrMsgTitle").markup(">"),s=1===i.length?o.getMessage("FLOW.SINGLE_VALIDATION_ERROR"):o.formatMessage("FLOW.VALIDATION_ERROR",i.length);l.content(s).markup("</div>"),l.markup("<ul").attr("class","a-Notification-list htmldbUlErr").markup(">");for(let e=0;e<i.length;e++){let t=i[e],a=t.pageItem||t.regionStaticId;if(l.markup("<li").attr("class","a-Notification-item htmldbStdErr").markup(">"),a&&l.markup("<a").attr("href","#").optionalAttr("data-region",t.regionStaticId).optionalAttr("data-instance",t.instance).optionalAttr("data-record",t.recordId).optionalAttr("data-column",t.columnName).optionalAttr("data-for",t.pageItem).attr("class","a-Notification-link").markup(">"),void 0===t.unsafe||t.unsafe?l.content(t.message):l.markup(t.message),a&&l.markup("</a>"),t.techInfo){let e,a=o.getMessage("APEX.ERROR.TECHNICAL_INFO");l.markup("<button class='a-Button a-Button--notification js-showDetails' tabindex='-1' type='button'").attr("aria-label",a).attr("title",a).markup("><span class='a-Icon icon-info' aria-hidden='true'></span></button>"),l.markup("<div class='a-Notification-details' style='display:none'><h2>").content(a).markup("</h2><ul class='error_technical_info'>");for(let a=0;a<t.techInfo.length;a++)e=t.techInfo[a],l.markup("<li><span class='a-Notification-detailName'>").content(e.name+": ").markup("</span>"),e.usePre&&l.markup("<br>"),l.markup("<span").attr("class","a-Notification-detailValue"+(e.usePre?" a-Notification--pre":"")).markup(">").content(e.value).markup("</span></li>");l.markup("</ul></div>")}l.markup("</li>")}l.markup("</ul>"),l.markup("</div>"),r.placeholders={MESSAGE:l.toString(),CLOSE_NOTIFICATION:o.getMessage("APEX.CLOSE_NOTIFICATION"),ERROR_MESSAGE_HEADING:o.getMessage("APEX.ERROR_MESSAGE_HEADING"),IMAGE_PREFIX:window.apex_img_dir||""},f.html(a.applyTemplate(v[f.data(n)],r)),b.beforeShow&&(u=b.beforeShow(e.TYPE.ERROR,f));(void 0===u||u)&&(f.removeClass(d).addClass(c),b.pageErrorsContainerSelector&&t(b.pageErrorsContainerSelector).attr("tabindex","-1").trigger("focus"))}(f),p.removeClass(c).addClass(d),0===f.length&&g>0&&e.goToErrorByIndex(0)},e.clearErrors=function(a){var o,i,n,l,r=!0,S=t("#APEX_ERROR_MESSAGE");function E(e){var t=R(e),a=t.attr(m);a?t.attr(p,a).removeAttr(g+" "+m).removeClass(u):t.removeAttr(g+" "+p).removeClass(u)}if(a)E(a),n=t("#"+a+"_error_placeholder."+f);else{for(o=0;o<C.length;o++)l="string"==typeof(i=C[o]).location?[i.location]:i.location,t.inArray(s,l)>-1&&i.pageItem&&E(i.pageItem);n=t("span."+f),b.beforeHide&&(r=b.beforeHide(e.TYPE.ERROR,S)),(void 0===r||r)&&S.removeClass(c).addClass(d).html("")}n.html("").removeClass(c).addClass(d),C=[]},e.goToErrorByIndex=function(e){let t=C[e],a={};t&&(a.region=t.regionStaticId,a.instance=t.instance,a.record=t.recordId,a.column=t.columnName,a.for=t.pageItem,D(a))},e.showPageSuccess=function(i){if(window.pageDesigner)window.pageDesigner.showSuccess(i);else{const s=t("#APEX_SUCCESS_MESSAGE"),l={placeholders:{SUCCESS_MESSAGE:i,CLOSE_NOTIFICATION:o.getMessage("APEX.CLOSE_NOTIFICATION"),SUCCESS_MESSAGE_HEADING:o.getMessage("APEX.SUCCESS_MESSAGE_HEADING"),IMAGE_PREFIX:window.apex_img_dir||""}};let r=!0;e.clearErrors(),s.html(a.applyTemplate(v[s.data(n)],l)),b.beforeShow&&(r=b.beforeShow(e.TYPE.SUCCESS,s)),G(),(void 0===r||r)&&s.removeClass(d).addClass(c)}},e.hidePageSuccess=function(){var a=!0,o=t("#APEX_SUCCESS_MESSAGE");b.beforeHide&&(a=b.beforeHide(e.TYPE.SUCCESS,o)),(void 0===a||a)&&o.removeClass(c).addClass(d),E=!1},e.confirm=function(e,t,a){setTimeout((function(){x(""+e,{confirm:!0,modern:!0,title:a?.title,style:a?.style,dialogClass:"ui-dialog--notification "+(a?.dialogClasses||""),iconClass:a?.iconClasses,cancelLabel:a?.cancelLabel,cancelLabelKey:a?.cancelLabelKey,okLabel:a?.confirmLabel,okLabelKey:a?.confirmLabelKey,unsafe:a?.unsafe,callback:t})}),0)},e.alert=function(e,t,a){setTimeout((function(){x(""+e,{alert:!0,modern:!0,title:a?.title,style:a?.style,dialogClass:"ui-dialog--notification "+(a?.dialogClasses||""),iconClass:a?.iconClasses,okLabel:a?.okLabel,okLabelKey:a?.okLabelKey,callback:t})}),0)};const k="apexAriaStatus",T="#"+k,_="apexAriaAlert",y="#"+_;let L=null,M=null;e.ariaMessage=function(e){t(T).remove(),L&&clearTimeout(L),L=setTimeout((function(){t(T).remove()}),5e3),t("body").append("<div class='u-vh' id='"+k+"' role='status'></div>"),setTimeout((function(){t(T).text(e)}),0)},e.ariaAlertMessage=function(e){t(y).remove(),M&&clearTimeout(M),M=setTimeout((function(){t(y).remove()}),5e3),t("body").append("<div class='u-vh' id='"+_+"' role='alert'></div>"),t(y).text(e)},e.addVisibilityCheck=function(e){A.push(e)};var O=[],P=null,N=null;function x(e,s){const n=apex.navigation,l=a.getTopApex().jQuery,c=l("body");let d,u,f,p,g,m,S,E,h,v,C,A,b=!1,I=null,k=[];if((s=t.extend({id:null,isPopup:!1,noOverlay:!1,draggable:!0,resizable:!1,notification:!0,dialogClass:"ui-dialog--notification",okButton:!0,okButtonClass:"ui-button--hot",okLabel:null,okLabelKey:"APEX.DIALOG.OK",cancelLabel:null,cancelLabelKey:"APEX.DIALOG.CANCEL",confirm:!1,alert:!1,defaultButton:!1,title:"",unsafe:!0,takeFocus:!0,modern:!1,style:null,iconClass:null},s)).modern&&(s.dialogClass+=" ui-dialog--modern",["information","warning","danger","success"].includes(s.style)?(s.dialogClass+=" ui-dialog--"+("information"===s.style?"info":s.style),s.okButtonClass="danger"===s.style?"ui-button--danger":"ui-button--hot",null===s.iconClass&&(s.iconClass="a-Icon")):null!==s.style&&i.error(`"${s.style}" is not a valid style for apex.message.showDialog`)),S=s.isPopup?"popup":"dialog",v=s.parentElement,s.id&&(u=l("#"+a.escapeCSS(s.id))),N=s.returnFocusTo||document.activeElement||null,v&&l!==apex.jQuery&&(v=t(v),E=v.offset(),h=l("iframe").filter((function(){return this.contentWindow===window})).offset(),C=t(window),E.top+=h.top-C.scrollTop(),E.left+=h.left-C.scrollLeft(),b=!0,s.parentElement=l("<div>").css("position","absolute").appendTo(c).outerWidth(v.outerWidth()).outerHeight(v.outerHeight()).offset(E)),u&&u[0])b&&u[S]("option","parentElement",s.parentElement),u[S]("open");else{if(u="string"==typeof e?l("<div>"+(s.unsafe?a.escapeHTML(e).replace(/\r\n|\n/g,"<br>"):e)+"</div>"):"function"==typeof e?l(e()):e,s.modern){let i=!1;(s.alert||s.confirm)&&(s.title?.length||(s.title=o.getMessage("APEX.DIALOG.CONFIRMATION"),i=!0));const n=o.getMessage(i?"APEX.DIALOG.VISUALLY_HIDDEN_TITLE":"APEX.DIALOG.TITLE"),r=t({}).uniqueId()[0].id;p=l(`<div>\n                         <div class="a-AlertMessage">\n                             ${s.iconClass?`<div class="a-AlertMessage-icon">\n                                         <span aria-hidden="true" class="${a.escapeHTMLAttr(s.iconClass)}"></span>\n                                    </div>`:""}\n                             <div class="a-AlertMessage-body">\n                                 ${s.title?`<h1  class="a-AlertMessage-title${i?" u-vh":""}"\n                                            aria-roledescription="${a.escapeHTML(n)}"\n                                            aria-describedby="${a.escapeHTML(r)}"\n                                        >${s.unsafe?a.escapeHTML(s.title):s.title}</h1>`:""}\n                                 <div id="${a.escapeHTML(r)}" class="a-AlertMessage-details"></div>\n                             </div>\n                         </div>\n                     </div>`),p.find("#"+a.escapeCSS(r)).append("string"==typeof e?u.contents():u),u=p}s.id&&u.attr("id",s.id),s.okButton&&k.unshift({class:"js-confirmBtn",text:null!==s.okLabel?s.okLabel:o.getMessage(s.okLabelKey),click:function(){I=!0,u[S]("close")}}),s.confirm&&k.unshift({text:null!==s.cancelLabel?s.cancelLabel:o.getMessage(s.cancelLabelKey),click:function(){I=!1,u[S]("close")}}),s.extraButtons&&s.extraButtons.forEach((function(e){k.unshift(e)})),s.id&&l!==apex.jQuery&&(O.push({dialogId:s.id,widget:S}),P||(P=function(){var e,a;for(e=0;e<O.length;e++)a=O[e],l("#"+a.dialogId)[a.widget]("close").remove();t(window).off("unload",P)},t(window).on("unload",P))),c.append(u),g={closeText:o.getMessage("APEX.DIALOG.CLOSE"),autoOpen:!0,noOverlay:s.noOverlay,modal:!0,classes:{"ui-dialog":s.dialogClass},parentElement:s.isPopup?s.parentElement:void 0,title:s.modern?"":s.title,closeOnEscape:!0,create:function(){d=l(this).closest(".ui-dialog"),m=d.find(".js-confirmBtn"),f=d.find("button.ui-dialog-titlebar-close"),d.css("position","fixed").attr("role",s.notification?"alertdialog":"dialog"),s.init&&s.init(u),s.okButtonClass&&m.addClass(s.okButtonClass),s.modern&&(A=d.attr("aria-labelledby"),d.find("#"+a.escapeCSS(A)).remove(),d.find(".a-AlertMessage-title").attr("id",A),f.remove())},open:function(e){n.beginFreezeScroll(),s.open?s.open(e):m.trigger("focus")},close:function(e){let a=!1,o=s.closeDeadAreas&&t(document.activeElement).closest(s.closeDeadAreas).length;e&&e.originalEvent&&e.originalEvent.data&&(a=!0===e.originalEvent.data.mouseDownOutPopup),n.endFreezeScroll(),s.callback&&(null===I&&(I=!1),s.confirm?s.callback(I):s.callback()),b&&u[S]("option","parentElement").remove(),!N||a||o||t(N).trigger("focus"),s.id||u.remove()},beforeClose:s.beforeClose,resize:s.resize,resizeStop:s.resizeStop,buttons:k},s.isPopup&&(g.takeFocus=s.takeFocus,g.closeDeadAreas=s.closeDeadAreas),["draggable","resizable","width","height","minWidth","minHeight","maxWidth","maxHeight"].forEach((function(e){void 0!==s[e]&&(g[e]=s[e])})),u[S](g),s.defaultButton&&u.on("keydown",(function(e){13===e.which&&"INPUT"===e.target.nodeName&&(m.trigger(r),e.preventDefault())}))}return u}function R(e){var o=apex.item(e);return o.callbacks&&o.callbacks.setFocusTo&&!t("#"+a.escapeCSS(e)).hasClass("rich_text_editor")?"function"==typeof o.callbacks.setFocusTo?o.callbacks.setFocusTo.call(o):t(o.callbacks.setFocusTo):o.setFocusTo?"function"==typeof o.setFocusTo?t(o.setFocusTo()):t(o.setFocusTo):t("#"+a.escapeCSS(e))}function w(e){var o,i,s,r={},f={},S=a.escapeCSS(e.pageItem)+"_error",E=R(e.pageItem),h=t("#"+a.escapeCSS(e.pageItem)+"_error_placeholder"),C=E.attr(p),A=a.htmlBuilder();h.length||(o=e.pageItem,(s=(i=E).closest("fieldset").parent()).length||(s=i.parent()),h=t("<div id='"+o+"_error_placeholder' data-template-id='FALLBACK_ET' class='u-hidden'></div>").appendTo(s),v[l]||(v[l]="<div class='t-Form-error'>#ERROR_MESSAGE#</div>")),A.markup("<div").attr("id",S).markup(">"),void 0===e.unsafe||e.unsafe?A.content(e.message):A.markup(e.message),A.markup("</div>"),f.placeholders={ERROR_MESSAGE:A.toString()},h.html(v[h.data(n)]),h.html(a.applyTemplate(h.html(),f)).removeClass(d).addClass(c),C?(r[m]=C,r[p]=S+" "+C):r[p]=S,r[g]=!0,E.addClass(u).attr(r)}function D(e){let a=e.for;function o(e){for(let t=0;t<A.length;t++)A[t](e)}if(e.for){let e=apex.item(a);o(a),0===t("#"+a+"_CONTAINER,#"+a+"_DISPLAY,#"+a,apex.gPageContext$).filter(":visible").length&&e.show(),e.setFocus()}else if(e.region){let t,a=e.region;o(a),t=apex.region(a),t&&t.gotoError(e)}}function G(){let a,o=b.successMessageContainerSelector,i=t(o),s=t(document);if(i[0]&&I.dismissPageSuccess){let t=()=>{S&&h(),S=setTimeout((()=>{e.hidePageSuccess(),i.off(".successMessage").find(b.closeNotificationSelector).off(".closeNotification"),s.off(r,t)}),I.dismissPageSuccessDuration||5e3)};t(),i.on(r+".successMessage",(e=>{e.stopPropagation(),a=!0,h()})).on("mouseover.successMessage",h).on("mouseout.successMessage",(()=>{a||t()})).find(b.closeNotificationSelector).on("focus.closeNotification",h).on(r+".closeNotification",(()=>{apex.message.hidePageSuccess()})),s.on(r,(()=>{a&&(t(),a=!1)}))}}e.showDialog=x,t((()=>{t(".a-Error-back").on(r,(function(e){e.preventDefault(),window.history.go(-1)})),t("#APEX_SUCCESS_MESSAGE").on(r,b.closeNotificationSelector,(function(t){e.hidePageSuccess(),t.preventDefault()})),t("#APEX_SUCCESS_MESSAGE").hasClass("js-auto-dismiss")&&void 0===I.dismissPageSuccess&&e.setDismissPreferences({dismissPageSuccess:!0}),t(b.successMessageContainerSelector)[0]&&(G(),E=!0),t("#APEX_ERROR_MESSAGE").on(r,b.closeNotificationSelector,(function(e){t("#APEX_ERROR_MESSAGE").removeClass(c).addClass(d),e.preventDefault()})).on(r,"a.a-Notification-link",(function(e){var a=t(this),o={};["data-region","data-instance","data-record","data-column","data-for"].forEach((function(e){var t=e.substr(5),i=a.attr(e);void 0!==i&&(o[t]=i)})),D(o),e.preventDefault()})).on(r,".js-showDetails",(function(){var e=t(this),a=e.next();x(a,{callback:function(){e.after(a)},dialogClass:"ui-dialog--notificationLarge"})})).on("keydown",".a-Notification-link",(function(e){112===e.which&&e.altKey&&t(this).parent().find(".js-showDetails").trigger(r)}))}))}(apex.message,apex.jQuery,apex.util,apex.lang,apex.debug);