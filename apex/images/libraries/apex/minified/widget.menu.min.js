!function(e,t,n,i,a,l){"use strict";let r=null,s=null,o=!1,u=null,c=!1,d=!1,h=[],f=!1,m=!1,p=null,g=null,b=0,v=0,M=0,C=0,y=null,k=null,w=null,x=null,_=null,I=!1,A=null,S=null,T=null;const B="a-MenuBar",E=".a-MenuBar",L="a-MenuBar--tabs",O="a-Menu",N=".a-Menu",F="a-Menu--top",K="a-Menu-content",D="."+K,P="a-Menu-scroll",q=".a-Menu-scroll",$="a-Menu-scrollBtn",X=".a-Menu-scrollBtn",H="a-Menu--scrollable",U="a-Menu-scrollBtn--up",W="a-Menu-scrollBtn--down",R="icon-menu-scroll-up",j="icon-menu-scroll-down",z="a-Menu-item",G="."+z,Y=".a-Menu-item, .a-MenuBar-item",Q=".a-Menu-inner",V=".a-Menu-item, .a-MenuBar-item, .a-Menu-content",J=V+", "+X,Z="a-MenuBar-item",ee="a-MenuBar-item--overflow",te="a-MenuBar--overflow",ne="a-Menu-statusCol",ie="a-Menu-label",ae="a-MenuBar-label",le=".a-Menu-label,.a-MenuBar-label",re="a-Menu-subMenuCol",se=".a-Menu-subMenuCol",oe="a-Menu--split",ue="a-Menu--current",ce="aria-current",de="a-Menu-itemSep",he="u-callout--top",fe="u-callout--bottom",me="is-disabled",pe="is-focused",ge="is-active",be=".is-focused",ve="a, button, .a-Menu-label, .a-MenuBar-label",Me="is-expanded",Ce=".is-expanded",ye="a-Icon",ke="button[data-menu]",we="u-RTL",xe="data-id",_e="data-context-id",Ie="data-custom",Ae="aria-expanded",Se="aria-disabled",Te="aria-haspopup",Be="aria-roledescription",Ee="data-href",Le="APEX.MENU.SPLIT_MENU",Oe=l.ui.keyCode,Ne=e=>"function"==typeof e,Fe=e=>"string"==typeof e;function Ke(e,t,n,i){e.markup("<span").attr("class",t+" "+n).optionalAttr("style",i).markup("></span>")}let De=null;function Pe(e){return De&&e.match(/^#\S*$/)?De+e:e}function qe(){var e,t,n,i,a;for(u?(i=l(u),a=null):(i=p,a=g),Ue({$menu:h[0],subMenu:!1,x:i,y:a,slide:!1}),e=1;e<h.length;e++)n=(t=h[e]).parents(Y).eq(0),Ue({$menu:t,subMenu:!0,x:n,slide:!1})}function $e(){l(window).off(".menuTracking"),l("html").off(".menuTracking"),clearTimeout(k),k=null,f=!1,apex.tooltipManager&&I&&(apex.tooltipManager.enableTooltips(),I=!1)}function Xe(e){return e.children(D).children(q)}function He(){if(!u)return;const e=l(u),t=e.is(Y)?e.find(ve)[0]:e[0];t&&t.focus({preventScroll:!0})}function Ue(t){var n,i,a,r,s,u,c,d,h,f,m=0,b=he,v="left",M="right",C=t.$menu,y={collision:"flipfit flipfit"},k="none"!==C.css("display");k||C.css({display:"block",position:"absolute",top:-99999,left:0}),t.minWidth&&C.css("min-width",t.minWidth),"true"!==C.attr(Ie)&&(r=C.find("li").first().outerHeight(),i=l(window).height(),t.$menuBar&&(i-=t.$menuBar.position().top+t.$menuBar.height()),a=i>1e3?.6:i>500?.75:1,i=Math.floor(i*a/r)*r-r,C.height()>i?(0===Xe(C).length&&((n=e.htmlBuilder()).markup("<div").attr("class",$+"  "+U).markup(">"),Ke(n,ye,R),n.markup("</div>"),C.children(D).first().addClass(H).prepend(n.toString()).append(n.toString().replace(R,j).replace(U,W)).children("ul").first().wrap("<div class='"+P+"'></div>")),Xe(C).height(i)[0].scrollTop=0,C.find(X+"."+U).addClass(me)):Xe(C).length>0&&(C.children(D).first().removeClass(H).children(X).remove(),C.find("ul").first().unwrap())),"number"==typeof t.x&&"number"==typeof t.y?(p=t.x,g=t.y,y.of=l.Event("click",{pageX:p,pageY:g}),b=null):(p=g=null,y.of=t.x),u=C.children(".u-callout"),o&&(v="right",M="left"),C.removeClass("has-callout"),t.subMenu?(s=parseInt(C.find(D).css("padding-top"),10),y.my=v+" top-"+s,y.at=M+" top"):(u.length&&(C.addClass("has-callout"),m=parseInt(C.css("margin-top"),10)),y.my=v+" top+"+m,y.at=v+" bottom"),C.position(y),C.css("display",k?"block":"none"),u.removeClass(he+" "+fe),b&&u.length&&(c=parseInt(C.css("top"),10),d=parseInt(C.css("left"),10),h="fixed"===t.x.offsetParent().css("position")?t.x.position():t.x.offset(),f=t.x.outerWidth(),c<h.top&&(b=fe),u.addClass(b),u.css("left",f/2+(h.left-d-m))),k||(t.slide?C.slideDown(200):C.show(),t.focus&&Ve(C.find(Y).first()))}l("base").length&&(De=window.location.pathname+window.location.search),l((function(){l(window).on("apexwindowresized",(function(){l(E).each((function(){l(this).menu("resize")})),f&&qe()}))}));const We={openMenu:function(e,t,n,a,p,g){var b=0;this.closeAll(),r=e[0],s=t?t[0]:null,o=l(s||r).hasClass(we),u="object"==typeof n&&n.get?n[0]:null,c=!1,d=!1,m=!0,0===h.length&&(f||(f=!0,l(window).on("blur.menuTracking",(function(){We.closeAll(!0)})),l("html").on("mousedown.menuTracking",(function(e){var t=l(e.target);0!==t.closest(N).length||u&&0!==t.closest(u).length||We.closeAll(!0)})).on("mousemove.menuTracking",(function(e){var t,n;M===e.pageX&&C===e.pageY||(M=e.pageX,C=e.pageY,!(n=(t=l(e.target)).parents(N)[0])&&s&&(n=t.parent(E)[0]),!n&&x&&x!==n&&l(x).trigger("focus"),x=n)})),apex.tooltipManager&&(apex.tooltipManager.disableTooltips(),I=!0))),h.push(e),m=!1,t&&(n.addClass(Me).children("["+Ae+"]").attr(Ae,"true"),b=n.outerWidth()),t||1!==h.length||(A=l(u||document.activeElement).scrollParent(),i.beginFreezeScroll(),document!==A[0]?(S=A[0].style.width,T=A[0].style.height,A.width(A.width()),A.height(A.height()),A.addClass("apex-no-scroll")):A=null),Ue({$menu:e,$menuBar:t,subMenu:!1,x:n,y:a,slide:p,focus:g,minWidth:b})},isCurrentMenu:function(e){return r&&r===e},isCurrentMenuBar:function(e){return s&&s===e},isMenuOpen:function(e){for(let t=0;t<h.length;t++)if(h[t]===e)return!0;return!1},openSubMenu:function(e,t,n,i,a){this.closeOpenSiblings(e,n),h.push(t),Ue({$menu:t,subMenu:!0,x:e,slide:i,focus:a}),e.addClass(Me).children(Q).find(le).attr(Ae,"true")},closeOpenSiblings:function(e,t){let n=e.parent().find(Ce);for(t&&(m=!0);n.length>0&&f;)this.closeLast(!1),n=e.parent().find(Ce);m=!1},closeLast:function(e){if(h.length>0){let t,n,a=h.pop();if(t=a.parents(Y).eq(0),t.length>0&&(n=Ze(t),t.removeClass(Me),n.filter("["+Ae+"='true']").attr(Ae,"false"),l("#"+l(n).attr("id")+"sb").filter("["+Ae+"='true']").attr(Ae,"false"),e&&Ve(t)),a.hide(),0===h.length){if(!u||c||m||setTimeout((function(){He()}),10),s&&(n=Ze(l(r).find(Ce)),l(r).find(Ce).removeClass(Me),n.attr(Ae,"false")),s||r){let e=l(s||r).data("apex-menu");e._trigger("afterClose",{},{actionTookFocus:c,actionTaken:d,launcher:u}),e.currentArgs=null}r=null,m||(s=null,$e()),i.endFreezeScroll(),A&&(A.removeClass("apex-no-scroll"),A.css("width",S),A.css("height",T),A=null)}}else r=null,s=null,$e()},closeAll:function(e){for(;h.length>0;)this.closeLast(!1);e&&(r=null,s=null,$e())}};function Re(e){return e.parent().parent().hasClass(B)}function je(e,t){let n=null;for(let i of e.items){if(i.id===t){n=i;break}if("subMenu"===i.type&&(n=je(i.menu,t),null!==n))break}return n}function ze(e){var t=null,n=e.search(/_c[0-9]+$/);return n>=0&&(t=1*e.substring(n+2)),t}function Ge(e,n,r,s,o,h,f){let m,p=null,g=!1,b=o||e.type;function v(){let a;if(l(document.body).on("dialogopen.menu",(function(e){const t=l(e.target);a=!0,t.dialog("option","modal")&&t.on("dialogclose.menu",(function(){t.off("dialogclose.menu"),He()}))})),setTimeout((function(){l(document.body).off("dialogopen.menu")}),150),Fe(e.action)&&n){let i=n.lookup(e.action);t.info("Invoke action menu item '"+(e.label||i.label)+"'"),i.convertBindingArguments&&(p=n.convertBindingArguments(p)),c=n.invoke(e.action,{},u,p)||!1}else t.info("Invoke action menu item '"+e.label+"'"),Ne(e.action)?c=e.action(s,u,p)||!1:e.href&&(e.target?i.openInNewWindow(e.href,e.target,{favorTabbedBrowsing:!0,noopener:!0}):i.redirect(e.href),c=!0);a&&(c=!0)}e.actionContextId&&(n=a.findContextById(e.actionContextId)),(e.args||h)&&(p=Object.assign({},e.args,h));try{if("toggle"===b)Fe(e.action)&&n&&(e=n.lookup(e.action),g=!0),m=!e.get(p),t.info("Invoke toggle menu item '"+(e.label||(m?e.onLabel:e.offLabel))+"' value now "+m),e.set(m,p),g&&n.update(e.name,p),d=!0;else if("radioGroup"===b)Fe(e.action)&&n&&(e=n.lookup(e.action),g=!0),m=e.choices[r].value,t.info("Invoke choice menu item '"+e.choices[r].label+"' value now "+m),e.set(m,p),g&&n.update(e.name,p),d=!0;else if("action"===b)f?setTimeout((function(){v()}),210):v(),d=!0;else if("subMenu"===b)return!1}catch(e){t.error("Error in menu action.",e)}return!0}function Ye(e,t){var n,i;if(e.menu&&e.menu.items)for(n=0;n<e.menu.items.length;n++)if((i=e.menu.items[n]).current||Ye(i,t))return t&&i.current&&delete i.current,!0;return!1}function Qe(e){e.labelKey&&(e.label=n.getMessage(e.labelKey)),e.onLabelKey&&(e.onLabel=n.getMessage(e.onLabelKey)),e.offLabelKey&&(e.offLabel=n.getMessage(e.offLabelKey))}function Ve(e){const t=e.is(ve)?e:e.find(ve).first();t[0]?.focus({preventScroll:!0})}function Je(e){var t;return t=e.closest(G)[0],e.find(G).not((function(e,n){return l(n).parent().closest(G)[0]!==t}))}function Ze(e){var t=e.children(le);return 0===t.length&&(t=e.children(Q).find(le)),t}function et(){y&&(clearTimeout(y),y=null)}l.widget("apex.menu",{widgetEventPrefix:"menu",options:{menubar:!1,callout:!1,menubarShowSubMenuIcon:null,menubarOverflow:!1,iconType:ye,behaveLikeTabs:!1,tabBehavior:"EXIT",useLinks:!0,slide:!1,firstItemIsDefault:!1,actionsContext:null,items:null,idPrefix:null,customContent:!1,asyncFetchMenu:null,beforeOpen:null,afterClose:null},isActive:!1,scrollTimerId:null,forwardKey:Oe.RIGHT,backwardKey:Oe.LEFT,actionsContext:null,_create:function(){var e,n,i=this.options,r=this.element;if(i.menubar&&i.customContent)throw new Error("Menubar cannot have custom content");if(this.actionsContext=i.actionsContext=i.actionsContext||a,i.items||!0===i.customContent||(i.items=this._parseMenuMarkup(r,i.menubar).items),!i.menubar&&(i.customContent||i.asyncFetchMenu)||i.items&&0!==i.items.length||t.error("Menu has no menu items"),"rtl"===r.css("direction")&&(r.addClass(we),i.menubar||r.attr("dir","rtl"),this.forwardKey=Oe.LEFT,this.backwardKey=Oe.RIGHT),r.attr("role",i.menubar?"menubar":"menu").addClass(i.menubar?B:O),i.menubar){if(i.menubarOverflow&&r.addClass(te),null===i.menubarShowSubMenuIcon)for(i.menubarShowSubMenuIcon=!1,e=0;e<i.items.length;e++)if("subMenu"!==i.items[e].type){i.menubarShowSubMenuIcon=!0;break}this.refresh(),i.behaveLikeTabs&&r.addClass(L),i.firstItemIsDefault&&t.warn("Invalid options for menu bar ignored")}else l("body").append(r),r.hide(),(i.menubarOverflow||i.menubarShowSubMenuIcon||i.behaveLikeTabs)&&t.warn("Invalid options for popup menu ignored");!("onwheel"in r[0])&&this._eventHandlers.wheel&&(n=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",this._eventHandlers[n]=this._eventHandlers.wheel,delete this._eventHandlers.wheel),this._on(this._eventHandlers)},_eventHandlers:{mousedown:function(e){var t,n,i;1!==e.which||e.shiftKey||e.ctrlKey||(i=l(e.target).closest(J),e.preventDefault(),i.length>0&&!i.hasClass(K)&&!i.hasClass(me)&&(i.is(X)?(i.addClass(ge),this._startScrolling(i.closest(N),i.hasClass(U))):Re(i)&&(n=i[0].id,"subMenu"===(t=this._getMenuItemFromId(n)).type&&(0!==l(e.target).closest(se).length||!t.action&&!t.href)&&this.toggle(i))))},mouseup:function(e){let t,n,i,a,r,s,o;1!==e.which||e.shiftKey||e.ctrlKey||(o=l(e.target).closest(V),e.preventDefault(),o.length>0&&!o.hasClass(K)&&(i=o[0].id,t=this._getMenuItemFromId(i),r=t.type,a=Re(o),"subMenu"===r&&a&&(s=0!==l(e.target).closest(se).length,s||!t.action&&!t.href||(r="action",We.closeOpenSiblings(o,a))),"subMenu"===r&&a||!o.is(Y)||o.hasClass(me)||"display"===r||(n=ze(i),Ge(t,this.actionsContext,n,this.options,r,this.currentArgs)&&We.closeAll())))},click:function(e){if("A"!==e.target.nodeName||1===e.which&&!e.shiftKey&&!e.ctrlKey){if(y){let t=l(e.target).closest(D+","+Y).not(D);!t.hasClass(me)&&t.find(N).length>0&&(et(),We.openSubMenu(t,t.children(N).first(),!1,this.options.slide,!0))}if(e.preventDefault(),this.keyboardActivate){let t,n,i,a;this.keyboardActivate=!1,t=l(e.target).closest(V),t.length>0&&!t.hasClass(K)&&(n=t[0].id,i=this._getMenuItemFromId(n),t.is(Y)&&!t.hasClass(me)&&(a=ze(n),Ge(i,this.actionsContext,a,this.options,"subMenu"===i.type?"action":i.type,this.currentArgs)&&We.closeAll()))}}else this.keyboardActivate=!1},mousemove:function(e){var t,n,i,a,r,s=this.options;function o(){var e=i.parent().find(Ce).eq(0);e.length>0&&!k&&(e.removeClass(Me),w=e.find(N)[0],k=setTimeout((()=>{e.addClass(Me),k=null,w=null,We.closeOpenSiblings(i,t)}),300))}if(b!==e.pageX||v!==e.pageY){if(b=e.pageX,v=e.pageY,a=(n=l(e.target)).closest(D+","+Y).not(D),!k||n.closest(N)[0]!==w&&"true"!==Ze(a).attr(Ae)||(l(w).parent().addClass(Me),w=null,clearTimeout(k),k=null),(i=n.closest(".a-Menu-itemSep")).length>0&&i[0]!==_)return et(),t=Re(i),o(),_=i[0],void((r=n.closest(N).eq(0)).length>0&&!r.hasClass(pe)&&r.trigger("focus"));if((i=a).length>0){if(i[0]!==_){if(_=i[0],et(),(t=Re(i))&&f?(clearTimeout(k),k=null,We.closeOpenSiblings(i,t)):o(),s.menubar&&!We.isCurrentMenuBar(this.element[0])&&!this.isActive)return this.element.find(be).removeClass(pe),void i.addClass(pe);Ve(i),!i.hasClass(me)&&i.find(N).length>0&&("true"===Ze(i).attr(Ae)?t||(r=i.find(N).eq(0),We.closeOpenSiblings(r.find(Y).eq(0),t),Ve(r)):t?We.isCurrentMenuBar(this.element[0])&&this.open(i):y=setTimeout((()=>{y=null,We.openSubMenu(i,i.children(N).first(),t,s.slide,!0)}),400))}}else n.closest(N).first().trigger("focus"),_=null}},mouseleave:function(){et(),this.options.menubar&&(We.isCurrentMenuBar(this.element[0])||this.isActive||this.element.find(be).removeClass(pe)),_=null},wheel:function(e){var t,n=l(e.target).closest(N),i=e.originalEvent.deltaY||e.originalEvent.detail||-1/40*e.originalEvent.wheelDelta;if(n.length&&!this.options.customContent){if(e.preventDefault(),!(t=Xe(n)[0]))return;void 0!==e.originalEvent.deltaMode&&1!==e.originalEvent.deltaMode||(i*=30),t.scrollTop+=i,this._checkScrollBounds(n,t)}},keydown:function(e){var t,n,i,a,r,s,o,d,h,f,m,p,g,b,v,M=this.options,C=this,y=e.which;function k(e,i){var l;if(t.hasClass(O))a=t.find(D).first().find(Y).first();else{if(l=n.index(t),(l+=1)>=n.length){if(e)return!1;l=0}a=n.eq(l)}return Ve(a),i&&(t.find(ve).attr("tabindex","-1"),a.find(ve).attr("tabindex","0")),t=a,o&&C._checkScrollBounds(d,o),!0}function w(e,i){var l;if(t.hasClass(O))a=t.find(D).first().find(Y).last();else{if(l=n.index(t),(l-=1)<0){if(e)return!1;l=n.length-1}a=n.eq(l)}return Ve(a),i&&(t.find(ve).attr("tabindex","-1"),a.find(ve).attr("tabindex","0")),t=a,o&&C._checkScrollBounds(d,o),!0}function x(e){C.toggle(t),!t.hasClass(oe)||e?Ve(a=t.find(D).first().find(Y).first()):t.find(ve).eq(0).trigger("focus")}if(!e.altKey)if(r=this.element,this.keyboardActivate=!1,r.hasClass(pe)?(t=r,r.find(Ce).first().each((function(){t=l(this)}))):t=r.find(be),d=t.closest(N+","+E),o=Xe(d)[0],s=t.is(E)||Re(t),n=s?r.find("."+Z):Je(d),y===Oe.UP||y===Oe.DOWN)s?t.children(N).length>0&&!t.hasClass(me)&&(t.hasClass(oe)&&We.isCurrentMenu(t.children(N)[0])?(a=t.find("ul").first().children(Y).first()).find(ve).trigger("focus"):x(!0)):y===Oe.UP?w():k(),e.preventDefault();else if(y===this.forwardKey)s?(k(!1,!0),We.closeOpenSiblings(t,!0),We.isCurrentMenuBar(r[0])&&t.children(N).length>0&&!t.hasClass(me)&&x()):(a=t.children(N)).length>0&&!t.hasClass(me)?(We.openSubMenu(t,a,!1,M.slide,!1),Ve(a=a.find("ul").first().children(Y).first())):M.menubar&&(t=r.find(Ce).eq(0),n=r.find("."+Z),k(),We.closeOpenSiblings(t,Re(t)),t.children(N).length>0&&!t.hasClass(me)&&x()),e.preventDefault();else if(y===C.backwardKey)s?(w(!1,!0),We.closeOpenSiblings(t,!0),We.isCurrentMenuBar(C.element[0])&&t.children(N).length>0&&!t.hasClass(me)&&x()):(a=t.parents(Y).eq(0)).length>0&&!Re(a)?We.closeLast(!0):M.menubar&&(t=r.find(Ce).eq(0),n=r.find("."+Z),w(),We.closeOpenSiblings(t,Re(t)),t.children(N).length>0&&!t.hasClass(me)&&x()),e.preventDefault();else if(y===Oe.TAB)s?("EXIT"===M.tabBehavior||e.shiftKey)&&(c=!0,We.closeAll()):("NEXT"===(v=M.tabBehavior)&&(e.shiftKey?w(!0)||(v="EXIT"):k(!0)||(v="EXIT")),"EXIT"===v&&u&&(c=!0,We.closeAll(),f=l(":tabbable"),M.menubar?(h=f.index(l(u).find(":tabbable")))<0&&(h=f.index(this.element.find(":tabbable"))):h=f.index(u),h>0&&h<f.length?h+=e.shiftKey?-1:1:f.length>0&&(h=0),h>=0&&f[h].focus()),e.preventDefault());else if(y===Oe.ESCAPE)We.closeLast(!0),e.preventDefault();else if(y===Oe.ENTER||y===Oe.SPACE){if((t=r.hasClass(pe)?r:r.find(be)).hasClass(me)||!t.is(Y))return void e.preventDefault();if(m=t[0].id,g=(p=this._getMenuItemFromId(m)).type,s=Re(t),"subMenu"===g&&s&&(p.action||p.href)&&(g="action",We.closeOpenSiblings(t,s)),"subMenu"===g)s?(C.toggle(t),Ve(a=t.find(D).first().find(Y).first())):(i=t.children(N)).length>0&&(We.openSubMenu(t,i,!1,M.slide,!1),Ve(a=i.find("ul").first().children(Y).first()));else{if(("A"!==e.target.nodeName||y!==Oe.SPACE)&&("action"===g||y===Oe.SPACE&&"BUTTON"===e.target.nodeName))return void(this.keyboardActivate=!0);"display"!==g&&(b=ze(m),Ge(p,this.actionsContext,b,M,g,this.currentArgs,y===Oe.SPACE)&&We.closeAll())}e.preventDefault()}},keypress:function(e){var t,n,i,a,l,r,s,o,u=-1;if(0!==e.which&&((l=this.element).hasClass(pe)?(a=l.find(D).first().find(Y).first(),u=0):a=l.find(be),0!==(r=a.closest(N)).length))for(s=Je(r),u<0&&(u=s.index(a)+1)>=s.length&&(u=0),i=s.eq(u),t=String.fromCharCode(e.which).toLowerCase();;){if(0===(o=i.filter(".a-Menu-label")).length&&(o=i.find(".a-Menu-label")),o.text().trim().charAt(0).toLowerCase()===t){Ve(i),(n=Xe(r)[0])&&this._checkScrollBounds(r,n);break}if((u+=1)>=s.length&&(u=0),(i=s.eq(u))[0]===a[0])break}},focusin:function(e){var t=l(e.target);this.isActive||this.element.find(be).removeClass(pe),t.is(N)?t.addClass(pe):t.closest(Y).addClass(pe),this.isActive=!0},focusout:function(e){var t=l(e.target);t.is(N)?t.removeClass(pe):t.closest(Y).removeClass(pe),this.isActive=!1}},_destroy:function(){var e=this.options,n=this.element;f&&We.isMenuOpen(this.element)&&(t.warn("Menu destroyed while still tracking menus."),We.closeAll(!0)),n.empty().removeClass((e.menubar?B+" "+L:O)+" "+we+" "+te).removeAttr("role")},_setOption:function(e,n){var i,l,r,s,o=this.options;if("menubar"===e)throw new Error("The menubar option cannot be set");if(o.menubar?"customContent"!==e&&"firstItemIsDefault"!==e||t.warn("Option "+e+" ignored when menubar is true"):"menubarOverflow"!==e&&"menubarShowSubMenuIcon"!==e&&"behaveLikeTabs"!==e||t.warn("Option "+e+" ignored when menubar is false"),this._super(e,n),"menubarOverflow"===e&&o.menubar){if(this.element.toggleClass(te,n),!n&&(i=(l=o.items)[l.length-1])&&i._overflow){for(s=i.menu.items;s.length>0;)"subMenu"===(r=s.shift()).type&&(r.action||r.href)&&r.menu.items.shift(),l.splice(l.length-1,0,r);l.pop()}}else"actionsContext"===e&&(this.actionsContext=n||a)},refresh:function(){var t=this.element,n=this.options,i=n.idPrefix||t[0].id||"menu",a=e.htmlBuilder();n.menubar&&(this._renderMenubar(a,i,n),t.html(a.toString()),this._processMenuCustomMarkup(),this.resize())},resize:function(){let t=this.element,n=this.options,i=n.idPrefix||t[0].id||"menu",a=e.htmlBuilder();n.menubar&&n.menubarOverflow&&this._adjustMenubarForSize(i,n)&&(this._renderMenubar(a,i,n),t.html(a.toString()),this._processMenuCustomMarkup())},toggle:function(e,t,n){let i=this.element;if(this.options.menubar&&(i=null,"number"==typeof e?(e=this.element.children("ul").children("li").eq(e)).length>0&&(i=e.children(N)):e.is(Y)&&(i=e.children(N)),!i||1!==i.length))throw new Error("Invalid menu bar menu");We.isCurrentMenu(i[0])?We.closeAll():this.open(e,t,n)},open:function(i,a,r){let s,o,u,c,d,h,m=!1,p=this,g=this.options,b=e.htmlBuilder();function v(){p._trigger("beforeOpen",{},d),s.customContent?(Fe(s.customContent)&&(o.empty().append(l("#"+e.escapeCSS(s.customContent)).show()),s.customContent=!0),p._parseCustomMarkup(o,c,s)):(b.clear(),p._renderMenu(b,c,s,h,!0),o.html(b.toString()))}if(p.currentArgs=r,g.menubar){if(u=this.element,o=null,"number"==typeof i?(i=this.element.children("ul").children("li").eq(i)).length>0&&(o=i.children(N)):i.is(Y)&&(o=i.children(N)),!o||1!==o.length)throw new Error("Invalid menu bar menu");if(c=i[0].id,s=this._getMenuItemFromId(c),!s||"subMenu"!==s.type||!s.menu)throw new Error("Can't open menu "+i);d=s,s=s.menu,h=!1}else u=null,s=g,d={menu:s},o=this.element,c=g.idPrefix||this.element[0].id||"menu",h=!0;if(Ne(g.asyncFetchMenu)){if(!f&&g.menubar)for(let e=0;e<g.items.length;e++)g.items[e]._fetched=!1;g.menubar&&!0===d._fetched?v():(p._renderMenu(b,c,{items:[{type:"action",disabled:!0,label:n.getMessage("APEX.MENU.PROCESSING")}]},h,!0),o.html(b.toString()),m=!0,g.asyncFetchMenu(s,(function(e){var t;if(We.isCurrentMenu(o[0])){if(!1===e)return void We.closeAll(!0);t=o.find(be).first(),v(),qe(),t.length?Ve(o.find(Y).first()):o.trigger("focus")}})),g.menubar&&(d._fetched=!0))}else v();m||0!==s.items.length?We.openMenu(o,u,i,a,g.slide,g.menubar||!1!==a):(t.error("Menu has no items"),p._trigger("afterClose",{},{actionTookFocus:!1,actionTaken:!1,launcher:null}))},find:function(e){return je(this.options,e)},setCurrentMenuItem:function(e){var i,a,l=0,r=this.options.items;if(this.options.menubar&&this.options.behaveLikeTabs){if(Fe(e)&&(e=this.find(e)),e){for(l=0;l<r.length;l++)(i=r[l]).current&&(a=i,delete i.current),Ye(i,!0);for(e.current=!0,l=0;l<r.length;l++)if(Ye(i=r[l])){i.current=!0,Qe(a),this.element.find("."+ue).removeClass(ue).find(".a-MenuBar-label").text(a.label),this.element.children("ul").children("li").eq(l).addClass(ue).find(".a-MenuBar-label").append(" <span class='u-vh'>"+n.getMessage("APEX.MENU.CURRENT_MENU")+"</span>");break}}}else t.warn("setCurrentMenuItem ignored")},_parseMenuMarkup:function(e,n){let i=this,r={items:[]};return e.children("ul").children("li").each((function(e){let s,o,u,c,d,h,f,m=l(this),p=m.children("a").eq(0),g=m.children("span").eq(0),b={type:"action"};if(p.length>0){let e=p.attr("href");f=a.parseActionBinding(e,{testForFragment:!0}),b.label=p.text(),f||(b.href=e,h=p.attr("target"),h&&(b.target=h))}else g.length>0?b.label=g.text():b.type="separator";if("separator"===b.href&&(b.type="separator",delete b.href,delete b.target,delete b.label),u=m.attr(xe),u&&(f||(f={actionName:u,contextId:m.attr(_e)}),b.id=u),"true"===m.attr("data-hide")&&(b.hide=!0),"true"===m.attr("data-disabled")&&(b.disabled=!0),"true"===m.attr("data-current")&&(b.current=!0),s=m.attr("data-icon"),s&&(o=s.indexOf(" "),o>=0?(b.iconType=s.substring(0,o),b.icon=s.substring(o+1)):b.icon=s),"separator"!==b.type&&(m.children("ul").length>0||"true"===m.attr(Ie)))if(b.type="subMenu","true"!==m.attr(Ie))b.menu=i._parseMenuMarkup(m,!1);else{if(!n)throw new Error("Attribute data-custom only allowed at menubar level");d=m.children(D).eq(0),c=d[0].id,c||(c=d[0].id=(i.options.idPrefix||i.element[0].id||"menu")+"_cm_"+e),l(document.body).append(d),d.hide(),b.menu={customContent:c}}if("action"===b.type&&f){let e,n=f.actionName,l=f.contextId,r=i.actionsContext;l&&(r=a.findContextById(l),r||(t.error("No such context '"+l+"'"),r=null)),r&&(e=r.lookup(n)),e&&(b.action=n,l&&(b.actionContextId=l),f.args&&(b.args=f.args),e.label&&delete b.label,e.icon&&delete b.icon,e.iconType&&delete b.iconType,delete b.href,delete b.target,delete b.disabled,e.action||e.href?b.type="action":e.get&&e.set&&!e.choices?b.type="toggle":e.choices&&(b.type="radioGroup"))}r.items.push(b)})),r},_parseCustomMarkup:function(e,n,i){let r=this;i.items||(i.items=[]),e.attr(Ie,"true"),0===e.find(D).length&&e.children().first().addClass(K),e.find(ve).each((function(e){let s,o,u,c,d,h=l(this),f=h.closest(G);if(h.attr("role","menuitem"),0===f.length&&(f=l(this),f.addClass(z)),f.hasClass(ie)||0!==f.find(".a-Menu-label").length||h.addClass(ie),f[0].id=n+"_"+e,u=h.attr("href"),"A"===this.nodeName&&u?(o={type:"action",label:h.text().trim()},d=a.parseActionBinding(u,{testForFragment:!0}),d||(o.href=u,c=h.attr("target"),c&&(o.target=c)),i.items[e]=o):"BUTTON"===this.nodeName?(u=h.attr(Ee),o={type:"action",label:h.text().trim()},u?d=a.parseActionBinding(u,{testForFragment:!0}):o.action=function(){},i.items[e]=o):(h.attr("tabindex","-1"),i.items[e]||(o={type:"display",label:h.text(),disabled:!0},i.items[e]=o)),s=f.attr(xe),s&&(d||(d={actionName:s,contextId:f.attr(_e)}),o.id=s),d&&"action"===o.type){let e,n=d.actionName,i=d.contextId,l=r.actionsContext;if(i&&(l=a.findContextById(i),l||(t.error("No such context '"+i+"'"),l=null)),l&&(e=l.lookup(n)),e&&(o.action=n,i&&(o.actionContextId=i),d.args&&(o.args=d.args),delete o.href,delete o.target,delete o.label,delete o.disabled,delete o.icon,delete o.iconType,"A"===h[0].nodeName)){let e="";h[0]===f[0]&&(e=`id="${f[0].id}"`),h.replaceWith(`<button type="button" ${e} ${Ee}="${u}" class="${h.attr("class")}" role="menuitem">${h.html()}</button>`),f.attr(xe,n),i&&f.attr(_e,i)}}}))},_processMenuCustomMarkup:function(){var t=this;this.element.find("."+Z).each((function(){var n=l(this).children(N),i=this.id,a=t._getMenuItemFromId(i).menu;a&&a.customContent&&(Fe(a.customContent)&&(n.empty().append(l("#"+e.escapeCSS(a.customContent)).show()),a.customContent=!0),t._parseCustomMarkup(n,i,a))}))},_getMenuItemFromId:function(e){const t=this.options,n=this.element.attr("id"),i=e.replace(n,"dummy").split("_");let a,l=i.length-1,r=[],s=null;for(i[l].match(/^c[0-9]+$/)&&(l-=1);l>0&&i[l].match(/^[0-9]+$/);l--)r.unshift(1*i[l]);for(a=t.items,l=0;l<r.length;l++){if(s=a[r[l]],!s||l<r.length-1&&!s.menu)return null;s.menu&&(a=s.menu.items)}return s},_itemIsHidden:function(e){var t=e.hide,n=this.options;return Ne(t)&&(t=e.hide(n)),t},_itemIsDisabled:function(e){var t=e.disabled,n=this.options;return Ne(t)&&(t=e.disabled(n)),t},_renderMenubar:function(e,i,r){var s=this,o=0,u=this.options,c="NEXT"===u.tabBehavior;if(u.behaveLikeTabs)for(let e=0;e<r.items.length;e++){let t=r.items[e];if(Ye(t)&&(t.current=!0),t.current){o=e;break}}this.element.find("."+F).filter("["+Ie+"]").each((function(){var e=l(this).children().eq(0);s._getMenuItemFromId(e.closest(Y)[0].id).menu.customContent=e[0].id,l(document.body).append(e)})),e.markup("<ul").attr("role","none").markup(">");for(let l=0;l<r.items.length;l++){let d,h,f,m,p=r.items[l],g=s.actionsContext,b=p.type,v=i+"_"+l,M="subMenu"===b,C=!(!M||!p.action&&!p.href);if(p.actionContextId&&(g=a.findContextById(p.actionContextId)),"action"===b&&Fe(p.action)&&(m=g.lookup(p.action),m?(p.hide=!1,m.label&&!p.label&&(p.label=m.label),void 0!==m.hide&&(p.hide=m.hide),void 0!==m.disabled&&(p.disabled=m.disabled),m.href&&!p.href&&(p.href=m.href,m.target&&(p.target=m.target))):(t.warn("Unknown action name "+p.action+" (item hidden)."),p.hide=!0)),!s._itemIsHidden(p)){if(h=Z,f=s._itemIsDisabled(p),f&&(h+=" "+me),C&&(h+=" "+oe),u.behaveLikeTabs&&p.current&&(h+=" "+ue),p._overflow&&(h+=" "+ee),"action"!==b&&!M)throw new Error("Menu item type not supported in menubar: "+b);e.markup("<li role='none' ").attr("id",v).attr("class",h).markup(">"),Qe(p),d=p.label,(p.icon||p.iconType)&&t.warn("Menu bar items cannot have icons."),p.accelerator&&t.warn("Menu bar items cannot have accelerators."),f?e.markup("<span role='menuitem' ").attr("class",ae).attr("tabindex",c||l===o?"0":"-1").optionalAttr(ce,u.behaveLikeTabs&&p.current?"true":null).optionalAttr(Be,C?n.getMessage(Le):null).attr("id",v+"i").optionalAttr(Se,f?"true":null).optionalAttr(Ae,C?null:M?"false":null).markup(">").content(d).markup("</span>"):p.href&&u.useLinks?e.markup("<a role='menuitem' ").attr("class",ae).optionalAttr(ce,u.behaveLikeTabs&&p.current?"true":null).optionalAttr(Be,C?n.getMessage(Le):null).attr("id",v+"i").attr("href",Pe(p.href)).optionalAttr("target",p.target?p.target:null).optionalAttr("tabindex",c||l===o?null:"-1").optionalAttr(Ae,C?null:M?"false":null).markup(">").content(d).markup("</a>"):(e.markup("<button type='button' role='menuitem' ").attr("class",ae).optionalAttr(!p._overflow&&ce,u.behaveLikeTabs&&p.current?"true":null).optionalAttr(Be,C?n.getMessage(Le):null).attr("id",v+"i").optionalAttr("tabindex",c||l===o?null:"-1").optionalAttr(Ae,C?null:M?"false":null),p._overflow?e.attr("title",d).markup("><span class='a-Icon icon-down-chevron'></span>"):e.markup(">").content(d),e.markup("</button>")),M&&(!C&&!u.menubarShowSubMenuIcon||p._overflow||(e.markup("<span class='"+re+"'").optionalAttr("role",C?"button":null).optionalAttr(Be,C?n.getMessage("APEX.MENU.SPLIT_BUTTON"):null).optionalAttr("id",C?v+"isb":null).optionalAttr("aria-hidden",C?null:"true").optionalAttr(Se,f?"true":null).optionalAttr("aria-label",C?d:null).optionalAttr(Te,C?"menu":null).optionalAttr(Ae,C?"false":null).attr("tabindex","-1"),e.markup(">"),Ke(e,ye,!u.menubarShowSubMenuIcon||p.action||p.href?"icon-menu-split-drop-down":"icon-menu-drop-down"),e.markup("</span>")),e.markup("<div").attr("id",v+"m").markup(" class='"+O+" "+F+"' role='menu' style='display:none;'></div>")),e.markup("</li>")}}e.markup("</ul>")},_renderMenu:function(n,i,l,r,s){const o=this.options,u=this,c=this.element.hasClass(we);let d=!1,h=0,f="icon-menu-sub";function m(){d=!1,h>0&&(n.markup("<li class='").markup(de).markup("' role='separator'><div class='a-Menu-inner'><span class='a-Menu-labelContainer'><span class='").markup(ne).markup("'></span><span class='").markup("a-Menu-hSeparator").markup("'></span></span><span class='a-Menu-accelContainer'></span></div></li>"),h+=1)}function p(e,t,i){n.markup("<span class='"+ne+"'>"),(t||""===t)&&Ke(n,e,t,i),n.markup("</span>")}function g(e,t,i,a,l,r,s,u,c,d){let h;t?(n.markup("<span tabindex='-1'").optionalAttr(Se,t?"true":null),h="</span>"):r&&o.useLinks?(n.markup("<a").attr("href",Pe(r)),h="</a>"):(n.markup("<button type='button'"),h="</button>"),n.attr("id",e).attr("role",u).attr("class",ie).optionalAttr("target",s||null).optionalAttr(Te,d?"menu":null).optionalAttr(Ae,d?"false":null).optionalAttr("aria-checked",null!==c&&c?"true":null).optionalAttr("aria-keyshortcuts",l).markup(">"),n.content(i),n.markup(h).markup("</span><span class='a-Menu-accelContainer'>"),a&&function(e,t){n.markup("<span").attr("class","a-Menu-accel").optionalAttr("aria-hidden",!!t||null).markup("> ").content(e).markup("</span>")}(a,!!l)}function b(){n.markup("<span class='"+re+"'></span>")}c&&(f="icon-menu-sub-rtl"),o.callout&&s&&n.markup("<div class='u-callout'></div>"),n.markup("<div class='"+K+"'><ul").attr("role","group").attr("aria-labelledby",i+"i").markup(">");for(let s=0;s<l.items.length;s++){let c,C,y,k,w,x,_,I,A,S,T,B,E,L=l.items[s],N=null,F=u.actionsContext,K=null,D=L.type,P=i+"_"+s;if(L.actionContextId&&(F=a.findContextById(L.actionContextId)),Qe(L),k=L.icon,w=L.iconType,C=L.label,B=L.href,E=L.target,I=L.accelerator,A=I?a.ariaKeyshortcut(I):null,"action"!==L.type&&"toggle"!==L.type&&"radioGroup"!==L.type||!Fe(L.action)||(K=F.lookup(L.action),K?(L.hide=!1,K.icon&&!L.icon&&(k=K.icon),K.iconType&&!L.iconType&&(w=K.iconType),K.label&&!L.label&&(C=K.label),K.shortcut&&(I=a.shortcutDisplay(K.shortcut),A=a.ariaKeyshortcut(K.shortcut)),void 0!==K.hide&&(L.hide=K.hide),void 0!==K.disabled&&(L.disabled=K.disabled),void 0!==K.href&&(B=K.href),void 0!==K.target&&(E=K.target),K.choices&&(L.choices=K.choices)):(t.warn("Unknown action name "+L.action+" (item hidden)."),L.hide=!0)),!u._itemIsHidden(L))if(y="separator"===D?de:z,x=u._itemIsDisabled(L),x&&(y+=" "+me),0===s&&r&&o.firstItemIsDefault&&(y+=" a-Menu-item--default"),"radioGroup"===D){d=!0,K&&(L=K),(L.args||u.currentArgs)&&(N=Object.assign({},L.args,u.currentArgs)),c=L.get(N);for(const[e,i]of Object.entries(L.choices)){var v=P+"_c"+e,M=c===i.value;I=i.accelerator||null,i.shortcut&&(I=a.shortcutDisplay(i.shortcut),A=a.ariaKeyshortcut(i.shortcut)),y=z,x=i.disabled,Ne(x)&&(x=i.disabled(o)),x&&(y+=" "+me),i.icon&&!K&&t.warn("Radio menu items cannot have icons."),d&&m(),n.markup("<li").attr("role","none").attr("id",v).attr("class",y).markup("><div class='a-Menu-inner'><span class='a-Menu-labelContainer'>"),p(ye,M?"icon-menu-radio":""),Qe(i),S=v+"i",g(S,x,i.label,I,A,null,null,"menuitemradio",M),b(),n.markup("</span></div></li>"),h+=1}d=!0}else"separator"===D?d=!0:(_="toggle"===D?"menuitemcheckbox":"menuitem",d&&m(),S=P+"i",n.markup("<li role='none' id='").attr(P).markup("' class='").attr(y).markup("'><div class='a-Menu-inner'><span class='a-Menu-labelContainer'>"),"action"===D||"display"===D?(p(w||o.iconType,k,L.iconStyle),g(S,x,C,I,A,B||"",E,_,null),b(),n.markup("</span></div>")):"toggle"===D?(K&&(L=K),(L.args||u.currentArgs)&&(N=Object.assign({},L.args,u.currentArgs)),c=L.get(N),L.icon&&!K&&t.warn("Toggle menu items cannot have icons."),L.label&&(L.onLabel||L.offLabel)&&t.warn("Toggle menu items should not have both label and on/offLabel properties."),C=L.label,k=c?"icon-menu-check":"",w=ye,C||(k=null,L.onIcon&&L.offIcon&&(k=c?L.onIcon:L.offIcon),C=c?L.onLabel:L.offLabel,_="menuitem",c=null,w=L.iconType||o.iconType),p(w,k),g(S,x,C,I,A,null,null,_,c),b(),n.markup("</span></div>")):"subMenu"===D&&(p(L.iconType||o.iconType,L.icon,L.iconStyle),g(S,x,L.label,null,null,"",null,_,null,!0),L.accelerator&&t.warn("Sub menu items cannot have accelerators."),n.markup("<span aria-hidden='true' class='"+re+"'>"),Ke(n,ye,f),n.markup("</span></span></div>"),T=e.htmlBuilder(),u._renderMenu(T,P,L.menu,!1,!1),n.markup("<div class='"+O+"' role='menu'").attr("id",S+"m").markup(">"+T.toString()),n.markup("</div>")),n.markup("</li>"),h+=1)}n.markup("</ul></div>")},_checkScrollBounds:function(e,t){return e.find(X).removeClass(me),t.scrollTop<=0?(e.find(X+"."+U).addClass(me),t.scrollTop=0,!0):t.scrollTop>=t.scrollHeight-t.clientHeight&&(e.find(X+"."+W).addClass(me),t.scrollTop=t.scrollHeight-t.clientHeight,!0)},_startScrolling:function(e,t){var n=this,i=0,a=[100,99,96,91,84,75,64,51,36,19],r=Xe(e)[0];this.scrollTimerId&&this._stopScrolling(),l(document).on("mouseup.menuScrolling",(function(){n._stopScrolling()})).on("mousemove.menuScrolling",(function(e){0===l(e.target).closest(X).length&&n._stopScrolling()})),function l(){r.scrollTop+=t?-10:10,n._checkScrollBounds(e,r)?n._stopScrolling():(n.scrollTimerId=setTimeout((function(){l()}),a[i]),i<a.length-1&&(i+=1))}()},_stopScrolling:function(){clearTimeout(this.scrollTimerId),this.scrollTimerId=null,this.element.find(X).removeClass(ge),l(document).off(".menuScrolling")},_adjustMenubarForSize:function(t,i){var a,r,s,o,u,c,d,h=!1,f=0,m=this.element.width()-2,p=i.items;for((u=p[p.length-1])&&u._overflow||(u=null),a=0;a<p.length;a++)(s=p[a]).hide?s._width=0:s._width=l("#"+e.escapeCSS(t+"_"+a)).outerWidth(!0),f+=s._width;if(f>m)for(u||(u={type:"subMenu",_overflow:!0,label:n.getMessage("APEX.MENU.OVERFLOW_LABEL"),menu:{items:[]}},p.push(u)),r=u.menu.items,a=p.length-2;a>=0&&f>m;)s=p[a],p.splice(a,1),"subMenu"===s.type&&(s.action||s.href)&&s.menu.items.unshift({type:"action",label:s.label,labelKey:s.labelKey,href:s.href,target:s.target,action:s.action,disabled:s.disabled}),"subMenu"===s.type&&s.menu.customContent&&((c=(d=l("#"+e.escapeCSS(t+"_"+a))).children(N).children().eq(0)).hide(),s.menu.customContent=c[0].id,l(document.body).append(c),d.children(N).attr(Ie,null)),r.unshift(s),f-=void 0!==s._width?s._width:0,h=!0,a-=1;else if(u){for(r=u.menu.items,o=0,a=0;a<r.length&&o<3;a++)r[a]._width>0&&(o+=1);for(1===o&&(f-=this.element.find("."+ee).outerWidth(!0)),delete u.current;r.length>0&&!((f+=void 0!==(s=r[0])._width?s._width:0)>m);)r.shift(),"subMenu"===s.type&&(s.action||s.href)&&s.menu.items.shift(),p.splice(p.length-1,0,s),h=!0;0===r.length&&p.pop()}return h}}),l.ui.dialog&&l.widget("ui.dialog",l.ui.dialog,{_allowInteraction:function(e){return l(e.target).closest(N).length>0||this._super(e)}}),l((function(){function n(n,i,a){let r=n.attr("data-menu");if(r){let s=l("#"+e.escapeCSS(r));if(!s.length)return void t.error("Menu cannot be found "+r);n.addClass(ge).attr(Ae,"true"),a&&We.isCurrentMenu(s[0])||s.menu("toggle",n,!1).on("menuafterclose.menubutton",(function(){l(this).off(".menubutton"),n.removeClass(ge).removeAttr(Ae)})),i&&Ve(s.find(Y).first())}}let i=l("body");i.on("click",ke,(function(){n(l(this),!0,!1)})).on("keydown",ke,(function(e){e.which===Oe.DOWN?(e.preventDefault(),n(l(this),!0,!0)):e.which===Oe.TAB&&(c=!0,We.closeAll())})),l(ke).attr(Te,"menu").removeAttr(Ae),i.on("apexafterrefresh",(function(e){l(e.target).find(ke).attr(Te,"menu").removeAttr(Ae)}))})),l.event.special.wheel={setup:function(e,t,n){this.addEventListener("wheel",n,l(this).hasClass(O)?{passive:!1}:void 0)}}}(apex.util,apex.debug,apex.lang,apex.navigation,apex.actions,apex.jQuery);