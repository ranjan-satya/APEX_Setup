/*!
 * Copyright (c) 2014, 2023, Oracle and/or its affiliates.
 */
!function(e,t){"use strict";const n="a-Collapsible",i=n+"-content",l=n+"-heading",s="a-Icon "+n+"-icon",o="."+n,a="aria-controls",d="aria-expanded",r="aria-hidden";e.widget("apex.collapsible",{widgetEventPrefix:"collapsible",baseId:null,heading$:null,controllingElement$:null,content$:null,isContentIdSetByWidget:!1,isHeadingIdSetByWidget:!1,isControllingElementALink:!1,core:null,expandedClass:"is-expanded",collapsedClass:"is-collapsed",options:{heading:"h1,h2,h3,h4,h5,h6",controllingElement:"button,a",content:null,collapsed:!0,doCollapse:!0,universalTheme:!1,expandedClass:null,collapsedClass:null,rememberState:!1,renderIcon:!0},_create:function(){let c,h,g=this,p=this.options,m=e(o).length;const C=this.element.attr("data-region-id");if(this.baseId=C?`a_Collapsible_${C}`:`a_Collapsible${m+1}_${this.element.attr("id")}`,this.element.addClass(n),p.expandedClass&&(this.expandedClass+=" "+p.expandedClass),p.collapsedClass&&(this.collapsedClass+=" "+p.collapsedClass),this.heading$=this.element.find(p.heading).first(),this.heading$.addClass(l),this.controllingElement$=this.element.find(p.controllingElement).first(),this.controllingElement$.text()||(h=this.heading$[0].id,h||(h=this.baseId+"_heading",this.heading$[0].id=h,this.isHeadingIdSetByWidget=!0),this.controllingElement$.attr("aria-labelledby",h)),p.universalTheme?this.content$=p.content:p.content?this.content$=this.element.find(p.content).first():this.content$=this.heading$.next(),this.content$.addClass(i),c=this.content$[0].id,c||(c=this.baseId+"_content",this.content$[0].id=c,this.isContentIdSetByWidget=!0),this.controllingElement$.attr(a,c).attr(d,!p.collapsed),this.controllingElement$.is("a")&&(this.isControllingElementALink=!0),p.renderIcon){let e=t.htmlBuilder();e.markup("<span").attr("class",s).attr("aria-hidden",!0).markup(">").markup("</span>"),this.controllingElement$.prepend(e.toString())}this.isControllingElementALink&&(this.controllingElement$.attr("role","button"),this._on(this.controllingElement$,{keypress:function(t){t.which===e.ui.keyCode.SPACE&&(g.core.toggle(),t.preventDefault())}})),this.core=apex.ToggleCore({key:g.baseId,controllingElement:this.controllingElement$,content:g.element,contentClassExpanded:this.expandedClass,contentClassCollapsed:this.collapsedClass,defaultExpandedPreference:!p.collapsed,useSessionStorage:p.rememberState,onExpand:function(){g.content$.attr(r,"false"),p.doCollapse&&g.content$.show(),g.controllingElement$.attr(d,"true"),g._trigger("expand")},onCollapse:function(){g.content$.attr(r,"true"),p.doCollapse&&g.content$.hide(),g.controllingElement$.attr(d,"false"),g._trigger("collapse")}}),this.core.initialize()},_destroy:function(){this.element.removeClass(n+" "+this.collapsedClass+" "+this.expandedClass),this.controllingElement$.removeAttr(d).removeAttr(a),this._off(this.controllingElement$),this.isContentIdSetByWidget&&this.content$.removeAttr("id"),this.isHeadingIdSetByWidget&&this.heading$.removeAttr("id"),this.heading$.removeClass(l),this.content$.removeAttr(r).removeClass(i),this.options.doCollapse&&this.content$.show()},expand:function(){this.core.expand()},collapse:function(){this.core.collapse()},toggle:function(){this.core.toggle()},getCore:function(){return this.core}}),apex.message&&apex.message.addVisibilityCheck((function(t){e("#"+t).parents(".a-Collapsible").collapsible("expand")})),apex.widget.util.visibilityChange&&e((()=>{e(document.body).on("collapsibleexpand",(function(e){apex.widget.util.visibilityChange(e.target,!0)})).on("collapsiblecollapse",(function(e){apex.widget.util.visibilityChange(e.target,!1)}))}))}(apex.jQuery,apex.util);