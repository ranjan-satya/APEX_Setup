/*!
 Copyright (c) 2015, 2024, Oracle and/or its affiliates.
*/
!function(e,t,i,o,s,l){"use strict";const n="a-GV",r="is-selected",a=":visible",c="data-id",h="data-group-id",d="data-rownum",u="class",p="aria-disabled",m="disabled",g=Object.entries,f=e.applyTemplate,_=e=>parseInt(e,10);function S(t,i){return"."+function(t,i){const o=i.cssClassPrefix||n;return e.escapeHTMLAttr(o+"-"+t)}(t,i)}const T="a-TMV",C=T+"--variableHeight",I="a-TMV-w-scroll",A="."+I,$="a-TMV-hdr",E="."+$,R="is-disabled",P="."+R,L="selectionChange",{NAV_NONE:k}=apex.widget.ListViewSelection.NAV_MODES,w=l.ui.keyCode,O=/^\s*<\w+[^>]*>/;function B(e){e.APEX$ROW_STATE_CLASSES=e.APEX$AGG=e.APEX$AGG_TOTAL=e.APEX$ROW_URL=e.APEX$ROW_ID=e.APEX$ROW_INDEX=e.APEX$VALIDATION_MESSAGE=e.APEX$GROUP_ID=null}l.widget("apex.tableModelView",l.apex.tableModelViewBase,{widgetEventPrefix:"tableModelView",options:{headerTemplate:"",beforeTemplate:"<ul>",bodyTemplate:"",recordTemplate:"",controlBreakTemplate:"",controlBreakBeforeTemplate:"",controlBreakAfterTemplate:"",aggregateTemplate:"",afterTemplate:"</ul>",syncHeaderHScroll:!1,collectionClasses:null,iconClassColumn:null,imageURLColumn:null,imageAttributes:null,labelColumn:null,linkTarget:!1,linkTargetColumn:null,linkAttributes:null,useIconList:!1,iconListOptions:{},itemNavigationMode:k,selectionFollowsFocus:!0,multiple:!1,selectAll:!1,selectAllId:null,allowSelectHidden:!1,itemSelector:null,controlBreakSelector:null,accLabelColumn:null,constrainNavigation:!0,allowCopy:!0,clipboardValue:null,selectionStateItem:null,selectionChange:null,currentItemChange:null,pageChange:null},_create:function(){const e=this.options,t=this.element;i.info(`TableModelView '${t[0].id}' created. Model: ${e.modelName}`),t.addClass(T),e.fixedRowHeight||t.addClass(C),this.gotoItemPending=null,e.recordTemplate||e.itemSelector||(e.itemSelector=".a-TMV-item"),this._sel=new apex.widget.ListViewSelection(this.element,{itemNavigationMode:e.itemNavigationMode,selectionFollowsFocus:e.selectionFollowsFocus,multiple:e.multiple,allowSelectAll:e.selectAll,selectAllId:e.selectAllId,allowSelectHidden:e.allowSelectHidden,itemSelector:e.itemSelector,groupSelector:e.controlBreakSelector,constrainNavigation:e.constrainNavigation,selectionStateItem:e.selectionStateItem,persistSelection:e.persistSelection,itemsAreServerRendered:e._isTemplateReport||!1,allowCopy:e.allowCopy,clipboardValue:e.clipboardValue,dataTransferFormats:e.dataTransferFormats},{isValid:()=>this.element.hasClass(T),getContainer:()=>this._getDataContainer(),getModel:()=>this.model,getValuesForItems:e=>this.getRecords(e),renderItem:(e,t,i,o,s)=>{this._renderRecord(e,t,i,o,s)},selectionChanged:e=>{this._trigger(L,e)},currentItemChanged:()=>{this._trigger("currentItemChange")},updateStatus:()=>{this._updateStatus()},getPagination:()=>e.pagination,keyboardIgnoreSelector:()=>".a-GV-footer, .a-TMV-hdr",firstPage:()=>{this.firstPage()},lastPage:()=>{this.lastPage()},waitForPageChange:()=>new Promise((e=>{this.element.one("tablemodelviewpagechange",(()=>{e()}))}))}),e.itemNavigationMode=this._sel.itemNavigationMode,e.persistSelection=this._sel.persistSelection,this._enforceOptionConstraints(),this._super(),this.recordHeight=null,this.recPerRow=null,this._initModel(e.modelName),this._initRecordTemplate(),this._on(this._eventHandlers),this._sel.initialize(),this.refresh(),e.disabled&&this._setOption(m,e.disabled)},_eventHandlers:{keydown:function(e){const t=this.options,i=e.which;if(!e.isDefaultPrevented()&&t.useIconList){let o=this.getIconList().options;if(!o.navigation&&o.noNavKeyContent&&l(e.target).closest(o.noNavKeyContent).length)return;if(i!==w.DOWN&&i!==this.getIconList().forwardKey||!t.pagination.loadMore)(i===w.UP||i===this.getIconList().backwardKey)&&t.pagination.loadMore&&l(e.target).hasClass("js-load")&&(this.getIconList().focus(),e.preventDefault());else{let t=this.element.find(".js-load");if(t[0]){if(t[0].disabled)return;t.trigger("focus"),e.preventDefault()}}t.constrainNavigation&&[w.DOWN,w.UP,w.LEFT,w.RIGHT,w.PAGE_UP,w.PAGE_DOWN].includes(i)&&e.preventDefault()}},resize:function(e){e.target===this.element[0]&&(this.resize(),e.stopPropagation())}},_destroy:function(){const e=this.element;this._tableModelViewDestroy(),e.removeClass(T+" "+R).empty(),this._sel.destroy(),this._sel=null,i.info(`TableModelView '${e[0].id}' destroyed. Model: ${this.options.modelName}`),this.data$=null,this._initModel(null)},_setOption:function(e,t){const o=this.options;if(i.info(`TableModelView '${this.element[0].id}' set option '${e}' to: ${t}`),"iconListOptions"===e)throw new Error(`TableModelView '${e}' cannot be set. Set options directly on the iconList widget`);if("allowCopy"===e)throw new Error(`TableModelView '${e}' cannot be set`);if(["itemNavigationMode","selectionFollowsFocus","multiple","selectAll","selectAllId","allowSelectHidden","itemSelector","controlBreakSelector","constrainNavigation","dataTransferFormats","clipboardValue","persistSelection","selectionStateItem",m].includes(e)){let i=e;"selectAll"===e?i="allowSelectAll":"controlBreakSelector"===e&&(i="groupSelector"),this._sel[i]=t,t=this._sel[i]}if(this._super(e,t),this._enforceOptionConstraints(),e===m){if(this.element.toggleClass(R,t),o.useIconList)return this.getIconList().option(e,t);t&&this.resize()}else"modelName"===e?(this._initModel(t),this.refresh(!1)):"highlights"===e?this._updateHighlights():"hideEmptyFooter"===e?this._updateTotalRecords():"fixedRowHeight"===e?(this.element.toggleClass(C,!t),this.refresh()):["beforeTemplate","recordTemplate","afterTemplate","collectionClasses","iconClassColumn","imageURLColumn","imageAttributes","labelColumn","linkTarget","linkTargetColumn","linkAttributes","bodyTemplate","entityTitleSingular","entityTitlePlural","multiple","itemNavigationMode"].includes(e)?(this.options.labelColumn&&(this.options.recordTemplate=null),this._initRecordTemplate(),this.refresh()):["footer","useIconList","pagination","rowsPerPage"].includes(e)&&this.refresh()},_enforceOptionConstraints:function(){const e=this.options;e.useIconList&&this._sel.supportsNavigation()&&(i.warn("Forced itemNavigationMode to none when useIconList is true"),e.itemNavigationMode=k,this._sel.itemNavigationMode=k),this._sel.supportsNavigation()&&!e.itemSelector&&(i.warn("Forced itemNavigationMode to none because itemSelector not defined"),e.itemNavigationMode=k,this._sel.itemNavigationMode=k),!this._sel.supportsSelection()&&e.persistSelection&&(i.warn("Forced persistSelection to false when itemNavigationMode is not selection"),e.persistSelection=!1,this._sel.persistSelection=!1),e.controlBreakBeforeTemplate&&e.controlBreakAfterTemplate&&e.controlBreakTemplate&&(i.warn("Forced controlBreakTemplate to empty string in favor of before and after control break templates"),e.controlBreakTemplate=""),e.useIconList&&(e.controlBreakBeforeTemplate||e.controlBreakAfterTemplate||e.controlBreakTemplate||e.aggregateTemplate)&&(i.warn("Control break and aggregate templates cannot be used when useIconList is true"),e.aggregateTemplate=e.controlBreakTemplate=e.controlBreakBeforeTemplate=e.controlBreakAfterTemplate=""),!(e.controlBreakBeforeTemplate||e.controlBreakAfterTemplate||e.controlBreakTemplate)||e.itemSelector&&e.controlBreakSelector||(i.warn("Control break requires itemSelector and controlBreakSelector"),e.controlBreakTemplate=e.controlBreakBeforeTemplate=e.controlBreakAfterTemplate="")},refresh:function(e){const t=this.options,i=this,o=this.element;let s=!1;if(!0!==e&&(s=this._paginationHasFocus()),void 0===e&&(e=l(document.activeElement).closest(o).length>0),!this._refreshCheckIfVisible())return;if(this._checkDelayRefresh(e))return;let n=this.modelChanged;this.modelChanged=!1,this._sel.saveState(),!t.hasSize&&this.data$&&o.css("min-height",o.height()+"px"),t._isTemplateReport?this._refreshPagination(o):this._refreshPagination(o.find(A)),this._initView(),this._updateStatus(),this.resize(),this._addPageOfRecords((function(){i.noData&&t.bodyTemplate&&i._initView(!0),s&&(i._restorePaginationFocus(s),e=!1),t.hasSize||o.css("min-height",""),i._sel.restoreState(n),i._updateHeaderFooter(o.find(E)),e&&i.focus()}))},resize:function(){const e=this.element,t=this.options,i=e.height(),o=e.children().first(),s=e.find(A);let l,n;null!==e[0].offsetParent&&(o.length&&!this.pendingRefresh?(l=e.width(),t._isTemplateReport||s.width(l),this.recordHeight=null,this.recPerRow=null,t.hasSize&&(n=i-this._footerHeight(),o.height(n),s.height(n-(e.find(E).height()||0))),this.data$&&(t.useIconList&&this.data$.iconList("resize"),this._initPageSize(),this._updateHeaderFooter(e.find(E)))):this.renderInProgress||this.refresh())},focus:function(){const e=this.getIconList();e?e.focus():this._sel.focus()},getCurrentItem:function(){return this._sel.getCurrentItem()},setCurrentItem:function(e,t){this._sel.setCurrentItem(e,t)},getCurrentItemValue:function(){let e=this.getCurrentItem();if(e?.is(this.options.controlBreakSelector))return e.attr(h);if(e){let t=this.getRecords(e)[0];return this.model.getRecordId(t)}return null},setCurrentItemValue:function(t,i){const o=this._getDataContainer();let s=o.find(`[${c}="${e.escapeCSS(t)}"]`);!s[0]&&this._hasControlBreaks()&&(s=o.find(`[${h}="${e.escapeCSS(t)}"]`)),this.setCurrentItem(s,i)},gotoItem:function(t){const o=this.options;let s,l,n,r,a=!1,h=this.element.find(`[${c}="${e.escapeCSS(t)}"]`);if(this.gotoItemPending=null,this.data$){if(!h.length){if(s=this.model.getRecord(t),!s)return void i.warn("Warning record not found "+t);l=this.model.indexOf(s),this.gotoItemPending=t,o.pagination.scroll?(n=this.scrollParent$,r=Math.floor(l*this.avgRowHeight),n.scrollTop(r)):(this.pageOffset=Math.floor(l/this.pageSize)*this.pageSize,a=!0)}a&&this.refresh(!1),this.gotoItemPending||this.setSelection(h,!0)}},getSelection:function(){const e=this.options,t=this.getIconList();return e.useIconList?t?t.getSelection():l():this._sel.getSelection()},setSelection:function(e,t,i){const o=this.getIconList();o?o.setSelection(e,t,i):this._sel.setSelection(e,t,i)},selectAll:function(e,t){this.options.useIconList||this._sel.selectAll(e,t)},getRecords:function(e){let t=this.model,i=[];return e.each((function(){let e,o=l(this).attr(c);o&&(e=t.getRecord(o),e&&i.push(e))})),i},getSelectedRecords:function(){if(this.data$){if(this.options.useIconList)return this.getRecords(this.getSelection());if(this._sel.supportsSelection())return this._sel.getSelectedValues()}return null},getSelectedValues:function(){const e=this.getSelectedRecords();return e?e.map((e=>this.model.getRecordId(e))):null},setSelectedRecords:function(e,t,i){const o=this.options,s=this.data$;if(!s||this.renderInProgress)return-1;if(o.useIconList){let n=[],r=0,a=e.length,h=new Set;!o.multiple&&a>1&&(a=1);for(let t=0;t<a;t++)h.add(this.model.getRecordId(e[t]));return s.children().each((function(){let e=l(this).attr(c);h.has(e)&&(h.delete(e),n.push(this),r+=1)})),this.setSelection(l(n),t,i),r}return this._sel.setSelectedValues(e,t,i)},setSelectedValues:function(e,t,i){let o=[];return e.forEach((e=>{const t=this.model.getRecord(e);t&&o.push(t)})),this.setSelectedRecords(o,t,i)},getIconList:function(){return this.options.useIconList&&this.data$?this.data$.data("apex-iconList"):null},_initRecordTemplate:function(){const e=this.options;if(!e.recordTemplate){let t,i,o;if(e.collectionClasses||(e.collectionClasses="a-TMV-defaultIconView"),!e.labelColumn)throw new Error("Option recordTemplate or labelColumn is required");e.beforeTemplate="<ul>",e.afterTemplate="</ul>",t=`<li ${c}='&APEX$ROW_ID.' ${d}='&APEX$ROW_INDEX.' class='a-TMV-item &APEX$ROW_STATE_CLASSES.'>`,e.linkTarget||e.linkTargetColumn?(o=e.linkTargetColumn?e.linkTargetColumn:"APEX$ROW_URL",t+=`<a href='&${o}.' class='a-IconList-content' ${e.linkAttributes?e.linkAttributes:""}>`,i="</a>"):(t+="<span class='a-IconList-content'>",i="</span>"),this._sel.supportsSelection()&&(t+="<div class='a-IconList-selection'>#APEX$SELECTOR#</span>"),(e.iconClassColumn||e.imageURLColumn)&&(t+="<span class='a-IconList-icon'>",e.iconClassColumn?t+=`<span class='&${e.iconClassColumn}.'></span>`:t+=`<img src='&${e.imageURLColumn}.' ${e.imageAttributes?e.imageAttributes:""}/>`,t+="</span>"),t+=`<span class='a-IconList-label'>&${e.labelColumn}.</span>${i}</li>`,e.recordTemplate=t}let t=this.atOptions;t.model=this.model,t.record=null,B(t.extraSubstitutions),O.exec(f(e.recordTemplate,t))||e._isTemplateReport||(f(e.beforeTemplate,t).toLowerCase().match(/<ul|<ol/)?e.recordTemplate=`<li>${e.recordTemplate}</li>`:e.recordTemplate=`<div>${e.recordTemplate}</div>`)},_initView:function(t=!1){const i=this,o=this.element,s=this.options,n="scroll.tmvss",r=this._getDataRenderContext(),a=this.atOptions,c=a.extraSubstitutions;let h,d,p,m=0,_=0,T=null;function C(){m!==_&&(d[0].scrollLeft=m=_,p[0].scrollLeft=m,h.css("left",m)),T=null}a.model=this.model,a.record=null,B(c),s._isTemplateReport||r.markup("<div").attr(u,"a-TMV-body").markup(">"),s.bodyTemplate||this._renderAltDataMessages(r);let R=[];for(const[e,t]of g(this.model.getOption("fields"))){let i=l.extend({fieldName:e},t);R.push(i)}R.sort(((e,t)=>e.seq-t.seq)),c.APEX$COLUMNS=R,s.headerTemplate&&(a.placeholders.APEX$HAS_SELECTOR=this._sel.supportsSelection()?"Y":"N",a.placeholders.APEX$HAS_SELECT_ALL=this._sel.supportsSelection()&&s.multiple&&s.selectAll?"Y":"N",a.placeholders.APEX$SELECTOR="",r.markup(`<div class='${$}'>${f(s.headerTemplate,a)}</div>`)),s.firstDisplayedRow>0&&(this.pageOffset=s.firstDisplayedRow,delete s.firstDisplayedRow,this.pageOffset>0&&s.lazyLoading&&(this.model._data.length=1)),s._isTemplateReport||r.markup("<div").attr(u,I).markup(" tabindex='-1'>");let P="\x3c!--$row$--\x3e";switch(s.bodyTemplate?(a.placeholders.APEX$HAS_MESSAGE=t?"T":"",a.placeholders.APEX$MESSAGE=s.noDataMessage,a.placeholders.APEX$MESSAGE_ICON=s.noDataIcon,a.placeholders.APEX$COMPONENT_CSS_CLASSES=s.componentCssClasses||"",a.placeholders.APEX$ROWS=P,r.markup(f(s.bodyTemplate,a))):(a.placeholders.APEX$HAS_SELECTOR=this._sel.supportsSelection()?"Y":"N",a.placeholders.APEX$SELECTOR="",r.markup(f(s.beforeTemplate,a)).markup(P).markup(f(s.afterTemplate,a)),this._renderLoadMore(r)),s._isTemplateReport||r.markup("</div></div>"),t||(this.footer$&&this.footer$.prop("outerHTML")?r.markup(this.footer$.prop("outerHTML")):this._renderFooter(r)),o.html(r.toString()),this.data$=this._findRowsPlaceholderParent(),this.data$[0]?.nodeName){case"UL":case"OL":this.recordElement="li";break;case"TBODY":case"THEAD":case"TABLE":this.recordElement="tr";break;default:this.recordElement="div"}this.data$.addClass(s.collectionClasses||""),s.headerTemplate&&this._sel.selectAllId&&o.find("#"+this._sel.selectAllId)[0]&&(this._sel.selectAllId=this._sel.selectAllId),this._sel.contentChanged(),this.selectorPlaceholder=this._sel.supportsSelection()?this._sel.getPreferredSelectorControl():"",s.useIconList&&(this.data$.iconList(s.iconListOptions),this.data$.on("iconlistselectionchange",(function(e){i._updateStatus(),i._trigger(L,e)}))),p=s._isTemplateReport?o:o.find(A),d=o.find(E),this._initPagination(d,p),s.headerTemplate&&s.syncHeaderHScroll&&(h=this.data$.find(S("loadMoreButton",s)),p.on(n,(function(){_=this.scrollLeft,T||(T=e.invokeAfterPaint(C))})),d.on(n,(function(){_=this.scrollLeft,T||(T=e.invokeAfterPaint(C))})))},_initRecordMetrics:function(){const e=this.options,t=this.atOptions,i=this._hasNestedControlBreaks();let o,s,n=0;if(B(this.atOptions.extraSubstitutions),t.record=null,this.recPerRow=1,o=i?this.data$.find(e.controlBreakSelector+" "+e.itemSelector):this.data$.children(),o=o.filter(a).first(),t.placeholders.APEX$SELECTOR=this._sel.getPreferredSelectorControl(),!o.length){let n="";i&&(t.placeholders.APEX$GROUP_IDENTIFICATION='data-group-id="0" data-rownum="0"',n+=f(e.controlBreakBeforeTemplate,t));for(let i=0;i<20;i++)t.placeholders.APEX$ROW_IDENTIFICATION=`data-id="${i}" data-rownum="${i}"`,n+=f(e.recordTemplate,t);i&&(n+=f(e.controlBreakAfterTemplate,t)),s=l(n),this.data$.append(s),o=i?this.data$.find(e.controlBreakSelector+" "+e.itemSelector):this.data$.children(),o=o.filter(a).first(),e.useIconList&&this.getIconList().refresh()}if(e.useIconList)this.recPerRow=this.getIconList().getColumns();else{let e=o,t=e.length>0?Math.trunc(e.offset().top):0,i=t,s=0;for(;i===t&&e[0];)s+=1,e=e.next(),e[0]&&(i=Math.trunc(e.offset().top));this.recPerRow=s,n=i-t}this.recPerRow<1&&(this.recPerRow=1),0===n&&(n=o.outerHeight(!0),"grid"===this.data$.css("display")&&(n+=_(this.data$.css("grid-row-gap")))),this.recordHeight=n||43,s&&s.remove()},_getHeaderHeight:function(){return this.element.find(E).outerHeight()},_getFixedRecordHeight:function(){return this.recordHeight||this._initRecordMetrics(),this.recordHeight},_getRecordsPerRow:function(){return this.recPerRow||this._initRecordMetrics(),this.recPerRow},_getDataContainer:function(){return this.data$},_checkSelectionChange:function(e){this.options.useIconList||this._sel.checkSelectionChange(e)},_selectedCount:function(){return this.options.useIconList?this.getIconList().getSelection().length:this._sel.supportsSelection()?this._sel.getSelectedCount():0},_deletedRowsHidden:function(){},_hasControlBreaks:function(){const e=this.options;return this.model.hasControlBreaks()&&Boolean(e.controlBreakTemplate||e.controlBreakAfterTemplate&&e.controlBreakBeforeTemplate)},_hasNestedControlBreaks:function(){const e=this.options;return this.model.hasControlBreaks()&&Boolean(e.controlBreakAfterTemplate&&e.controlBreakBeforeTemplate)},_controlBreakSelector:function(){return this.options.controlBreakSelector},_itemSelector:function(){return this.options.itemSelector},_elementsFromRecordIds:function(t){let i=[];for(let o=0;o<t.length;o++){let s=this.data$[0].querySelector(`[${c}="${e.escapeCSS(t[o])}"]`);s&&i.push(l(s))}return i},_renderFillerRecord:function(e,t){e.markup(`<${this.recordElement} aria-hidden="true" class="${t}"></${this.recordElement}>`)},_insertFiller:function(e,t){let i=l(e.toString());return t?t.before(i):(this.controlBreakGroupContainer$||this.data$).html(i),this._sel.contentChanged(),i},_insertData:function(e,t,i){const o=this.options;let s=l(e.toString());if(t?t[i](s):(this.controlBreakGroupContainer$||this.data$).append(s),s.find(P).add(s.filter(P)).attr(p,"true"),this._sel.contentChanged(s),o.useIconList){let e=this.element.find(A),t=e.scrollTop();this.getIconList().refresh(),e.scrollTop(t)}this.atOptions.clearItemCache=!0,this.gotoItemPending&&setTimeout((()=>{this.gotoItem(this.gotoItemPending)}),0)},_controlBreakData:function(e){return{record:e}},_renderBreak:function(t,i,o,s){const l=this.options;let n,r=this.atOptions,a=r.extraSubstitutions,c=l.controlBreakBeforeTemplate&&l.controlBreakAfterTemplate?l.controlBreakBeforeTemplate:l.controlBreakTemplate;B(a),r.model=this.model,r.record=o.record,a.APEX$GROUP_ID=this.model.getControlBreakId(o.record),a.APEX$ROW_INDEX=null!=s?""+(s+1):"",delete r.placeholders.APEX$ROW_IDENTIFICATION,r.placeholders.APEX$GROUP_IDENTIFICATION=`data-group-id="${e.escapeHTMLAttr(a.APEX$GROUP_ID)}" data-rownum="${a.APEX$ROW_INDEX}"`,delete r.placeholders.APEX$SELECTOR,n=f(c,r),l.highlighter&&(n=l.highlighter(l.highlighterContext,n)),t.markup(n),this.atOptions.clearItemCache=!1},_renderEndBreak:function(e,t){const i=this.options;let o,s=this.atOptions,l=s.extraSubstitutions,n=i.controlBreakBeforeTemplate&&i.controlBreakAfterTemplate?i.controlBreakAfterTemplate:null;n&&(B(l),s.model=this.model,s.record=t.record,delete s.placeholders.APEX$ROW_IDENTIFICATION,delete s.placeholders.APEX$GROUP_IDENTIFICATION,delete s.placeholders.APEX$SELECTOR,o=f(n,s),e.markup(o))},_renderRecord:function(t,i,s,l,n){const a=this.options,c=this.atOptions,h=c.extraSubstitutions;let d,u,p=a.recordTemplate,m="",g="";if(B(h),n.agg){if(!a.aggregateTemplate)return;p=a.aggregateTemplate,h.APEX$AGG=n.agg,h.APEX$AGG_TOTAL=n.grandTotal?"Y":"",h.APEX$ROW_STATE_CLASSES="is-aggregate"}else n.url&&(h.APEX$ROW_URL=n.url),n.hidden&&(g+=" u-hidden"),this.model.isDisabled(i,n)&&(g+=" "+R),n.sel&&(g+=" "+r),n.deleted?g+=" is-deleted":(n.inserted?g+=" is-inserted":n.updated&&(g+=" is-updated"),n.error?g+=" is-error":n.warning&&(g+=" is-warning"),n.highlight&&(d=a.highlights[n.highlight],d&&d.cssClass?g+=" "+d.cssClass:g+=" "+n.highlight),n.message&&(h.APEX$VALIDATION_MESSAGE=n.message)),g&&(h.APEX$ROW_STATE_CLASSES=g);h.APEX$ROW_ID=""+l,h.APEX$ROW_INDEX=""+(s+1),delete c.placeholders.APEX$GROUP_IDENTIFICATION,c.placeholders.APEX$ROW_IDENTIFICATION=`data-id='${e.escapeHTMLAttr(h.APEX$ROW_ID)}' data-rownum="${h.APEX$ROW_INDEX}"`,m=a.accLabelColumn?o.formatMessage("APEX.TMV.SELECTOR_LABEL_1",this.model.getValue(i,a.accLabelColumn)):o.getMessage("APEX.TMV.SELECTOR_LABEL"),c.placeholders.APEX$SELECTOR=this.selectorPlaceholder.replaceAll("%0",m),c.model=this.model,c.record=i,u=f(p,c),a.highlighter&&!n.agg&&(u=a.highlighter(a.highlighterContext,u)),t.markup(u),this.atOptions.clearItemCache=!1},_removeRecord:function(e){e.remove(),this._sel.contentChanged()},_insertRecord:function(t,i,o,s,n){const r=e.htmlBuilder();this._renderRecord(r,i,null,o,s),this.atOptions.clearItemCache=!0;let a=l(r.toString());return"after"===n&&t?t.after(a):this.data$.prepend(a),a.find(P).add(a.filter(P)).attr(p,"true"),this.options.useIconList?this.getIconList().refresh():this._sel.contentChanged(a),a},_afterInsert:function(){},_identityChanged:function(e,t){const i=this._elementsFromRecordIds([e])[0];if(i){let o=this.model.getRecord(t),s=this.model.getRecordMetadata(t);this._replaceRecord(i,o,e,t,s)}},_replaceRecord:function(t,i,o,s,n){const a=this.options,h=e.htmlBuilder();let u,p=t.hasClass(r),m=t.attr(d)||null;null!==m&&(m=_(m)-1),p&&!a.persistSelection&&((n=l.extend({},n)).sel=!0),this._renderRecord(h,i,m,s,n),this.atOptions.clearItemCache=!0,u=l(h.toString()),a.itemSelector&&!u.is(a.itemSelector)&&(t=t.parent()),t.replaceWith(u),a.useIconList?(this.getIconList().refresh(),this.getIconList().setSelection(l(`[${c}="${e.escapeCSS(s)}"]`)),this.focus()):this._sel.contentChanged(u)},_removeFocus:function(){},_checkAllHidden:e.debounce((function(){const e=this.options.pagination;let t;this._hasNestedControlBreaks()?t=this.data$.find(this._controlBreakSelector()+" "+this._itemSelector()):(t=this.data$.children(),this._controlBreakSelector()&&(t=t.not(this._controlBreakSelector()))),t.is(":visible")?!e.scroll||e.loadMore||e.virtual||this.data$.height()<this.scrollParent$.height()&&this._addNextPage():(this.noData$.show(),this.data$.hide(),this.noData=!0)}),10),_updateRecordState:function(e,t,i,o,s){if("hidden"===s)return this.noData&&!o.hidden&&(this.noData$.hide(),this.data$.show(),this.noData=!1),e.toggleClass("u-hidden",o.hidden),void(this.noData||this._checkAllHidden());this._replaceRecord(e,i,t,t,o)}})}(apex.util,apex.model,apex.debug,apex.lang,apex.item,apex.jQuery);