/*!
 Copyright (c) 2013, 2024, Oracle and/or its affiliates.
 */
!function(t,e,s,i,n){"use strict";var o="a-IconList",a="a-IconList-item",r="."+a,l="u-selector",c=l+" "+l+"--single",h="."+l,d="is-selected",u="."+d+r,f="is-focused",m="is-disabled",g="a-IconList-itemWrap",p="js-mouse-detector",v="aria-selected",C="aria-multiselectable",b="aria-labelledby",w="aria-description",_="aria-orientation",I="role",y="tabindex",F="u-RTL",T=n.ui.keyCode,x=0;function S(t){return t.parent().children().index(t)}function A(t){var e=t.find("a");return e.length?e[0]:t[0]}function N(t){return n(t).closest(r)}var L={begin:function(){this.text="<ul>\r\n"},item:function(t,e,s){this.text+="<li>"+i.escapeHTML(s)+"</li>\r\n"},end:function(){this.text+="</ul>\r\n"},toString:function(){return this.text}};n.widget("apex.iconList",n.extend(!0,{widgetEventPrefix:"iconlist",options:{multiple:!1,itemSelector:!1,addItemSelector:!0,label:!0,navigation:!1,tabbableContent:null,noNavKeyContent:null,allowCopy:!0,dataTransferFormats:[{format:"text/plain",writer:Object.create({begin:function(){this.text=""},item:function(t,e,s){e>0&&(this.text+="\r\n"),this.text+=s},end:function(){},toString:function(){return this.text}})},{format:"text/html",writer:Object.create(L)}],selectionChange:null,activate:null},_create:function(){const t=this,s=this.options,r=this.element;if(this.columns=0,this.rows=0,this.searchString="",this.searchTimerId=null,s.navigation&&(s.multiple=!1),r.addClass(o).attr(I,"listbox"),s.navigation&&r.children().wrapInner("<div>").children().addClass(g).attr("style","width:100%;height:100%"),s.multiple&&r.attr(C,"true"),this.forwardKey=T.RIGHT,this.backwardKey=T.LEFT,"rtl"===r.css("direction")&&(r.addClass(F),this.forwardKey=T.LEFT,this.backwardKey=T.RIGHT),r.attr(b)){let t=n("#"+r.attr(b).split(" ").join(",#")).last();t.attr("aria-hidden","true"),this.infoId=t.attr("id")+"_info",r.before("<span id='"+this.infoId+"' class='u-DisplayNone'></span>"),r.attr("aria-describedby",this.infoId)}else x+=1,this.infoId=(r.attr("id")||"il"+x)+"_info",r.before("<span id='"+this.infoId+"' class='u-DisplayNone'></span>"),r.attr(b,this.infoId),this.addedLabel=!0;this._initContextMenu(a,(function(){return!1}),(function(e){var s=N("keydown"===e.type&&t.lastFocused?t.lastFocused:e.target);return!!s.length&&(!!s.hasClass(d)||s)})),this._on(this._eventHandlers),s.allowCopy&&e.addHandler(r[0],(function(e){return t._copy(e),!0})),this._selNotifyDelay=i.debounce(this._selChangeNotify,1),this._selNotifyLongDelay=i.debounce(this._selChangeNotify,350),this.refresh(),s.disabled&&this._setOption("disabled",s.disabled)},_eventHandlers:{resize:function(t){t.target===this.element[0]&&(this._dim(),t.stopPropagation())},click:function(t){const e=this.options,s=e.navigation,i=n(t.target);let o,a=!1,l=!1,c=!1;if(this.lastEnterDownTime&&this.lastEnterDownTime===t.timeStamp&&(l=!0),this.focusinMousedownTime){const e=t.timeStamp-this.focusinMousedownTime;e>=0&&e<=100&&(a=!0)}if(a&&!l&&s&&"A"===t.target.tagName&&"0"===i.attr(y)){if(!i.hasClass(p))return t.preventDefault(),!1}if(a&&!l&&s&&"LI"===t.target.tagName&&"0"===i.attr(y)&&(c=!0,0===i.children("div."+g).length&&(c=!1),c&&i.closest("[role='application']").length>0&&(c=!1)),c)return t.stopPropagation(),!1;s&&i.closest("a").length>0&&(t.shiftKey||t.ctrlKey)||(o=i.closest(r),o.length&&(e.itemSelector&&i.closest(h).length&&(t.ctrlKey=!0,t.shiftKey=!1),this._select(o,t,!0,!1),s&&this._activate(t),!s&&e.tabbableContent&&i.closest(e.tabbableContent).length?e.tabbableContent&&i.closest(e.tabbableContent).length&&i.trigger("focus"):t.preventDefault()))},dblclick:function(t){this.options.navigation||N(t.target).length&&this._activate(t)},mouseenter:function(t){const e=this.options.navigation,s=n(t.target);e&&"A"===t.target.tagName&&"0"===s.attr(y)&&s.addClass(p)},mouseleave:function(t){const e=this.options.navigation,s=n(t.target);e&&"A"===t.target.tagName&&s.removeClass(p)},mousedown:function(t){this.hasFocusinTriggered&&(this.focusinMousedownTime=t.timeStamp,this.hasFocusinTriggered=!1),t.preventDefault()},keydown:function(t){const e=this,i=this.element,o=this.options,a=n(t.target),r=t.which,l=i.children();let c,h,d=null;function u(t,i){const n=o.prevPosDesc?o.prevPosDesc.column:-1,a=o.prevPosDesc?o.prevPosDesc.row:-1,r=e._index2RowCol(l.index(t));let c;o.descTimerId&&(clearTimeout(o.descTimerId),o.descTimerId=null),o?.prevPosDesc?.el$&&o.prevPosDesc.el$.find("a[role='option']").addBack().removeAttr(w),1===t.length&&(1===e.columns&&e.rows>1||(c=i?"ALL"===i?s.formatMessage("APEX.ICON_LIST.COLUMN_AND_ROW",r.column+1,r.row+1):s.formatMessage("APEX.ICON_LIST."+i,r.column+1,r.row+1):n!==r.column&&a===r.row?e.rows>1?s.formatMessage("APEX.ICON_LIST.COLUMN",r.column+1):null:n===r.column&&a!==r.row?s.formatMessage("APEX.ICON_LIST.ROW",r.row+1):s.formatMessage("APEX.ICON_LIST.COLUMN_AND_ROW",r.column+1,r.row+1),c&&(o.descTimerId=setTimeout((function(){o.descTimerId=null,t.find("a[role='option']").addBack().filter("[role='option']").attr(w,c)}),500)),o.prevPosDesc={el$:t,column:r.column,row:r.row}))}!o.navigation&&o.noNavKeyContent&&a.closest(o.noNavKeyContent).length||(r===T.HOME?d=l.first():r===T.END?d=l.last():r===T.DOWN?this.lastFocused&&(c=this._index2RowCol(S(N(this.lastFocused))),c.row<Math.floor((l.length-1)/this.columns)?(h=this._rowCol2Index(c.row+1,c.column),h>=l.length&&(h=l.length-1),d=l.eq(h)):u(N(this.lastFocused),"LAST_ROW")):r===T.UP?this.lastFocused&&(c=this._index2RowCol(S(N(this.lastFocused))),h=this._rowCol2Index(c.row-1,c.column),h>=0&&(d=l.eq(h)),d?t.stopPropagation():u(N(this.lastFocused),"FIRST_ROW")):r===this.backwardKey?this.lastFocused&&(d=N(this.lastFocused).prev(),0===d.length&&u(N(this.lastFocused),"FIRST_COLUMN")):r===this.forwardKey?this.lastFocused&&(d=N(this.lastFocused).next(),0===d.length&&u(N(this.lastFocused),"LAST_COLUMN")):r===T.SPACE?this.lastFocused&&!this.searchTimerId&&(d=N(this.lastFocused)):r===T.ENTER&&(e.lastEnterDownTime=t.timeStamp,"A"!==t.target.nodeName&&this._activate(t)),d&&d[0]&&(u(d,r===T.HOME||r===T.END?"ALL":null),this._select(d,t,!0,!0),t.preventDefault()))},keypress:function(t){var e,s,i=this.options,o=this;if(0!==t.which&&i.label&&!t.altKey&&!t.ctrlKey&&(i.navigation||!i.noNavKeyContent||!n(t.target).closest(i.noNavKeyContent).length)){if(e=String.fromCharCode(t.which).toLowerCase(),this.searchTimerId)e!==this.searchString&&(this.searchString+=e),clearTimeout(this.searchTimerId),this.searchTimerId=null;else{if(" "===e)return;this.searchString=e}this.searchTimerId=setTimeout((function(){o.searchTimerId=null}),500),(s=this._findItem(this.searchString))&&this._select(s,t,!0,!0)}},focusin:function(t){const e=N(t.target);0!==e.length&&(this.hasFocusinTriggered=!0,e.addClass(f),this._setFocusable(t.target))},focusout:function(t){N(t.target).removeClass(f),this.hasFocusinTriggered=!1}},_destroy:function(){const t=this.element,s=this.options;t.removeClass(o+" "+m+" "+F).removeAttr(I).removeAttr(C).children().removeClass(a).removeAttr(I).removeAttr(v).removeAttr(y),t.find("a").removeAttr(y).removeAttr(I),s.itemSelector&&s.addItemSelector&&t.find(h).remove(),e.removeHandler(t[0]),this._destroyContextMenu(),n("#"+this.infoId).remove(),this.addedLabel&&t.removeAttr(b)},_setOption:function(t,e){var s,i,n=this.options,o=this.element;if(this._checkContextMenuOptions(t,e),"multiple"===t)n.navigation&&(e=!1);else if("allowCopy"===t||"addItemSelector"===t||"navigation"===t)throw new Error("IconList "+t+" option cannot be set");this._super(t,e),"disabled"===t?(o.toggleClass(m+" ui-state-disabled",e).attr("aria-disabled",e),this.lastFocused&&(e?this.lastFocused&&((s=!n.navigation&&n.tabbableContent)?(i=N(this.lastFocused)).add(i.find(s).not(":disabled")).prop("tabIndex",-1):this.lastFocused.tabIndex=-1):this._setFocusable(this.lastFocused)),e&&this._dim()):"multiple"===t?e?o.attr(C,"true"):o.removeAttr(C):"itemSelector"===t&&this.refresh()},refresh:function(){var t,e,s,i=this.options,o=this.element;i.multiple&&!i.itemSelector&&apex.userHasTouched()&&(i.itemSelector=!0,i.addItemSelector=!0),o.find("a").attr(y,-1).attr(I,"option").closest("li").attr(I,"none"),o.find(i.tabbableContent).attr(y,-1),(s=o.children().not(".js-ScrollFiller")).addClass(a).filter((function(){return 0===n(this).find("a").length})).attr(I,"option").attr(y,-1),i.addItemSelector&&(i.itemSelector?(e=n("<span class='"+(i.multiple?l:c)+"'></span>"),s.filter((function(){return n(this).find(h).length<=0})).prepend(e)):o.find(h).remove()),this._dim(),(t=o.find(u)).length>0?this.setSelection(t,!1):(this.lastFocused&&n(this.lastFocused).is(":visible")||(this.lastFocused=A(o.children().first())),this.selectAnchor=this.lastFocused,this.lastFocused&&!i.disabled&&this._setFocusable(this.lastFocused))},resize:function(){this._dim()},focus:function(){this.lastFocused&&this.lastFocused.focus()},getColumns:function(){return this.columns},getRows:function(){return this.rows},getSelection:function(){return this.element.find(u)},getSelectionValues:function(){var t=[];return this.getSelection().each((function(){t.push(n(this).attr("data-value"))})),t},setSelection:function(t,e,s){e=!!e,this._select(t,null,e,!1,s)},_copy:function(t){var e,s,i=this.getSelection(),n=this.options.dataTransferFormats;if(i.length){for(n.forEach((function(t){t.writer.begin(i)})),e=0;e<i.length;e++)s=i.eq(e),n.forEach((function(t){t.writer.item(s,e,s.text())}));n.forEach((function(e){e.writer.end(),t.setData(e.format,e.writer.toString())}))}},_rowCol2Index:function(t,e){return t*this.columns+e},_index2RowCol:function(t){var e=Math.floor(t/this.columns);return{row:Math.floor(t/this.columns),column:t-e*this.columns}},_dim:function(){const t=this,e=this.element,i=e.width(),o=e.children(),a=o.length;let r,l,c;a&&(r=o.first().position().top,c=o.first().outerWidth()),this.columns=a,o.each((function(e){var s=n(this).position().top;if(s>r)return r=s,t.columns=e,!1})),this.rows=a>0?Math.floor((a+this.columns-1)/this.columns):0,1===this.rows&&(this.columns=Math.floor(i/c)),l=1===this.columns?s.formatMessage("APEX.ICON_LIST.LIST_DIM",this.rows):s.formatMessage("APEX.ICON_LIST.GRID_DIM",this.columns,this.rows),n("#"+this.infoId).text(l),1===this.columns&&this.rows>1?e.attr(_,"vertical"):this.columns>1&&1===this.rows?e.attr(_,"horizontal"):e.attr(_,"undefined")},_findItem:function(t){var e,s,i=this.element,n=t.length,o=this.options.label;for(e=s=N(this.lastFocused),1===n&&(e=e.next()),0===e.length&&(e=i.children().first());e.length>0;){if((!0===o?e.text().trim():e.find(o).text()).substring(0,n).toLowerCase()===t)return e;if(0===(e=e.next()).length&&(e=i.children().first()),e[0]===s[0])break}return null},_setFocusable:function(t){const e=this.options,s=!e.navigation&&e.tabbableContent;if(this.lastFocused&&this.lastFocused!==t)if(s){const t=N(this.lastFocused);t.add(t.find(s).not(":disabled")).attr(y,"-1").removeAttr(v)}else n(this.lastFocused).attr(y,-1).removeAttr(v);if(s){const e=N(t);e.find(s).not("disabled").prop("tabIndex",0).length||e.attr(y,"0").attr(v,"true")}else n(t).attr(y,0).attr(v,"true");this.lastFocused=t},_activate:function(t){var e,s;this._trigger("activate",t,{values:this.getSelectionValues()}),this.options.navigation&&!t.isDefaultPrevented()&&(s=(e=this.getSelection()).attr("href")||e.find("a").attr("href"))&&(t.preventDefault(),apex.navigation.redirect(s))},_select:function(t,e,s,o,a){var r,l,c,f,m,g,p,C,b,w="set",_=this.element,I=this.options,y=_.find(u);t=t.filter(":visible"),e&&I.multiple&&("click"===e.type?e.ctrlKey||e.metaKey?w="toggle":e.shiftKey&&(w="range"):"keydown"===e.type&&(e.keyCode===n.ui.keyCode.SPACE?w=e.ctrlKey?"toggle":e.shiftKey?"range":"add":e.ctrlKey?w="none":e.shiftKey&&(w="range"))),"range"!==w||this.selectAnchor||(w="set"),"set"!==w&&"range"!==w||y.removeClass(d).removeAttr(v).find(h).removeClass(d),r=t.hasClass(d),"set"===w||"add"===w||"toggle"===w&&!r?(t.addClass(d).attr(v,!0).find(h).addClass(d),this.selectAnchor=t[0]):"range"===w?(_.children().removeClass(d).removeAttr(v).find(h).removeClass(d),g=S(n(this.selectAnchor)),p=S(t.last()),g>p&&(C=p,p=g,g=C),_.children().filter((function(t){return t>=g&&t<=p})).addClass(d).attr(v,!0).find(h).addClass(d)):"toggle"===w&&r&&(t.removeClass(d).removeAttr(v).find(h).removeClass(d),this.selectAnchor=t[0]),t.length>0&&(b=A(t.first()),s?(b.tabIndex=0,b.focus()):this._setFocusable(b),(f=(c=_.scrollParent())[0]===document?{left:0,top:0}:c.offset())&&(m=_.offset(),((l=t.first().offset()).top<f.top||l.top>f.top+c[0].offsetHeight)&&(c[0].scrollTop=l.top-m.top),(l.left+t[0].offsetWidth<f.left||l.left>f.left+c[0].offsetWidth)&&(c[0].scrollLeft=l.left-m.left))),a||I.navigation&&e&&"click"===e.type||("toggle"===w||"range"===w&&!r||"add"===w&&!r||"set"===w&&!i.arrayEqual(y,t))&&(o?this._selNotifyLongDelay(e):this._selNotifyDelay(e))},_selChangeNotify:function(t){this.element.hasClass(o)&&this._trigger("selectionChange",t)}},apex.widget.contextMenuMixin))}(apex.debug,apex.clipboard,apex.lang,apex.util,apex.jQuery);