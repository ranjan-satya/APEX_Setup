/*!
 * Copyright (c) 2015, 2023, Oracle and/or its affiliates.
 */
!function(e,t,a,s,i){"use strict";const n="a-Combobox",l="."+n,o=n+"-wrapper",r="."+o,u="a-Button",p=u+"--withIcon",h=u+"--noLabel",m="combobox",c="-values",d="-menu",b="-showAll";e.widget("apex."+m,{widgetEventPrefix:m,options:{source:[],multipleValues:!1,multipleValueDelimiter:",",label:""},_create:function(){var u=t.htmlBuilder(),p=this,h=this.options,d=e(l).length;this.baseId=this.element[0].id||m+(d+1),this.actions=a.createContext(m,this.element[0]),h.label||i.warn("Label not provided, which is an accessibility issue (unless the 'label' option is later set)."),u.markup("<span").attr("class",o).markup("></span>"),this.element.wrap(u.toString()).addClass(n),this.wrapper$=this.element.closest(r),this._createShowAllButton(),this._on(this.element,{keydown:function(t){(t.altKey||t.metaKey)&&t.which===e.ui.keyCode.DOWN&&(p.menu$.menu("open",p.element,!1),p.menu$.find(":focusable").first().trigger("focus"))}}),this.actions.add({name:this.baseId+c,label:s.getMessage("APEX.COMBOBOX.LIST_OF_VALUES"),set:function(e){var t=p.element.val();h.multipleValues?p.element.val((t?t+h.multipleValueDelimiter:t)+e):p.element.val(e),t!==p.element.val()&&p.element.trigger("change")},get:function(){return p.element.val()},choices:h.source})},_setOption:function(t,a){switch(this._super(t,a),t){case"multipleValues":break;case"source":this.actions.lookup(this.baseId+c).choices=a,this.actions.updateChoices(this.baseId+c);break;case"label":e("#"+this.baseId+b,this.wrapper$).attr("title",s.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",a)).attr("aria-label",s.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",a))}},_createShowAllButton:function(){var a=t.htmlBuilder();a.markup("<button type='button'").attr("id",this.baseId+b).attr("tabindex","-1").attr("title",s.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",this.options.label)).attr("aria-label",s.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",this.options.label)).attr("class",u+" "+p+" "+h).attr("data-menu",this.baseId+d).attr("aria-haspopup",!0).attr("aria-expanded",!1).markup(">"),a.markup("<span").attr("aria-hidden",!0).attr("class","a-Icon icon-menu-drop-down").markup(">").markup("</span>"),a.markup("</button>"),this.wrapper$.append(a.toString()),this.menu$=e("<div/>",{id:this.baseId+d,class:"",style:"display:none;"}).appendTo("body"),this.menu$.menu({actionsContext:this.actions,items:[{type:"radioGroup",action:this.baseId+c}]})},_destroy:function(){this.element.insertBefore(this.wrapper$),this.wrapper$.remove(),this.menu$.remove(),this.element.removeClass(n),a.removeContext(m,this.element[0])}})}(apex.jQuery,apex.util,apex.actions,apex.lang,apex.debug);