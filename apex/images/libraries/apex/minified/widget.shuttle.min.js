/*!
 Copyright (c) 2012, 2024, Oracle and/or its affiliates.
*/
!function(e,t){"use strict";e.shuttle=function(n,o){let i=t.extend({optionAttributes:null},o);const a=t(n,apex.gPageContext$),p=t(n+"_LEFT",apex.gPageContext$),r=t(n+"_RIGHT",apex.gPageContext$);let c,l=t("option",p),g=t("option",r);function s(){l=p.empty().children(),g=r.empty().children()}function d(e){var n="";e.values.forEach((function(e){n=n+'<option value="'+e.r+'" '+i.optionAttributes+">"+e.d+"</option>"})),p.html(n),$s(a[0],e.default),l=t("option",p),g=t("option",r)}function u(e){var t=$v(a[0]);p.empty().append(l).children().prop("selected",!1),r.empty().append(g).children().prop("selected",!1),$v(a[0])!==t&&a.trigger("change"),e.preventDefault()}function h(e,n){var o=t("option"+(n?"":":selected"),p);t("option:selected",r).prop("selected",!1),o.length&&(o.appendTo(r).prop("selected",!0),a.trigger("change")),e.preventDefault()}function f(e){h(e,!0)}function x(e,n,o){var i=t("option"+(n?"":":selected"),r);t("option:selected",p).prop("selected",!1),i.length&&(i.appendTo(p).prop("selected",!0),o||a.trigger("change")),e&&e.preventDefault()}function v(e,t){x(e,!0,t)}function $(e){const n=$v(a[0]);t("option:selected",r).prependTo(r).prop("selected",!0),$v(a[0])!==n&&(a.trigger("shuttlechangeorder"),a.trigger("change")),e.preventDefault()}function C(e){let n=!1;t("option:selected",r).each((function(){const e=t(this).prev();0===e.length||e.prop("selected")||(t(this).insertBefore(e).prop("selected",!0),n=!0)})),n&&(a.trigger("shuttlechangeorder"),a.trigger("change")),e.preventDefault()}function b(e){let n,o=!1,i=t("option:selected",r);for(let e=i.length-1;e>=0;e--)n=i.eq(e).next(),0===n.length||n.prop("selected")||(i.eq(e).insertAfter(n).prop("selected",!0),o=!0);o&&(a.trigger("shuttlechangeorder"),a.trigger("change")),e.preventDefault()}function P(e){const n=$v(a[0]);t("option:selected",r).appendTo(r).prop("selected",!0),$v(a[0])!==n&&(a.trigger("shuttlechangeorder"),a.trigger("change")),e.preventDefault()}function T(e){e.stopImmediatePropagation()}t(n,apex.gPageContext$).each((function(){const e=this;apex.item.create(this.id,{enable:function(){let n=$x(e.id);t("button",n).prop("disabled",!1).removeClass("is-disabled"),t("select",n).prop("disabled",!1).removeClass("apex_disabled")},disable:function(){const n=$x(e.id);t("option:selected",n).prop("selected",!1),t("button",n).prop("disabled",!0).addClass("is-disabled"),t("select",n).prop("disabled",!0).addClass("apex_disabled")},isDisabled:function(){return!!r.prop("disabled")},setValue:function(e){let n;v(null,!0),n=apex.util.toArray(e,this.getMultiValueStorage());for(var o=0;o<n.length;o++)t("option",p[0]).each((function(){if(this.value===n[o])return t(this).appendTo(r).prop("selected",!0),!1}))},getValue:function(){let e=[];return t("option",r[0]).each((function(){e.push(this.value)})),e},isChanged:function(){return $v(a[0])!==c},setFocusTo:p,loadingIndicator:function(e){return e.prependTo(t("td.shuttleControl",a))},getValidity:function(){return t(r).prop("required")&&0===r.has("option").length?{valid:!1,valueMissing:!0}:{valid:!0}},storageType:i.storageType,separator:i.separator})})),c=$v(a[0]),i.dependingOnSelector&&t(i.dependingOnSelector,apex.gPageContext$).on("change",(function(){a.trigger("apexrefresh")})),a.on("apexrefresh",(function(n){e.util.cascadingLov(a,i.ajaxIdentifier,{pageItems:t(i.pageItemsToSubmit,apex.gPageContext$)},{optimizeRefresh:i.optimizeRefresh,dependingOn:t(i.dependingOnSelector,apex.gPageContext$),loadingIndicator:a,success:d,clear:s,target:n.target})})),p.on("change",T),r.on("change",T),t(p).dblclick(h).keydown((function(e){13===e.which&&(h(e,!1),e.preventDefault())})),t(r).dblclick(x).keydown((function(e){13===e.which&&(x(e),e.preventDefault())})),t(n+"_RESET",apex.gPageContext$).on("click",u),t(n+"_MOVE",apex.gPageContext$).on("click",h),t(n+"_MOVE_ALL",apex.gPageContext$).on("click",f),t(n+"_REMOVE",apex.gPageContext$).on("click",x),t(n+"_REMOVE_ALL",apex.gPageContext$).on("click",v),t(n+"_TOP",apex.gPageContext$).on("click",$),t(n+"_UP",apex.gPageContext$).on("click",C),t(n+"_DOWN",apex.gPageContext$).on("click",b),t(n+"_BOTTOM",apex.gPageContext$).on("click",P)}}(apex.widget,apex.jQuery);