/*!
 Copyright (c) 2017, 2023, Oracle and/or its affiliates.
*/
/*!
 * jQuery Mobile listview.js
 * Copyright 2010, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery Mobile nestedlists plugin
 * The MIT License (MIT)
 * Copyright (c) 2013 Alexander Schmitz
 */
!function(t,e){"use strict";const i="click";var s="ul,ol",a="<a class='ui-btn js-sublist-nav' href='#'>",n="</a>",r=/(^|\s)a-ListView-divider($|\s)/,l=/(^|\s)u-hidden($|\s)/,d=t.getAttribute;function h(t){var e=t;return 0===e.indexOf("fa-")&&(e="fa "+e),"<span class='"+e+"' aria-hidden='true'></span>"}function o(t){var i,s,a,n,r;(n=e(t.target).closest("a.js-sublist-nav")).length&&(i=(r=n.closest("li")).attr("data-list-id"))&&((a=r.parent()).attr("data-parent-id")&&(a=a.parent()),s=e("#"+i),a.hide(),s.show().find(":focusable").eq(0).trigger("focus"),t.preventDefault())}function c(t){var i=e(t.target).closest("button").closest(".a-ListView-nestedList"),a=i.find(s).attr("data-parent-id");i.hide(),e("#"+a).show().find(":focusable").eq(0).trigger("focus")}e.widget("apex.listview",{widgetEventPrefix:"listview",options:{icon:"fa-angle-right",splitIcon:"fa-angle-right",inset:!1,corners:!0,shadow:!0,backButtonText:"Back",autodividers:!1,autodividersSelector:function(t){var e=t.text().trim()||null;return e?e=e.slice(0,1).toUpperCase():null},hideDividers:!0,childPages:!1},_create:function(){var t=this.options,e="a-ListView";e+=t.inset?" ui-listview-inset":"",t.inset&&(e+=t.corners?" ui-corner-all":"",e+=t.shadow?" ui-shadow":""),this.element.addClass(e),this.refresh(!0),t.childPages&&this._on({click:o})},_getCreateOptions:t._getCreateOptions,_destroy:function(){this.element.removeClass("a-ListView ui-listview-inset ui-corner-all ui-shadow"),this.nestedLists&&this.nestedLists.length&&this.nestedLists.remove()},_findFirstElementByTagName:function(t,e,i,s){var a={};for(a[i]=a[s]=!0;t;){if(a[t.nodeName])return t;t=t[e]}return null},_addThumbClasses:function(t){var i,s,a=t.length;for(i=0;i<a;i++)(s=e(this._findFirstElementByTagName(t[i].firstChild,"nextSibling","img","IMG"))).length&&e(this._findFirstElementByTagName(s[0].parentNode,"parentNode","li","LI")).addClass(s.hasClass("ui-li-icon")?"has-icon":"has-thumb")},_getChildrenByTagName:function(t,i,s){var a=[],n={};for(n[i]=n[s]=!0,t=t.firstChild;t;)n[t.nodeName]&&a.push(t),t=t.nextSibling;return e(a)},_replaceDividers:function(){var t,i,s,a,n,r=null,l=this.element;for(l.children("li[data-role='list-divider']").remove(),i=l.children("li"),t=0;t<i.length;t++)s=i[t],(a=this.options.autodividersSelector(e(s)))&&r!==a&&((n=document.createElement("li")).appendChild(document.createTextNode(a)),n.setAttribute("data-role","list-divider"),s.parentNode.insertBefore(n,s)),r=a},_hideDividers:function(){var t,e,i,s=!0;for(e=(t=this._getChildrenByTagName(this.element[0],"li","LI")).length-1;e>-1;e--)(i=t[e]).className.match(r)?(s&&(i.className=i.className+" u-hidden"),s=!0):i.className.match(l)||(s=!1)},refresh:function(t){var i,a=this,n=this.options,r=this.element,l=!!e.nodeName(r[0],"ol"),o=r.attr("start"),c={},u=r.find(".ui-li-count");r.show(),l&&(o||0===o)&&(i=parseInt(o,10)-1,r.css("counter-reset","listnumbering "+i)),n.autodividers&&this._replaceDividers(),function i(r){var o,u,f,p,m,v,g,b,w,C,L,N,_,x,y,T,B,V;for(o=0,u=(B=a._getChildrenByTagName(r,"li","LI")).length;o<u;o++)f=B.eq(o),p="",(t||f[0].className.search(/\ba-ListView-item\b|\ba-ListView-divider\b/)<0)&&(b=a._getChildrenByTagName(f[0],"a","A"),w="list-divider"===d(f[0],"role"),L=f.attr("value"),m=d(f[0],"theme"),b.length&&b[0].className.search(/\bui-btn\b/)<0&&!w?(g=!1!==(v=d(f[0],"icon"))&&(v||n.icon),p="a-ListView-item has-link",b.length>1&&(p+=" has-alt",N=b.last(),x=(_=d(N[0],"theme")||d(f[0],"theme",!0))?" ui-btn-"+_:"",y=d(N[0],"icon")||d(f[0],"icon")||n.splitIcon,T="ui-btn"+x,N.attr("title",(V=N,e("<a>").text(V.text()).html()).trim()).addClass(T).empty(),y&&N.append(h(y)),b=b.first()),b.addClass("ui-btn"),g&&b.append(h(g))):w?(p="a-ListView-divider ui-bar-"+(d(f[0],"theme")||"inherit"),f.attr("role","heading")):b.length<=0&&(p="a-ListView-item ui-body-"+(m||"inherit")),l&&L&&(C=parseInt(L,10)-1,f.css("counter-reset","listnumbering "+C)),f.children(s).each((function(){i(this)}))),c[p]||(c[p]=[]),c[p].push(f[0]);a._addThumbClasses(B),a._addThumbClasses(B.find(".ui-btn"))}(r[0]);for(const[t]of Object.entries(c))e(c[t]).addClass(t);u.each((function(){e(this).closest("li").addClass("has-count")})),n.hideDividers&&this._hideDividers(),n.childPages&&this._setupChildren()},_setupChildren:function(){var t,r=1,l=[],d=this,u=this.element,f=u.attr("class"),p=u.find(s);this.nestedLists&&this.nestedLists.length&&this.nestedLists.remove(),(t=u.attr("id"))||(t=this.widgetName+this.uuid,u.attr("id",t)),p.each((function(){var i=t+"_"+r,s=e(this);s.attr("id",i).attr("data-parent-id",s.parent().parent().attr("id")).attr("class",f).parent().attr("data-list-id",i),r+=1})),p.each((function(){var t,s,r=d.options,f=e(this),p=f.parent(),m=p[0],v=f.attr("id"),g="a-ListView-header",b=r.backButtonText;t=e(m.childNodes[0]).text().replace(/^\s+|\s+$/g,"").length>0?e(m.childNodes[0]).text():e(m.childNodes[1]).text(),r.inset&&(g+=" ui-listview-inset"),f.removeAttr("id").on(i,o),(s=e("<div id='"+v+"' class='a-ListView-nestedList' style='display:none;'><div class='"+g+"'><button type='button' class='a-Button js-back' title='"+b+"' aria-label='"+b+"'>"+h("fa-angle-left")+"</button><h3>"+apex.util.escapeHTML(t)+"</h3></div></div>").insertAfter(u)).append(f).find(".js-back").on(i,c),p.hasClass("has-link")?p.hasClass("has-alt")?p.children("a").last().addClass("js-sublist-nav"):p.append(a+h(r.splitIcon)+n).addClass("has-alt"):(p.html(a+p.html()+n),p.addClass("has-link").children().append(h(r.icon))),l.push(s[0])})),this.nestedLists=e(l)}}),e((function(){e("[data-role='listview']").listview()}))}(apex.widget,apex.jQuery);