/*!
 * Copyright (c) 2016, 2022, Oracle and/or its affiliates. All rights reserved.
 */
!function(e,t,n){"use strict";const i="apexregion",o="js-apex-region";function r(e,t){return e.split(/\s+/).map((e=>{let n,i=e,o=i.indexOf(".");return o>=0&&(n=i.substring(o),i=i.substring(0,o)),void 0!==t.options[i]&&(i=t.widgetEventPrefix+i.toLowerCase()),n&&(i+=n),i})).join(" ")}const a={element:null,parentRegionId:null,type:"generic",widgetName:null,filterRegionId:null,refresh:function(){this.element.trigger("apexrefresh")},focus:function(){this.element.find(":tabbable").first().trigger("focus")},widget:function(){return null},call:function(...e){let t=this.widget();if(this.widgetName&&t)return t[this.widgetName](...e);throw new Error("Call not supported.")},on:function(e,...t){let n=this.widget();if(!this.widgetName||!n)throw new Error("On not supported.");e=r(e,n[this.widgetName]("instance")),n.on(e,...t)},off:function(e,...t){let n=this.widget();if(!this.widgetName||!n)throw new Error("Off not supported.");e=r(e,n[this.widgetName]("instance")),n.off(e,...t)},gotoError:function(){},getSessionState:function(){return null},getParentItems:function(){let e,t,n,i,o,r;if(this.parentRegionId&&(e=apex.region(this.parentRegionId),e)){if("InteractiveGrid"===this.type)i=this.widget().interactiveGrid("getCurrentView").modelColumns,o=this.widget().interactiveGrid("option").config.modelInstanceId;if("InteractiveGrid"===e.type)t=e.widget().interactiveGrid("getCurrentView").model;if(t&&(r={values:[]},n=t.getRecord(o),n))for(let e in i)i[e].parentField&&r.values.push({n:i[e].parentField,v:t.getValue(n,i[e].parentField)})}return r}};function s(e){return n("#"+t.escapeCSS(e),apex.gPageContext$)}apex.region=function(e){let t=null,o=s(e);return o.length&&(t=o.data(i),t||(t=n.extend({},a),t.element=o)),t};const l=apex.region;l.create=function(e,t){const r=s(e);let l;if(!r.length)throw new Error("Region element not found "+e);l=Object.create(a),l.element=r,"function"==typeof t?t(l):n.extend(l,t),r.addClass(o),r.data(i,l),apex.regions[e]=l,l.filterRegionId&&n((()=>{const e=apex.region(l.filterRegionId);e.on("facetschange",(()=>{const t=l.refresh();let n;t&&("function"==typeof t.always?n="always":t instanceof Promise&&(n="finally"),n&&(e.lock(),t[n](e.unlock)))}))}))},l.destroy=function(e){const t=s(e);if(!t.length)throw new Error("Region element not found "+e);t.removeData(i),delete apex.regions[e]},l.isRegion=function(e){const t=s(e);return!!t.length&&!!t.data(i)},l.findClosest=function(e){let i,r,a=n(e).closest("[data-owning-region]").attr("data-owning-region");return r=a?n("#"+t.escapeCSS(a),apex.gPageContext$):n(e).parent(),i=r.closest("."+o).prop("id"),i?l(i):null}}(apex.debug,apex.util,apex.jQuery);