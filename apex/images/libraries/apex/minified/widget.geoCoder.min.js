/*!
 Copyright (c) 2021, 2022 Oracle and/or its affiliates. All rights reserved.
*/
!function(e,t,a,o,i,n,s){"use strict";var r="div.apex-item-wrapper--geocoded-address",d="AUTOMATIC",c="STATIC",u="ITEM",m="GRID",g="LIST",l={INPUT_NOT_NULL_MATCH_NOT_NULL:"0",INPUT_NULL_MATCH_NULL:"1",INPUT_NOT_NULL_MATCH_REPLACED_NOT_NULL:"2",INPUT_NOT_NULL_MATCH_REPLACED_NULL:"3",INPUT_NULL_MATCH_REPLACED_NOT_NULL:"4"},p="apexgeocoderselection",h="apexgeocoderresponse",E="change",_="fa-check",C="fa-remove",T=["AU","CA","CN","FR","GB","HK","IN","JP","NZ","US","ZA"],L={ADDRESS_REQUIRED:"APEX.ITEM.GEOCODE.ADDRESS_REQUIRED",COLUMN_CITY:"APEX.ITEM.GEOCODE.COLUMN_CITY",COLUMN_COUNTRY:"APEX.ITEM.GEOCODE.COLUMN_COUNTRY",COLUMN_HOUSENUMBER:"APEX.ITEM.GEOCODE.COLUMN_HOUSENUMBER",COLUMN_LATITUDE:"APEX.ITEM.GEOCODE.COLUMN_LATITUDE",COLUMN_LONGITUDE:"APEX.ITEM.GEOCODE.COLUMN_LONGITUDE",COLUMN_MAPLINK:"APEX.ITEM.GEOCODE.COLUMN_MAPLINK",COLUMN_MATCHSCORE:"APEX.ITEM.GEOCODE.COLUMN_MATCHSCORE",COLUMN_POSTALCODE:"APEX.ITEM.GEOCODE.COLUMN_POSTALCODE",COLUMN_STATE:"APEX.ITEM.GEOCODE.COLUMN_STATE",COLUMN_STREET:"APEX.ITEM.GEOCODE.COLUMN_STREET",DIALOG_TITLE:"APEX.ITEM.GEOCODE.DIALOG_TITLE",GEOCODING_DONE:"APEX.ITEM.GEOCODE.GEOCODING_DONE",GEOCODING_OPEN:"APEX.ITEM.GEOCODE.GEOCODING_OPEN",MAP_DIALOG_TITLE:"APEX.ITEM.GEOCODE.MAP_DIALOG_TITLE",NO_DATA_FOUND:"APEX.ITEM.GEOCODE.NO_DATA_FOUND",REQUIRED:"APEX.ITEM.GEOCODE.REQUIRED",REQUIRED_MULTIPLE:"APEX.ITEM.GEOCODE.REQUIRED_MULTIPLE"},I={item_type:"GEOCODER",enable:function(){this.element.prop("disabled",!1),this.element.closest(r).removeClass("apex_disabled")},disable:function(){this.element.prop("disabled",!0),this.element.closest(r).addClass("apex_disabled")},isDisabled:function(){return!0===this.element.prop("disabled")},show:function(){this.element.closest(r).show()},hide:function(){this.element.closest(r).hide()},setValue:function(e){this.element.val(e)},getValue:function(){return this.element[0].value},getNativeValue:function(){return JSON.parse(this.element[0].value||"{}")},displayValueFor:function(e){return e?i.getMessage(L.GEOCODING_DONE):i.getMessage(L.GEOCODING_OPEN)},getValidity:function(){var e=N(a.escapeCSS(this.id),!1);return e.trigger!==d&&e.isRequired&&!this.element[0].value?{valid:!1,valueMissing:!0}:this.node.validity||{valid:!0}}};function N(o,i){var n=t("#"+a.escapeCSS(o),apex.gPageContext$),s=void 0===i||i,r={itemId:a.escapeCSS(o)||"",isReadonly:"Y"===(n.data("readonly")||"N"),isRequired:"Y"===(n.data("required")||"N"),geoMatchMode:n.data("geo-match-mode")||"RELAX_HOUSE_NUMBER",displayMode:n.data("display-mode")||g,showCoordinates:"Y"===(n.data("show-coordinates")||"Y"),showMapPopup:(n.data("show-preview-map")||"").indexOf("POPUP")>-1,showMapItem:(n.data("show-preview-map")||"").indexOf("ITEM")>-1,showDisplayOnlyItem:-1===(n.data("show-preview-map")||"").indexOf("ITEM"),previewMapBackground:n.data("preview-map-background")||"default",useCustomBackground:n.data("custom-map-bg"),customBackgroundName:n.data("custom-map-bg-name"),customBackgroundType:n.data("custom-map-bg-type"),customBackgroundUrl:n.data("custom-map-bg-url"),customBackgroundAttribution:n.data("custom-map-bg-attribution"),customBackgroundApiKey:n.data("custom-map-bg-api-key"),customBackgroundHeaders:n.data("custom-map-bg-http-headers"),customBackgroundMinZoom:n.data("custom-map-bg-zoom-min"),customBackgroundMaxZoom:n.data("custom-map-bg-zoom-max"),structuredAddress:"Y"===(n.data("structured-address")||"Y"),sanitizeAddress:"Y"===(n.data("sanitize-address")||"Y"),countryType:n.data("country-type")||c,countryStatic:n.data("country")||"",countryItem:n.data("country-item")||"",poiItem:n.data("poi-item")||"",streetItem:n.data("street-item")||"",housenumberItem:n.data("housenumber-item")||"",subareaItem:n.data("subarea-item")||"",cityItem:n.data("city-item")||"",zipItem:n.data("zip-item")||"",regionItem:n.data("region-item")||"",addresslineItem:n.data("addressline-item")||"",matchvectorItem:n.data("matchvector-item")||"",trigger:n.data("trigger")||d,triggerSelector:n.data("trigger-selector")||"",country:"",poi:"",street:"",housenumber:"",subarea:"",city:"",zip:"",region:"",addressLines:[]};return s&&(r.countryType===c?r.country=r.countryStatic:r.countryType===u&&r.countryItem&&(r.country=e(r.countryItem).getValue().toUpperCase()),r.poiItem&&(r.poi=e(r.poiItem).getValue()),r.streetItem&&(r.street=e(r.streetItem).getValue()),r.housenumberItem&&(r.housenumber=e(r.housenumberItem).getValue()),r.subareaItem&&(r.subarea=e(r.subareaItem).getValue()),r.cityItem&&(r.city=e(r.cityItem).getValue()),r.zipItem&&(r.zip=e(r.zipItem).getValue()),r.addresslineItem&&e(r.addresslineItem).getValue().split(",").forEach((function(e){r.addressLines.push(e.trim())}))),r}function O(e,t,a){var o=t+" "+a;return T.includes(e)&&(o=a+" "+t),o.trim()}function M(e){var o=t.Deferred(),i=void 0===e.structuredAddress||e.structuredAddress,n=a.escapeHTML(e.geoMatchMode),s=a.escapeHTML(e.country),r=`<geocode_request vendor="elocation"><address_list><input_location id="1" get_timezone="true"><input_address match_mode="${n}"><gen_form country="${s}" name="${a.escapeHTML(e.poi)}" street="${O(s,a.escapeHTML(e.street),a.escapeHTML(e.housenumber))}" sub_area="${a.escapeHTML(e.subarea)}" city="${a.escapeHTML(e.city)}" postal_code="${a.escapeHTML(e.zip)}" region="${a.escapeHTML(e.region)}"/></input_address></input_location></address_list></geocode_request>`,d=`<geocode_request vendor="elocation"><address_list><input_location id="1" get_timezone="true"><input_address match_mode="${n}"><unformatted country="${s}">${(e.addressLines||[]).map((e=>`<address_line value="${e}"/>`)).join("")}</unformatted></input_address></input_location></address_list></geocode_request>`;return t.ajax({url:"https://elocation.oracle.com/appidGC000110/elocation/lbs",method:"POST",dataType:"jsonp",data:"xml_request="+encodeURIComponent(i?r:d)+"&format=json"}).done((function(e){o.resolve(e)})).fail((function(e,t,a){o.reject(a)})),o.promise()}function A(e){var t,a,o,i,n,s,r,d,c,u,m=e||[],g={};function p(e){var t=e||"";return"null"===t?"":t}if(Array.isArray(m)){g.matchCount=m.length,g.matches=[];for(var h=0;h<m.length;h++)t=m[h],g.matches.push({sequence:h,latitude:p(t.y),longitude:p(t.x),matchCode:p(t.matchCode),matchVector:p(t.matchVector),matchVectorScore:(a=t.matchVector,o=void 0,i=void 0,n=void 0,s=void 0,r=void 0,d=void 0,c=void 0,u=void 0,o=a||"?????????????????",i=o.substring(2,3),n=o.substring(4,5),s=o.substring(6,7),r=o.substring(10,11),d=o.substring(14,15),c=o.substring(15,16),u=100,i===l.INPUT_NOT_NULL_MATCH_NOT_NULL||i===l.INPUT_NULL_MATCH_NULL||(d===l.INPUT_NOT_NULL_MATCH_REPLACED_NOT_NULL?u-=60:d===l.INPUT_NULL_MATCH_REPLACED_NOT_NULL?u-=70:d===l.INPUT_NOT_NULL_MATCH_REPLACED_NULL&&(u-=80),c===l.INPUT_NOT_NULL_MATCH_REPLACED_NOT_NULL?u-=20:c===l.INPUT_NULL_MATCH_REPLACED_NOT_NULL?u-=25:c===l.INPUT_NOT_NULL_MATCH_REPLACED_NULL&&(u-=30),r===l.INPUT_NOT_NULL_MATCH_REPLACED_NOT_NULL?u-=15:r===l.INPUT_NULL_MATCH_REPLACED_NOT_NULL?u-=20:r===l.INPUT_NOT_NULL_MATCH_REPLACED_NULL&&(u-=25),s===l.INPUT_NOT_NULL_MATCH_REPLACED_NOT_NULL?u-=10:s===l.INPUT_NULL_MATCH_REPLACED_NOT_NULL?u-=13:s===l.INPUT_NOT_NULL_MATCH_REPLACED_NULL&&(u-=16),n===l.INPUT_NOT_NULL_MATCH_REPLACED_NOT_NULL?u-=3:n===l.INPUT_NULL_MATCH_REPLACED_NOT_NULL?u-=5:n===l.INPUT_NOT_NULL_MATCH_REPLACED_NULL&&(u-=7),u<0&&(u=0)),u),name:p(t.name),houseNumber:p(t.houseNumber),street:p(t.street),settlement:p(t.settlement),municipality:p(t.municipality),region:p(t.region),country:p(t.country),language:p(t.language),postalCode:p(t.postalCode),side:p(t.side),percent:p(t.percent),edgeId:p(t.edgeId),timezone:p(t["timezone="]),gmtOffset:p(t["GMT_offset="])})}else g.error="Parsing Error";return g}function U(e,t){n.clearErrors(e),n.showErrors([{type:"error",location:["page"],pageItem:e,message:t,unsafe:!1}])}function f(e,a,o){const{previewMapBackground:i,useCustomBackground:n,customBackgroundName:s,customBackgroundType:r,customBackgroundUrl:d,customBackgroundAttribution:c,customBackgroundApiKey:u,customBackgroundHeaders:m,customBackgroundMinZoom:g,customBackgroundMaxZoom:l}=o;e&&(e.miniMap({center:a,zoom:16,marker:!0,controls:!0,tooltip:"",background:i,useCustomBackground:n,customBackgroundName:s,customBackgroundType:r,customBackgroundUrl:d,customBackgroundAttribution:c,customBackgroundApiKey:u,customBackgroundHeaders:m,customBackgroundMinZoom:g,customBackgroundMaxZoom:l}),t("[data-GeoCoder-height]").each((function(){let e=t(this).attr("data-GeoCoder-height");t(this).css("block-size",e)})))}function D(n){var r,d,c,u,l,E,_=N(n),C=t("#"+a.escapeCSS(n),apex.gPageContext$),I=a.getTopApex().jQuery,D="GeoCoder_"+apex.env.APP_PAGE_ID+"_"+n,P=D+"_dlg",y={ID:{index:0,canHide:!1,hidden:!0,seq:1},STREET:{index:1,heading:i.getMessage(L.COLUMN_STREET),alignment:"start",headingAlignment:"start",canHide:!1,canSort:!1,hidden:!1,seq:2},HOUSE_NUMBER:{index:2,heading:i.getMessage(L.COLUMN_HOUSENUMBER),alignment:"center",headingAlignment:"center",canHide:!1,canSort:!1,hidden:!1,seq:3},CITY:{index:3,heading:i.getMessage(L.COLUMN_CITY),alignment:"start",headingAlignment:"start",canHide:!1,canSort:!1,hidden:!1,seq:4},POSTAL_CODE:{index:4,heading:i.getMessage(L.COLUMN_POSTALCODE),alignment:"center",headingAlignment:"center",canHide:!1,canSort:!1,hidden:!1,seq:5},STATE:{index:5,heading:i.getMessage(L.COLUMN_STATE),alignment:"center",headingAlignment:"center",canHide:!1,canSort:!1,hidden:!1,seq:6},COUNTRY:{index:6,heading:i.getMessage(L.COLUMN_COUNTRY),alignment:"center",headingAlignment:"center",canHide:!1,canSort:!1,hidden:!1,seq:7},LATITUDE:{index:7,heading:i.getMessage(L.COLUMN_LATITUDE),alignment:"end",headingAlignment:"end",canHide:!1,canSort:!1,hidden:!1,seq:8},LONGITUDE:{index:8,heading:i.getMessage(L.COLUMN_LONGITUDE),alignment:"end",headingAlignment:"end",canHide:!1,canSort:!1,hidden:!1,seq:9},MAP_LINK:{index:9,heading:i.getMessage(L.COLUMN_MAPLINK),alignment:"center",headingAlignment:"center",canHide:!1,canSort:!1,hidden:!1,escape:!1,seq:10},MATCH_SCORE:{index:10,heading:i.getMessage(L.COLUMN_MATCHSCORE),alignment:"center",headingAlignment:"center",width:100,canHide:!1,canSort:!1,hidden:!1,escape:!1,seq:11}};function v(){r&&r.resize()}function S(){var t,a,o,i,n;r&&(t=r.getSelectedRecords(),(a=0===t.length&&1===l.getTotalRecords()?l.recordAt(0):t[0])&&(o=E.matches.find((e=>e.sequence===l.getValue(a,"ID"))))&&(e(_.itemId).setValue((i=o.latitude,n=o.longitude,i&&n?'{"type": "Point", "coordinates": ['+n+", "+i+"]}":"{}")),C.data("geocoding-done","Y"),_.sanitizeAddress&&(_.streetItem&&(_.housenumberItem?e(_.streetItem).setValue(o.street):e(_.streetItem).setValue(O(o.country,o.street,o.houseNumber))),_.housenumberItem&&e(_.housenumberItem).setValue(o.houseNumber),_.subareaItem&&e(_.subareaItem).setValue(o.municipality),_.cityItem&&e(_.cityItem).setValue(o.municipality||o.settlement),_.zipItem&&e(_.zipItem).setValue(o.postalCode),_.regionItem&&e(_.regionItem).setValue(o.region)),_.matchvectorItem&&e(_.matchvectorItem).setValue(o.matchVector),d.dialog("close"),s.trigger(C,p,o)))}function b(e){var t=D,o=function(e){var t="",o=[];if(e)for(var i=0;i<e.matches.length;i++)t=e.matches[i].municipality&&e.matches[i].settlement!==e.matches[i].municipality?e.matches[i].municipality+" ("+e.matches[i].settlement+")":e.matches[i].settlement,e.matches[i].country&&e.matches[i].settlement&&o.push([e.matches[i].sequence,e.matches[i].street,e.matches[i].houseNumber,t,e.matches[i].postalCode,e.matches[i].region,e.matches[i].country,e.matches[i].latitude,e.matches[i].longitude,'<a class="a-GeoCoder-previewMap" href="javascript:void(0);" data-latitude="'+a.escapeHTMLAttr(e.matches[i].latitude)+'" data-longitude="'+a.escapeHTMLAttr(e.matches[i].longitude)+'"><span class="fa fa-map-marker" aria-hidden="true"></span></a>','<progress class="a-GeoCoder-matchScore" max="100" value="'+a.escapeHTMLAttr(e.matches[i].matchVectorScore)+'">'+a.escapeHTMLAttr(e.matches[i].matchVectorScore)+"%</progress>"]);return o}(e)||[],i=o.length||0;l=apex.model.create(t,{recordIsArray:!0,shape:"table",hasTotalRecords:!0,fields:y,regionId:n},o,i)}function R(){var e=D;u.grid({modelName:e,columns:[y],footer:!0,noDataMessage:i.getMessage(L.NO_DATA_FOUND),rowsPerPage:15,pagination:{scroll:!0,loadMore:!0,showRange:!1},reorderColumns:!1,resizeColumns:!0,tooltip:{content:function(e,a,o,i,n){var s=null;return n&&o&&"MATCH_SCORE"===n.property&&(s=t(a.getValue(o.record,"MATCH_SCORE")).text()),s}},selectionChange:function(e){e.originalEvent&&"click"===e.originalEvent.type&&S()},activateCell:function(e){var a=t(e.target).closest(".a-GV-cell");"keydown"===e.type&&13!==e.which||a.hasClass("a-GV-selHeader")||a.hasClass("has-button")||S()},pageChange:function(){u.height("auto"),_.showMapPopup&&I("body").on("click","a.a-GeoCoder-previewMap",(function(){!function(e,o,n){var s,r,d,c=N(e),u=600,m=400,g=a.getTopApex().jQuery,l="GeoCoder_"+apex.env.APP_PAGE_ID+"_"+e+"_map",p=l+"_dlg";function h(){return"<div class='a-GeoCoder-map-dialog'></div>"}r={id:p,title:i.getMessage(L.MAP_DIALOG_TITLE),isPopup:!1,parentElement:null,draggable:!0,resizable:!1,width:"auto",height:"auto",confirm:!0,okButton:!1,cancelLabelKey:"APEX.DIALOG.CLOSE",dialogClass:"ui-dialog-geocoder-map",notification:!1,init:function(e){var o;s=g("#"+a.escapeCSS(p)),o=t("<div id='"+l+"' class='a-GeoCoder-map' style='width:"+u+"px;height:"+m+"px'></div>"),e.append(o),d=o},open:function(){var e=t(window).width()-10,a=t(window).height()-10;u>e&&(s.dialog("option","width",e),d.css("width",e)),m>a&&(s.dialog("option","height",a),d.css("height",a)),f(d,[n,o],c)},callback:function(){d.miniMap("destroy"),s.dialog("destroy").remove()}},apex.message.showDialog(h,r)}(_.itemId,t(this).data("latitude"),t(this).data("longitude"))}))}}),r=u.data("apex-grid")}c={id:P,title:i.getMessage(L.DIALOG_TITLE),isPopup:!1,parentElement:null,draggable:!0,resizable:!0,width:"auto",height:"auto",confirm:!0,okButton:!0,cancelLabelKey:"APEX.DIALOG.CLOSE",dialogClass:"ui-dialog-geocoder",notification:!1,init:function(e){var o;d=I("#"+a.escapeCSS(P)),o=t("<div class='a-GeoCoder-results'></div>"),e.append(o),e.attr("role","application"),u=o},open:function(){var e,c,p,I=t(window).width()-10,N=t(window).height()-10,O=d.closest("div.ui-dialog").find("div.ui-dialog-titlebar").outerHeight()+d.closest("div.ui-dialog").find("div.ui-dialog-buttonpane").outerHeight()||150;o.info("GeoCoder itemOptions",_),function(e){var t=e||{};if(!t.country)return U(t.itemId,i.formatMessage(L.REQUIRED,i.getMessage(L.COLUMN_COUNTRY))),!1;if(t.structuredAddress){if(!t.city&&!t.zip)return U(t.itemId,i.formatMessage(L.REQUIRED_MULTIPLE,i.getMessage(L.COLUMN_CITY),i.getMessage(L.COLUMN_POSTALCODE))),!1;if(!t.street)return U(t.itemId,i.formatMessage(L.REQUIRED,i.getMessage(L.COLUMN_STREET))),!1}else if(0===t.addressLines.length)return U(t.itemId,i.getMessage(L.ADDRESS_REQUIRED)),!1;return!0}(_)?(e=a.showSpinner(d),M(_).done((function(e){if(E=A(e),o.info("GeoCoder jsonData",E),E.error)return U(n,E.error),void d.dialog("close");s.trigger(C,h,E),_.showCoordinates?(y.LATITUDE.hidden=!1,y.LONGITUDE.hidden=!1):(y.LATITUDE.hidden=!0,y.LONGITUDE.hidden=!0),_.showMapPopup?y.MAP_LINK.hidden=!1:y.MAP_LINK.hidden=!0,b(E),_.displayMode===m?(R(),c=l.getTotalRecords()>0?u.outerWidth()+250:u.outerWidth()):_.displayMode===g&&(!function(){var e,a,o,n,s=D,d=t(window).width()-10,c=t(window).height()-10;u.tableModelView({modelName:s,beforeTemplate:'<ul class="a-AddressList" role="listbox">',recordTemplate:'<li data-id="&ID." class="a-AddressList-item" role="option"><div class="a-AddressList-line1">'+(o=_.country,n="&STREET. &HOUSE_NUMBER.",T.includes(o)&&(n="&HOUSE_NUMBER. &STREET."),n+'</div><div class="a-AddressList-line2">&CITY., &STATE. &POSTAL_CODE., &COUNTRY.</div></li>'),afterTemplate:"</ul>",footer:!1,hasSize:!0,noDataMessage:i.getMessage(L.NO_DATA_FOUND),useIconList:!0,constrainNavigation:!0,rowsPerPage:10,pagination:{scroll:!0,loadMore:!0},iconListOptions:{navigation:!0,multiple:!1,activate:function(e){S(),e.preventDefault()}}}),(e=2*(u.find("ul.a-AddressList").outerWidth()||200))>d&&(e=d),(a=(u.find("ul.a-AddressList").outerHeight()||100)+(u.find("div.a-GV-loadMore").outerHeight()||50))>c&&(a=c),u.width(e),u.height(a),r=u.data("apex-tableModelView")}(),c=u.outerWidth()),r&&r.focus(),p=u.outerHeight()+O,c>I&&(c=I),p>N&&(p=N),d.dialog("option","width",c),d.dialog("option","height",p),u.height(d.height()),v()})).fail((function(e){o.error("GeoCoder request failed",e),U(n,e),d.dialog("close")})).always((function(){e&&(e.remove(),e=null)}))):d.dialog("close")},resize:function(e){_.displayMode===g&&(u.width(d.width()),u.height(d.height())),v(e.target)},callback:function(e){var t;e&&S(),t=D,(l=apex.model.get(t))&&l.clearData(),d.dialog("destroy").remove()}},apex.message.showDialog((function(){return"<div class='a-GeoCoder-dialog'></div>"}),c)}e.addAttachHandler((function(o){t("input[type='hidden'].apex-item-geocoder",o).each((function(){var o,n,s,c,m,g,l=a.escapeCSS(this.id),p=t("#"+l,apex.gPageContext$),h=N(l,!1);h.showMapItem&&(p.closest(r).addClass("apex-item-wrapper--geocoded-address-map"),(o=t("#"+l+"_MAP",apex.gPageContext$)).height()<10&&setTimeout((function(){o.css("height",o.width()*(2/3))}),20),p.val().length>0&&(s=JSON.parse(p.val()))&&s.coordinates&&f(o,s.coordinates,h),p.on(E,(function(){o=t("#"+l+"_MAP",apex.gPageContext$),t(this).val().length>0?(s=JSON.parse(p.val()))&&s.coordinates&&(o.hasClass("apex-minimap")?o.miniMap("option","center",s.coordinates):f(o,s.coordinates,h)):o.hasClass("apex-minimap")&&o.miniMap("destroy")}))),h.showDisplayOnlyItem&&(p.closest(r).addClass("apex-item-wrapper--geocoded-address-displayonly"),p.closest(r).addClass("apex-item-wrapper--has-icon"),p.on(E,(function(){n=t("#"+l+"_DISPLAY",apex.gPageContext$),t(this).val().length>0?(n.text(i.getMessage(L.GEOCODING_DONE)),n.next().removeClass(C).addClass(_)):(n.text(i.getMessage(L.GEOCODING_OPEN)),n.next().removeClass(_).addClass(C))}))),"JQUERY_SELECTOR"===h.trigger?"BUTTON"===(g=(m=t(h.triggerSelector,apex.gPageContext$)).prop("nodeName"))?m.on("click",(function(){D(l)})):"INPUT"===g&&m.on("change",(function(){D(l)})):h.trigger===d&&(t(apex.gPageContext$).on("apexbeforepagesubmit",(function(){(function(a){var o=a||{},i=t("#"+o.itemId,apex.gPageContext$),n=!1;i.data("geocoding-done")||(o.countryType===u&&o.countryItem&&e(o.countryItem).isChanged()&&(n=!0),o.poiItem&&e(o.poiItem).isChanged()&&(n=!0),o.streetItem&&e(o.streetItem).isChanged()&&(n=!0),o.housenumberItem&&e(o.housenumberItem).isChanged()&&(n=!0),o.subareaItem&&e(o.subareaItem).isChanged()&&(n=!0),o.regionItem&&e(o.regionItem).isChanged()&&(n=!0),o.cityItem&&e(o.cityItem).isChanged()&&(n=!0),o.zipItem&&e(o.zipItem).isChanged()&&(n=!0),o.addresslineItem&&e(o.addresslineItem).isChanged()&&(n=!0));return n})(h)&&(apex.event.gCancelFlag=!0,D(l))})),h.showDisplayOnlyItem&&!p.data("geocoding-done")&&(c=function(e){var t=e||{},o="";t.countryType===u&&t.countryItem&&(o="#"+a.escapeCSS(t.countryItem));t.poiItem&&(o=o+", #"+a.escapeCSS(t.poiItem));t.streetItem&&(o=o+", #"+a.escapeCSS(t.streetItem));t.housenumberItem&&(o=o+", #"+a.escapeCSS(t.housenumberItem));t.subareaItem&&(o=o+", #"+a.escapeCSS(t.subareaItem));t.cityItem&&(o=o+", #"+a.escapeCSS(t.cityItem));t.zipItem&&(o=o+", #"+a.escapeCSS(t.zipItem));t.addresslineItem&&(o=o+", #"+a.escapeCSS(t.addresslineItem));return o=(o=o.replace(/^,+|,+$/g,"")).trim()}(h),c&&t(c).on("change",(function(){(n=t("#"+l+"_DISPLAY",apex.gPageContext$)).text(i.getMessage(L.GEOCODING_OPEN)),n.next().removeClass(_).addClass(C)})))),e.create(l,I)}))})),apex.item.geoCoder={openPopup:function(t){"GEOCODER"!==e(t).item_type&&o.error("Item is not a Geocoded Address item."),D(t)},makeRequest:function(e,t){M(N(e)).done((function(e){var a=A(e);o.info("GeoCoder jsonData",a),t(a)})).fail((function(e){o.error("GeoCoder request failed",e),t({error:e})}))}}}(apex.item,apex.jQuery,apex.util,apex.debug,apex.lang,apex.message,apex.event);