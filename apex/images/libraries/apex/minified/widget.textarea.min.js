/*!
 Copyright (c) 2012, 2022, Oracle and/or its affiliates. All rights reserved.
*/
!function(e,t,a){"use strict";const n=".apex-item-group--textarea",s="has-error",r="aria-describedby",i="NONE",l="LEADING",c="BOTH",o=/\s+$/,u=/^\s+/;let h=(e,t)=>(t!==i&&(e=null==e?"":""+e,t!==l&&t!==c||(e=e.replace(u,"")),"TRAILING"!==t&&t!==c||(e=e.replace(o,""))),e),p={show:function(){this.element.closest(n).show()},hide:function(){this.element.closest(n).hide()},setValue:function(e,t,a){e=h(e,this._whitespaceTrim),this.element.val(e),this._charCount&&this._charCount(),a||(this._preventChangeHandler=!0)},getValue:function(){let e=this.element.val();return e=h(e,this._whitespaceTrim),e}},d=void 0!==document.createElement("textarea").style.resize;function m(e){let a,n,s=null,r=null;function i(){t(document).off("mousemove.apex_startResize").off("mouseup.apex_startResize"),e.css("opacity",1)}a=parseInt(e.css("min-width"),10)||20,n=parseInt(e.css("min-height"),10)||20,e.after('<div class="apex_size_bar"><div class="apex_size_grip"></div></div>'),t("div.apex_size_bar, div.apex_size_grip",e.parent()).mousedown((function(l){return s=e.width()-l.pageX,r=e.height()-l.pageY,e.css("opacity",.25),t(document).on("mousemove.apex_startResize",(function(i){return function(t,i){if(e.height(Math.max(n,r+t.pageY)+"px"),i){let n=Math.max(a,s+t.pageX);e.width(n)}return!1}(i,"se-resize"===t(l.currentTarget).css("cursor"))})).on("mouseup.apex_startResize",i),!1})),e.parent().css("display:inline-block")}e.addAttachHandler((function(n){t("textarea.apex-item-textarea",n).each((function(){let o,x,g,_,f=0,v=0,C=null,w=this,z=t(w),R=w.id,b=z.attr("data-trim-spaces")||c,H=z.attr("data-resizable")||!1,T=z.attr("data-counter")||!1,I=()=>{C.removeClass("apex-item-textarea-counter--error apex-item-textarea-counter--warning"),g.html(f),f>0?C.show():C.hide(),x&&(v>95?C.addClass("apex-item-textarea-counter--error"):v>=90&&C.addClass("apex-item-textarea-counter--warning"))},N=a.debounce(I,200);function y(e){let t=z.val();if(f=t.replace(/\n/g,"xx").length,x){if(f>x){let e=f-x,a=w.selectionStart,n=w.selectionEnd;z.val(t.substring(0,n-e)+t.substring(n)),n-=e,f=x,a<n&&(a=n),w.setSelectionRange(a,n),z.addClass(s)}else z.hasClass(s)&&z.removeClass(s);v=f/x*100}C&&(e?N():I())}if(d?z.css("resize",H?"both":"none"):H&&m(z),T){let e=z.attr(r)||"",s="#"+a.escapeCSS(R);x=parseInt(z.attr("data-max-char")||0,10),e.length>0&&(e=" "+e),e=R+"_CHAR_COUNT"+e,C=t(s+"_CHAR_COUNT",n),g=t(s+"_CHAR_COUNTER",n),z.attr(r,e)}else x=parseInt(z.attr("maxlength")||0,10);_=x>0||T,_&&(z.on("change input",y),y()),z.closest(".a-GV-columnItem")[0]&&z.addClass("js-uses-enter"),b!==i&&z.on("change",(()=>{if(o._preventChangeHandler)return void(o._preventChangeHandler=!1);let e,t=w.selectionStart,a=w.selectionEnd,n=z.val();b!==l&&b!==c||(e=n.match(u),e&&(e=e[0].length,t-=e,t<0&&(t=0),a-=e,a<0&&(a=0))),n=h(n,b),a>n.length&&(a=n.length,t>a&&(t=a)),z.val(n),w.setSelectionRange(t,a),_&&y()})),e.create(R,p),o=e(R),_&&(o._charCount=y),o._whitespaceTrim=b,o._preventChangeHandler=!1}))}))}(apex.item,apex.jQuery,apex.util);