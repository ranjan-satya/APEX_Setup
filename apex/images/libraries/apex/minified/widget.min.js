apex.widget=function(t,e,i){"use strict";const s="true",l="false";function o(t){return t.replace(/^[a-z]/,(function(t){return t.toUpperCase()}))}function n(t,e){let i;(t=t.jquery?t[0]:t)&&t.getAttribute&&(i=t.getAttribute("data-"+e));try{i=i===s||i!==l&&("null"===i?null:+i+""===i?+i:r.test(i)?JSON.parse(i):i)}catch(t){}return i}const r=/(?:{[\s\S]*}|\[[\s\S]*])$/,a=/[A-Z]/g,c=function(t){return"-"+t.toLowerCase()},h=".u-selector",u="is-focused",d="is-selected",p="."+d,g="aria-selected",f="aria-checked",S="aria-disabled",m="aria-multiselectable",C=".is-disabled",b="u-RTL",y=":visible",x="js-tabbable",v="."+x,w="tabindex",A="role",M="input",I="focus",N=".selection",$="set",T="unset",F="toggle",_="range",L="add",G="all",k="anchor",K=navigator.appVersion.includes("Mac"),V={NAV_NONE:"none",NAV_FOCUS:"focus",NAV_SELECT:"select"},{NAV_NONE:O,NAV_FOCUS:R,NAV_SELECT:E}=V,D=t=>parseInt(t,10),P="data-id",j="data-rownum",q="js-ScrollFiller",H=".js-load",B={begin:function(){this.text=""},item:function(t,e){t>0&&(this.text+="\r\n"),this.text+=e[0].innerText.replaceAll(/\s+/g," ").trim()},end:function(){},toString:function(){return this.text}},U={begin:function(t,e){1===e.length?this.text="":(this.text="<ul>",this.collectionClose="</ul>",this.itemNode="li")},item:function(t,e){0===t&&"TR"===e[0].nodeName.toUpperCase()&&(this.text="<table><tbody>",this.collectionClose="</tbody></table>",this.itemNode="tr"),this.itemNode&&(this.text+=`\r\n<${this.itemNode}>`),this.text+=e[0].innerHTML,this.itemNode&&(this.text+=`</${this.itemNode}>`)},end:function(){this.collectionClose&&(this.text+=this.collectionClose)},toString:function(){return this.text}};return{waitPopup:function(t){let i,s,l;return t?(i=e('<div id="apex_wait_popup" class="apex_wait_popup"></div><div id="apex_wait_overlay" class="apex_wait_overlay"></div>').prependTo("body"),s=i.first(),t.indexOf("<img")>=0&&s.hide(),window.setTimeout((function(){s.html(t).find("img").hide().on("load",(function(){e(this).show(),s.show()}))}),10)):(i=e('<div id="apex_wait_overlay" class="apex_wait_overlay"></div>').prependTo("body"),window.setTimeout((function(){void 0!==i&&(l=apex.util.showSpinner())}),10),i.css("visibility","visible")),{remove:function(){void 0!==l&&l.remove(),i.remove(),i=void 0}}},initPageItem:function(t,e){apex.item.create(t,e)},textareaClob:{_upload:function(t,e,i){let s,l=$s_Split($v(t),4e3);s=apex.server.widget("apex_utility",{p_flow_step_id:"0",x04:"CLOB_CONTENT",x05:"SET",f01:l},{dataType:"text"}),s.done((function(){$s(t,i),apex.submit(e)}))},upload:function(t,e){this._upload(t,e,"")},uploadNonEmpty:function(t,e){0===$v(t).replace(/\s/g,"").length||""===$v(t)||"."===$v(t)?($s(t,""),apex.submit(e)):this._upload(t,e,".")}},contextMenuMixin:{options:{contextMenuAction:null,contextMenu:null,contextMenuId:null},_initContextMenu:function(i,s,l,n,r){let a=this.options,c=this,h=this.element,u=this.widgetName,d=o(u);if(a.contextMenu||a.contextMenuId)if(e.apex.menu){if(a.contextMenu){if(a.contextMenu.menubar)throw new Error(d+" contextMenu must not be a menubar");a.contextMenu._originalBeforeOpen=a.contextMenu.beforeOpen,a.contextMenu.beforeOpen=function(t,e){e.menuElement=c.contextMenu$,e[u]=h,c.getSelection&&(e.selection=c.getSelection()),n&&n(e),a.contextMenu._originalBeforeOpen&&a.contextMenu._originalBeforeOpen(t,e)},a.contextMenu._originalAfterClose=a.contextMenu.afterClose,a.contextMenu.afterClose=function(t,e){e.menuElement=c.contextMenu$,e[u]=h,a.contextMenu._originalAfterClose&&a.contextMenu._originalAfterClose(t,e),e.actionTookFocus||c.focus()},this.contextMenu$=e("<div style='display:none'></div>").appendTo("body"),a.contextMenuId&&(this.contextMenu$[0].id=a.contextMenuId),this.contextMenu$.menu(a.contextMenu)}else if(this.contextMenu$=e("#"+a.contextMenuId),0===this.contextMenu$.length||!this.contextMenu$.is(":apex-menu"))throw new Error(d+" contextMenuId not found");a.contextMenuAction&&t.warn(d+" contextMenuAction option ignored when contextMenu option present"),a.contextMenuAction=function(t){let s,l,o=r?r(t):null;if("contextmenu"===t.type&&0!==t.button)s=t.pageX,l=t.pageY;else{let o=e(t.target),n=o.offset();s=n.left,l=n.top+o.closest(i).outerHeight()}c.contextMenu$.menu("toggle",s,l,o)}}else t.warn(d+" contextMenu option ignored because menu widget not preset");function p(t){let e,i=c.options.contextMenuAction;i&&!s(t)&&(e=l(t),e&&(t.preventDefault(),e.length&&c._select(e,null,!0,!1),setTimeout((()=>{i(t)}),10)))}let g=!1;this._on({keydown:t=>{t.shiftKey&&121===t.which&&(t.preventDefault(),g=!0,setTimeout((()=>{p(t),g=!1}),50))},contextmenu:t=>{g?t.preventDefault():p(t)}})},_destroyContextMenu:function(){this.options.contextMenu&&this.contextMenu$&&this.contextMenu$.remove()},_checkContextMenuOptions:function(t){let e=this.options,i=o(this.widgetName);if("contextMenu"===t||"contextMenuId"===t)throw new Error(i+" "+t+" cannot be set");if("contextMenuAction"===t&&(e.contextMenu||e.contextMenuId))throw new Error(i+" contextMenuAction cannot be set when the contextMenu or contextMenuId option is used")}},ListViewSelection:class{#t;#e=null;#i=!1;#s=!1;#l=null;#o=null;#n=39;#r=37;#a=!1;#c=null;#h=null;#u=null;#d=null;#p=null;#g=!1;#f=!1;#S=!1;#m=!1;#C=!1;#b=C;constructor(t,e,i){this.#t=i,this.#l=t,null!=e.allowCopy&&(this.#i=!0),this.#s=e.itemsAreServerRendered||!1;for(const t of["itemNavigationMode","selectionFollowsFocus","multiple","allowSelectAll","selectAllId","allowSelectHidden","clipboardValue","itemSelector","groupSelector","constrainNavigation","selectionStateItem","dataTransferFormats","persistSelection"])Object.hasOwn(e,t)&&void 0!==e[t]&&(this[t]=e[t]);this.#y()}#x=O;get itemNavigationMode(){return this.#x}set itemNavigationMode(i){if([O,R,E].includes(i)||(t.warn("Invalid value for itemNavigationMode ignored"),i=O),this.#x!==i&&this.setSelection(e(),!1,!1),this.#x=i,i===O)this.#e=null;else{const t=this.#t.getContainer();t?this.#v(t.find(this.itemSelector)[0]):this.#e=null}this.#w()}selectionFollowsFocus=!0;#A=!1;get multiple(){return this.#A}set multiple(t){this.#A&&!t&&this.setSelection(this.getSelection().first()),this.#A=t,this.#w()}allowSelectAll=!1;#M=null;get selectAllId(){return this.#M}set selectAllId(t){if(this.#p&&this.#p.off(N),t)if(this.#p=e("#"+i.escapeCSS(t)),this.#p[0]){const t=this.#p.is(M),i=t=>{t?this.setSelection(e()):this.selectAll(null)};this.#p.on("click"+N,(()=>{if(this.#I)return;let e;e=t?!this.#p.prop("checked"):this.#p.attr(f)===s,i(e)})),t||this.#p.on(`keyup${N} keydown${N}`,(t=>{if(!this.#I&&32===t.which){if("keyup"===t.type){const t=this.#p.attr(f)===s;i(t)}t.preventDefault()}}))}else this.#p=null;else this.#p=null;this.#M=t}allowSelectHidden=!1;itemSelector=null;#N=null;get groupSelector(){return this.#N}set groupSelector(t){this.#N=t,this.#y()}constrainNavigation=!0;clipboardValue=null;dataTransferFormats=[{format:"text/plain",writer:Object.create(B)},{format:"text/html",writer:Object.create(U)}];#$=!1;get persistSelection(){return this.#$}set persistSelection(e){!this.#t.getModel&&e&&(t.warn("No model to persist selection in"),e=!1),this.#$=e}selectionStateItem=null;#I=!1;get disabled(){return this.#I}set disabled(t){if(this.#I=t,t){const t=this.getCurrentItem();t&&this.#T(t)}else if(this.supportsNavigation()){const t=this.#e;this.#e=null,this.#v(t)}this.#w()}initialize(){const t=this.#l;this.#w(),this.#e=null,this.#a=!1,"rtl"===t.css("direction")&&(t.addClass(b),this.#n=37,this.#r=39),t.on("click"+N,(t=>{this.#F(t)})).on("keydown"+N,(t=>{this.#_(t)})).on("keyup"+N,(t=>{this.#L(t)})).on("focusin"+N,(t=>{this.#G(t)})).on("focusout"+N,(t=>{this.#k(t)})),this.#i&&apex.clipboard.addHandler(t[0],(t=>!(this.#I||!this.supportsSelection())&&(this.#K(t),!0))),this.#c=i.debounce(this.#V,1),this.#h=i.debounce(this.#V,350)}destroy(){apex.clipboard.removeHandler(this.#l[0]),this.#l.removeClass(b).off(N),this.#t.getContainer().removeAttr(m).removeAttr(S),this.#p&&(this.#p.off(N),this.#p=null)}supportsSelection(){return this.itemNavigationMode===E}supportsNavigation(){return this.itemNavigationMode!==O}focus(){this.supportsNavigation()&&this.#e?this.#e.focus():this.#t.getContainer().find(":focusable").first().trigger(I)}getCurrentItem(){if(this.supportsNavigation()){if(this.#e){let t=this.itemSelector;return this.groupSelector&&(t+=","+this.groupSelector),e(this.#e).closest(t)}return e()}return null}setCurrentItem(t,e){if(this.supportsNavigation()){const i=this.#t.getContainer();let s=this.itemSelector;this.groupSelector&&(s+=","+this.groupSelector),(t=t.first()).is(s)&&t.closest(i)[0]&&(this.#v(t[0]),e&&this.focus())}}getSelection(){const t=this.#t.getContainer();return t&&this.supportsSelection()?t.find(this.itemSelector+p):null}setSelection(t,e,i){this.#t.getContainer()&&this.supportsSelection()&&(this.multiple||(t=t.first()),this.#O(t,null,e,!1,i))}selectAll(t,e){const i=this.#t.getContainer();if(i&&this.supportsSelection()&&this.multiple&&this.allowSelectAll){let s;s=i.find(this.itemSelector),this.#O(s,G,t,e)}}getSelectedValues(){const t=this.#t;return t.getContainer()&&this.supportsSelection()?this.persistSelection?t.getModel().getSelectedRecords():t.getValuesForItems(this.getSelection()):null}getSelectedCount(){const t=this.#t;return t.getContainer()&&this.supportsSelection()?this.persistSelection?t.getModel().getSelectedCount():this.getSelection()?.length:null}setSelectedValues(t,i,s){const l=this.#t,o=l.getContainer(),n=l.getModel?l.getModel():null;let r,a=[],c=0,h=t.length,u=new Set;if(!o||!this.supportsSelection())return-1;if(!this.multiple&&h>1&&(h=1),n)for(let e=0;e<h;e++)u.add(n.getRecordId(t[e]));else t.forEach((t=>{u.add(t)}));if(this.#S?r=o.find(this.groupSelector+" "+this.itemSelector):(r=o.children(),r=this.#g?r.children(this.itemSelector):r.filter(this.itemSelector),r=r.not(this.#b)),r.each((function(){let t=e(this).attr(P);u.has(t)&&(u.delete(t),a.push(this),c+=1)})),this.setSelection(e(a),i,s),this.persistSelection){for(let t of u){n.getRecord(t)&&(n.setSelectionState(t,!0),c+=1)}0!==a.length||s||this.#c(!0,null)}return c}saveState(){if(!this.supportsNavigation())return;let s,l={};if(this.#u&&t.warn("Previous selection state overwritten"),this.#u=l,this.#C=!1,s=this.getCurrentItem(),s[0]&&(l.lastItemValue=s.attr(P)),this.supportsSelection()){if(this.#o){let t;t="string"==typeof this.#o?(this.#t.getContainer()||e()).find(`[${P}="${i.escapeCSS(this.#o)}"]`):e(this.#o),l.anchorItemValue=t.attr(P)}if(this.#t.getContainer()&&!this.persistSelection){const t=this.getSelection(),e=[];l.selection=e;for(let i=0;i<t.length;i++){let s=t.eq(i).attr(P);void 0!==s&&e.push(s)}}else this.persistSelection&&(l.hadSelection=this.#a,this.#a=!1)}}restoreState(t){if(!this.supportsNavigation())return;const e=this.#u,s=this.#t.getModel(),l=this.#t.getContainer();let o,n,r=!1;if(this.#u=null,o=l.find(`[${P}="${i.escapeCSS(e.lastItemValue)}"]`),n=o[0]?this.#R(o):l.find(this.itemSelector)[0],this.supportsSelection())if(this.#o=l.find(`[${P}="${i.escapeCSS(e.anchorItemValue)}"]`)[0]||e.anchorItemValue||null,e?.selection?.length>0){let i=e.selection;s&&(i=i.map((t=>s.getRecord(t))).filter((t=>null!=t))),r=this.setSelectedValues(i,!1,!0)>0,r&&!t||this.#c(!0,null)}else this.persistSelection&&(e.hadSelection||t)&&this.#c(!0,null);n&&this.#v(n)}getPreferredSelectorControl(){if(!this.supportsSelection())return"";const t="u-selector"+(this.#A?"":" u-selector--single");return this.#g?`<span class="${t}" aria-hidden="${s}"></span>`:`<input class="${t}" type="${this.#A?"checkbox":"radio"}" aria-label="%0">`}#O(t,l,o,n,r=!1){const a=this.#t,c=a.getModel?a.getModel():null,u=a.getContainer(),f=a.getPagination();let S,m,C,b,x,v,w=!this.selectionFollowsFocus,A=!1,I=!1,N=!1,K=this.persistSelection,V=!1,O=null,R=$;const E=(t,i)=>{const s=(t,s)=>{t.each(((t,l)=>{let o=e(l).attr(P);o&&c.setSelectionState(o,i,s)}))};K&&!V&&(s(t,R),R!==F&&t.length>1&&!N&&s(C.first(),k))};if(l===T||this.allowSelectHidden||(t=t.filter(y)),l&&(this.multiple?("string"==typeof l?R=l:"click"===l.type?w&&e(l.target).is(h)?(R=F,N=!0):l.ctrlKey||l.metaKey?R=F:l.shiftKey&&(R=_):"keydown"!==l.type&&"keyup"!==l.type||(32===l.which?l.ctrlKey?R=F:l.shiftKey?R=_:w?(R=F,A=!0):R=L:l.ctrlKey?R="none":l.shiftKey&&(R=_,w&&(I=!0))),l.target||(l=null)):"click"===l.type&&w?(l.ctrlKey||l.metaKey)&&(R=F,A=!0):"keydown"!==l.type&&"keyup"!==l.type||32===l.which&&w&&(R=F,A=!0)),K&&(x=c.getSelectionState().rangeAnchor),R===G&&this.multiple&&this.allowSelectAll?(V=!0,R=$):R!==_||this.#o||I||x||(R=$),R===_&&I&&(!this.#o||!this.getCurrentItem().is(p+","+this.#b))){let t=this.getCurrentItem();this.#o=t[0],K&&(c.setSelectionState(t.attr(P),null,k),x=c.getSelectionState().rangeAnchor)}if(S=t.hasClass(d),R!==$&&R!==_&&(R!==F||!A||this.multiple&&S)||(v=u.find(p),A&&(v=v.not(t)),v.removeClass(d).removeAttr(g).find(h).removeClass(d).filter(M).prop("checked",!1),K&&c.clearSelection()),K&&V&&c.setSelectionState(null,!0,G),C=t.filter(this.itemSelector).not(this.#b),R===$||R===L||R===F&&!S)C.addClass(d),(this.#g||this.#m)&&C.attr(g,s),E(C,!0),N||!C[0]||V||(this.#o=C[0]),O=!0;else if(R===_){let l,o,n,r,a,h,p=!1,S=t.last();if(h="string"==typeof this.#o?u.find(`[${P}="${i.escapeCSS(this.#o)}"]`):e(this.#o),a=D(h.attr(j)),l=this.#E(h),K){let t=c.getRecordMetadata(x);t&&t.serverOffset&&(r=t.serverOffset+1,r!==a&&(l=-1))}if(o=this.#E(S),o<0&&S.is(this.groupSelector)&&(S=this.#S?S.find(this.itemSelector).first():S.next(),p=!0,o=this.#E(S)),l<0){let t=D(S.attr(j));if(a=r||a,f.virtual){let i=u.find("."+q).toArray();if(t>a)for(let t=0;t<i.length&&(h=e(i[t]).next(),this.#g&&(h=h.children().first()),!(D(h.attr(j))>a));t++);else for(let t=i.length-1;t>=0&&(h=e(i[t]).prev(),this.#g&&(h=h.children().first()),!(D(h.attr(j))<a));t--);l=this.#E(h)}else!f.scroll&&K&&(h=this.#d[t>a?"first":"last"](),l=this.#E(h))}p&&l<o&&(o-=1,S=this.#d.eq(o)),K&&E(S,!0),l>o&&(n=o,o=l,l=n),o+=1,b=[],this.#d.slice(l,o).each(((t,i)=>{let s=e(i);s.is(y)&&!s.is(this.#b)&&b.push(i)})),C=e(b),C.addClass(d),(this.#g||this.#m)&&C.attr(g,s),O=!0}else(R===F&&S||R===T)&&(C.removeClass(d).removeAttr(g),E(C,!1),w&&C[0]===this.#o?(this.#o=null,K&&c.setSelectionState(null,null,k)):N||(this.#o=C[0]),O=!1);if(null!==O&&C.find(h).toggleClass(d,O).filter(M).prop("checked",O),this.multiple&&this.allowSelectAll&&this.#D(),t.length>0&&null!==o&&(m=this.#R(t.first()),o?this.#P(m,l):this.#v(m)),K&&(this.#a=c.getSelectedCount()>0),R===F||R===T||R===_||R===L||R===$&&!i.arrayEqual(v,C)){let t=!r;n?this.#h(t,l):this.#c(t,l)}}contentChanged(i){const l=this.#t.getContainer(),o=this.#t.getModel?this.#t.getModel():null;let n;if(this.#d=null,this.selectAllId&&!this.#p&&t.warn("Select All control not found",this.selectAllId),this.groupSelector&&(n=l.find(this.groupSelector+" "+this.itemSelector),this.#S=n.length>0),this.#S){let t=n.first().parent();"row"===t.attr(A)&&(t=t.parent()),this.#f="grid"===l.attr(A),this.#g="grid"===t.attr(A),this.#m=t.is("table,tbody")}else this.#g="grid"===l.attr(A),this.#m=l.is("table,tbody");if(i?.length&&this.supportsNavigation()){let t=i;if(t=this.#g?t.children(this.itemSelector):t.filter(this.itemSelector),this.#T(t),this.#S){let i=t.first().closest(this.groupSelector).children().first();i.length&&!i.hasClass(x)&&0===e(this.#e).closest(i).length&&this.#T(i)}this.persistSelection&&this.#s&&o&&t.each((function(){const t=e(this),i=t.attr(P),s=o.getRecordMetadata(i);s?.sel&&t.addClass(d)}));let l=t.filter(p);l.find(h).addClass(d).filter(M).prop("checked",!0),(this.#g||this.#m)&&l.attr(g,s),!this.persistSelection&&this.#C&&(t.addClass(d).find(h).addClass(d).filter(M).prop("checked",!0),(this.#g||this.#m)&&t.attr(g,s)),(this.#C||l.length)&&this.#c(!0)}this.#w(),this.multiple&&this.allowSelectAll&&this.#D()}checkSelectionChange(t){this.#$&&this.getSelectedCount()!==t&&this.#c()}#y(){this.#b=C+",.is-aggregate",this.groupSelector&&(this.#b+=","+this.groupSelector)}#w(){const t=this.#t.getContainer();t&&(this.supportsSelection()&&this.multiple&&this.#g?t.attr(m,s):t.removeAttr(m),this.#I?t.attr(S,s):t.removeAttr(S)),this.#l.removeClass("a-TMV--multipleSelection a-TMV--singleSelection a-TMV--kbdNav js-no-select"),this.supportsSelection()?this.#l.addClass(this.multiple?"a-TMV--multipleSelection":"a-TMV--singleSelection"):this.supportsNavigation()&&this.#l.addClass("a-TMV--kbdNav"),this.supportsSelection()||this.#l.addClass("js-no-select")}#E(t){if(!this.#d){const t=this.#t.getContainer();this.#S?this.#d=t.find(this.groupSelector+" "+this.itemSelector):(this.#d=t.children(),this.#g&&(this.#d=this.#d.children()))}return this.#d.index(t)}#j(t){return e(t).closest(this.itemSelector)}#q(t){let i=this.#j(t);return this.#S&&!i[0]&&(i=e(t).closest(this.groupSelector)),i}#H(){let t=this.#t.getContainer().find(this.itemSelector);return t=t.not(this.#b),this.allowSelectHidden||(t=t.filter(y)),t}#F(t){if(this.supportsNavigation()&&!this.#I){let i=e(t.target),s=this.#q(t.target);if(this.#S&&s.is(this.groupSelector)){let t=s.children().first();if(0===i.closest(t).length)return}s[0]&&(this.supportsSelection()&&(i.is(h)&&(t.ctrlKey=!0,t.shiftKey=!1),this.#O(s,t,!0,!1,!1)),!i.closest(":focusable").length||i.is(h)&&s.is(C)?t.preventDefault():i.trigger(I))}}#B(){let t=this.getCurrentItem();return!this.#g||!t.is(this.itemSelector)||this.groupSelector&&t.is(this.groupSelector)||(t=t.parent()),t}#_(t){if(t.isDefaultPrevented()||!this.supportsNavigation()||this.#I)return;const i=e(t.target),s=this.#t?.keyboardIgnoreSelector(),l=t.which;let o,n=!1,r=null;if(!(s&&i.closest(s).length>0)){if(36===l)this.#U(t),n=!0;else if(35===l)this.#z(t),n=!0;else if(40===l||l===this.#n){if(l===this.#n&&t.altKey)return;if(o=this.#B(),this.#S&&o.is(this.groupSelector)?(r=o.find(this.itemSelector).first(),this.#g&&(r=r.parent())):r=o.nextAll(y).first(),r.hasClass(q)&&(r=null),this.#S&&!r?.[0]&&(r=o.closest(this.groupSelector),this.#f&&(r=r.parent()),r=r.next()),!r?.[0]&&this.#t.getPagination().loadMore){let t=this.#l.find(H);if(t[0]){if(t[0].disabled)return;t.trigger(I),n=!0}}this.constrainNavigation&&(n=!0)}else if(38===l||l===this.#r){if(l===this.#r&&(t.altKey||t.metaKey))return;if(i.is(H))this.focus(),n=!0;else{let t=!1;if(o=this.#B(),this.#S&&o.is(this.groupSelector)){let e=this.itemSelector;t=!0,this.#f&&(o=o.parent(),e=this.groupSelector+" "+e),r=o.prev().find(e).last(),this.#g&&(r=r.parent())}else r=o.prevAll(y).first();r.hasClass(q)&&(r=null),!this.#S||t||r?.[0]||(r=o.closest(this.groupSelector))}this.constrainNavigation&&(n=!0),38===l&&t.stopPropagation()}else if(65===l&&(!K&&t.ctrlKey||K&&t.metaKey))this.selectAll(null),n=!0;else if(32===t.which){if(["INPUT","BUTTON"].includes(t.target.nodeName))return;n=!0}r&&r[0]&&(this.#J(r,t),n=!0),n&&t.preventDefault()}}#L(t){if(!t.isDefaultPrevented()&&this.supportsSelection()&&!this.#I&&32===t.which){if("BUTTON"===t.target.nodeName)return;this.#O(this.getCurrentItem(),t,!0,!0),t.preventDefault()}}#G(t){if(this.supportsNavigation()&&!this.#I){let e=t.target,i=this.#q(e);i[0]&&(i.addClass(u),this.#v(e))}}#k(t){if(this.supportsNavigation()&&!this.#I){let e=t.target,i=this.#q(e);i[0]&&i.removeClass(u)}}#V(e,i){const s=this.#t;if(s.isValid()){if(this.selectionStateItem){let e=apex.item(this.selectionStateItem);if(e.node){let t,i=this.getSelectedValues();if(i)if(s.getModel){let e=s.getModel();t=i.map((t=>e.getRecordId(t))).join(":")}else t=i.join(":");else t="";e.setValue(t)}else t.warn("Item not found ",this.selectionStateItem)}s.updateStatus(),e&&s.selectionChanged(i)}}#D(){let t;if(this.persistSelection){t=this.#t.getModel().getSelectionState().selectAll}else{let e=this.#H();t=e.length>0&&e.length===e.filter(p).length}this.#C=t,this.#p&&(this.#p.is(M)?this.#p.prop("checked",t):this.#p.toggleClass(d,t).attr(f,t?s:l))}#T(t){t.add(t.find(":tabbable")).addClass(x).attr(w,-1)}#v(t){let e,i=this.getCurrentItem();this.#e=t,e=this.getCurrentItem(),e[0]!==i[0]&&(this.#T(i),this.disabled||(this.#S&&e.is(this.groupSelector)&&(e=e.children().first()),e.add(e.find(v)).attr(w,0).removeClass(x)),setTimeout((()=>{this.#t.currentItemChanged()}),1))}#R(t){if(t.is(this.groupSelector)){const e=t,i=e.children().first();return this.#S?i[0]:e[0]}let e=t.first().find("input.u-selector");return e.length?e[0]:t[0]}#K(t){const s=this.#t,l=null!=s.getModel?s.getModel():null,o=this.dataTransferFormats,n=i.htmlBuilder(),r=s.getContainer(),a=this.getSelection(),c=this.getSelectedValues();if(c.length){let t=0,i=a.eq(t);o.forEach((t=>{t.writer.begin(r,a,l,l?c:null)}));for(let s=0;s<c.length;s++){let r,h,u,d,p,g,f=!0;l?(h=c[s],u=l.getRecordId(h),d=i?.attr(P),u&&d===u?r=i:d&&(p=l.getRecordMetadata(d),h===p?.record?r=i:p=null),r?(i=null,t+=1,t<a.length&&(i=a.eq(t))):(p=!p&&u?l.getRecordMetadata(u):{sel:!0,record:h},g=s,p?.index&&(g=p.index),this.#t.renderItem(n,h,g,u,p),r=e(n.toString()),n.clear(),f=!1)):(r=a.eq(t),t+=1),this.clipboardValue&&(r=this.clipboardValue(s,r,l,h,u),f=!0);let S,m=f?r.clone():r;m.find("script").remove(),S=m[0].querySelectorAll("*");for(const t of S)for(let e of t.getAttributeNames())e=e.toLowerCase(),e.startsWith("on")?t.removeAttribute(e):"href"===e&&t.getAttribute(e).toLowerCase().includes("javascript:")&&t.setAttribute(e,"#");o.forEach((function(t){t.writer.item(s,m,h,u)}))}o.forEach((t=>{t.writer.end()}))}o.forEach((e=>{t.setData(e.format,e.writer.toString())}))}_copy(t){this.#K(t)}#U(t){const e=this.#t;let i,s=this.#g?"[role='row']":this.itemSelector;e.getPagination().scroll&&e.firstPage(),this.#S&&(s=this.#f?"[role='row']":this.groupSelector),i=e.getContainer().children(s).filter(y).first(),i[0]&&this.#J(i,t)}#z(t){const e=this.#t,i=()=>{this.#J(l,{type:"keydown",shiftKey:t.shiftKey,ctrlKey:t.ctrlKey})},s=()=>{let t=e.getContainer();return this.#S&&(t=t.find(this.groupSelector+" "+this.itemSelector).last().parent(),this.#f&&(t=t.parent())),t};let l,o=this.#g?"[role='row']":this.itemSelector;e.getPagination().scroll&&e.lastPage(),l=s().children(y).last(),l.hasClass(q)?(l=null,e.waitForPageChange().then((()=>{l=s().children(o).filter(y).last(),i()}))):(l=l.filter(o).last(),i())}#J(t,e){const i=this.itemNavigationMode===E&&this.selectionFollowsFocus,s=this.itemNavigationMode===E&&!this.selectionFollowsFocus&&this.multiple,l=()=>{i||s&&e.shiftKey?this.#O(t,e,!0,!0):this.#P(this.#R(t),e)};if(this.groupSelector){let e=t;if(this.#f&&"row"===e.attr(A)&&(e=e.children().first()),e.is(this.groupSelector))return t=e,void l()}this.#g&&"row"===t.attr(A)&&(t=t.children().first()),l()}#P(t,i){if("keydown"===i?.type){let i=this.itemSelector;this.groupSelector&&(i+=","+this.groupSelector),t.focus({preventScroll:!0});let s,l=e(t).closest(i);this.groupSelector&&l.is(this.groupSelector)&&(l=l.children().first()),s=l[0],s||(s=t),s.scrollIntoView({block:"nearest"})}else e(t).trigger(I)}static NAV_MODES=V},getAttribute:n,_getCreateOptions:function(){let t=this.element[0],e={};if(!n(t,"defaults"))for(const[i]of Object.entries(this.options)){let s=n(t,i.replace(a,c));null!=s&&(e[i]=s)}return e}}}(apex.debug,apex.jQuery,apex.util);