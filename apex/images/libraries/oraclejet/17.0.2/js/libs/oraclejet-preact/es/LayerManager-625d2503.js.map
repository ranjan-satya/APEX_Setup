{"version":3,"file":"LayerManager-625d2503.js","sources":["../../src/UNSAFE_Layer/LayerManager.tsx"],"sourcesContent":["/**\n * The LayerManager wraps your application and creates two adjacent divs for\n * rendering your application and housing Layers.\n */\nimport { ComponentChildren } from 'preact';\nimport { useCallback, useState } from 'preact/compat';\nimport { LayerContext, LayerContextProps } from './LayerContext';\nimport LayerHost from './LayerHost';\n\ntype LayerManagerProps = {\n  children?: ComponentChildren;\n};\n\nexport function LayerManager({ children }: LayerManagerProps) {\n  const [defaultHost, setDefaultHost] = useState<Element>();\n  //const context = useContext(LayerContext);\n  const defaultHostRef = useCallback((el: Element | null) => {\n    // ref callbacks fire after the component has been unnmounted so we do not\n    // want to set state in this use-case\n    if (el !== null) {\n      setDefaultHost(el);\n    }\n  }, []);\n\n  return (\n    <LayerContext.Consumer>\n      {(value: LayerContextProps) => {\n        let defaultHostContext = {};\n        if (defaultHost) {\n          defaultHostContext = {\n            getRootLayerHost: () => {\n              return defaultHost;\n            },\n            getLayerHost: () => {\n              return defaultHost;\n            }\n          };\n        }\n        const layerContext = value.getLayerHost ? value : defaultHostContext;\n        return (\n          <LayerContext.Provider value={layerContext}>\n            {children}\n            {!value.getLayerHost && <LayerHost ref={defaultHostRef} />}\n          </LayerContext.Provider>\n        );\n      }}\n    </LayerContext.Consumer>\n  );\n}\n"],"names":["_jsx","_jsxs"],"mappings":";;;;;AAagB,SAAA,YAAY,CAAC,EAAE,QAAQ,EAAqB,EAAA;IAC1D,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,GAAG,QAAQ,EAAW,CAAC;;AAE1D,IAAA,MAAM,cAAc,GAAG,WAAW,CAAC,CAAC,EAAkB,KAAI;;;AAGxD,QAAA,IAAI,EAAE,KAAK,IAAI,EAAE;YACf,cAAc,CAAC,EAAE,CAAC,CAAC;SACpB;KACF,EAAE,EAAE,CAAC,CAAC;IAEP,QACEA,IAAC,YAAY,CAAC,QAAQ,EACnB,EAAA,QAAA,EAAA,CAAC,KAAwB,KAAI;YAC5B,IAAI,kBAAkB,GAAG,EAAE,CAAC;YAC5B,IAAI,WAAW,EAAE;AACf,gBAAA,kBAAkB,GAAG;oBACnB,gBAAgB,EAAE,MAAK;AACrB,wBAAA,OAAO,WAAW,CAAC;qBACpB;oBACD,YAAY,EAAE,MAAK;AACjB,wBAAA,OAAO,WAAW,CAAC;qBACpB;iBACF,CAAC;aACH;AACD,YAAA,MAAM,YAAY,GAAG,KAAK,CAAC,YAAY,GAAG,KAAK,GAAG,kBAAkB,CAAC;YACrE,QACEC,IAAC,CAAA,YAAY,CAAC,QAAQ,EAAC,EAAA,KAAK,EAAE,YAAY,EACvC,QAAA,EAAA,CAAA,QAAQ,EACR,CAAC,KAAK,CAAC,YAAY,IAAID,GAAA,CAAC,SAAS,EAAA,EAAC,GAAG,EAAE,cAAc,EAAA,CAAI,CACpC,EAAA,CAAA,EACxB;SACH,EAAA,CACqB,EACxB;AACJ;;;;"}