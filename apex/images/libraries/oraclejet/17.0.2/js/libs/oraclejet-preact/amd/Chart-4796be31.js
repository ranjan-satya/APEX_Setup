define(['exports', 'preact/jsx-runtime', './PRIVATE_Chart/themes/ChartStyles.css', './TrackResizeContainer-905caab2', './useTextDimensions-b37344b4', './useCssVars-948d1e7c', 'preact/hooks', './Gridlines-11a94c28', './useId-c9578d26', './Axis-7e8809af', './useChartViewport-ca564baa', './layoutUtils-09c68ca9', './useChartNav-5ff92999', './mergeProps-bcfa6a92', './ScrollBar-4046f84f', './useSelectDrill-f2ae347c', './useUser-6dd85af9', './useTestId-82cf22a4', './cssUtils-b0572a20', './useChartContextMenu-c50617f2', './eventsUtils-5d567a9d', './accUtils-1557920a', 'preact/compat', './LayerHost-eab40731', 'css!./LayerStyles.styles.css', './Floating-85851b1a', 'css!./useDatatip.styles.css', './datatipUtils-1b8ab042', './util-5bb1f200', './useTooltip-d28e9b0f', './useTooltipControlled-abf886f2', './useChartMarquee-0e818e77', './useVisTouchResponse-36416652', './stringUtils-0ae982c2'], (function(e,t,o,s,i,n,r,a,l,d,u,c,x,p,g,f,I,h,m,C,y,S,v,b,A,D,M,P,w,T,R,V,G,j){"use strict";function E(e,t,o){const s=e.groupIndex+1;if(!(s>=t))return o(s)?{groupIndex:s}:E({groupIndex:s},t,o)}function N(e,t){const o=e.groupIndex-1;if(!(o<0))return t(o)?{groupIndex:o}:N({groupIndex:o},t)}const k=m.getChartVars();function F({width:e,height:s,selectedIds:m,hiddenIds:S,hideAndShowBehavior:v="none",orientation:b="vertical",xAxis:A,yAxis:D,plotArea:M,dragMode:P="user",series:R,groups:F,isStacked:z=!1,getDataItem:B,selectionMode:U="none",drilling:L="off",dataCursorPosition:q,onSelectionChange:H,isDataCursorEnabled:O,dataCursorStyle:W,onViewportChange:$,onDataCursorPositionChange:Z,onItemDrill:_,onGroupDrill:J,onItemHover:K,onItemFocus:Q,datatip:X,zoomAndScroll:Y="off",offset:ee,getNavUtil:te,getDataItemPos:oe,getGapRatio:se,valueFormats:ie,findNearest:ne,getMarkerInfo:re,isRtl:ae,children:le,testId:de,renderGridLinesInFront:ue,contextMenuConfig:ce,...xe}){const pe=h.useTestId(de),ge=r.useRef(null),fe="horizontal"===b,{xAxisPosition:Ie,yAxisPosition:he}=c.getAxesPosition(D,fe,ae),{resolvedVars:me,cssContent:Ce}=n.useCssVars(k),ye=Array.from(Array(12)).map(((e,t)=>me[`color${t+1}`])),{textMeasureContent:Se,getTextDimensions:ve}=i.useTextDimensions();let be=c.getAvailSpace(e,s);const Ae=c.getScrollBarSpace(be,Y,Ie);let De=Ae.scrollDims;be=Ae.availSpace;const Me=new Set(S),{locale:Pe}=I.useUser(),{xProps:we,xScale:Te,xViewportExtent:Re,xAxisExtent:Ve,xIndexExtent:Ge,yViewportExtent:je,yAxisExtent:Ee,groupWidth:Ne,yProps:ke,yScale:Fe,yMaxDim:ze,yMajorTicks:Be,yMinorTicks:Ue,plotAreaSpace:Le,idToDataMap:qe}=c.getLayoutInfo(R,F,B,A,D,be,Me,v,fe,ae,z,me.labelFontSize,ee,Pe,ve);De=c.updateScrollBarSpace(De,"bottom"===Ie,ae,ze);const He=se(Ge.startIndex,Ge.endIndex),Oe=te(Ge.startIndex,Ge.endIndex),We=we.tickLabels.map((({index:e})=>e+Ge.startIndex)),{getNextNavGroup:$e,getDefaultNavGroup:Ze}=function(e,t,o,s,i){const n=o=>{const i=e[t[o]].drilling;return("on"===s||"groupsOnly"===s)&&"off"!=i},r=e=>o.startIndex>t[e.groupIndex]?(e.groupIndex=0,e):o.endIndex<t[e.groupIndex]?(e.groupIndex=t.length-1,e):void 0;return{getDefaultNavGroup:r,getNextNavGroup:(e,o)=>{let s=r(e);return s||(s="ArrowRight"===o?i?N(e,n):E(e,t.length,n):i?E(e,t.length,n):N(e,n),s||e)}}}(F,We,Ge,L,ae),{cursor:_e,marqueeProps:Je,marqueeContent:Ke,toggleButtonContent:Qe,isPointInsideMarquee:Xe,dragMode:Ye}=V.useChartMarquee({plotAreaSpace:Le,dragMode:P,chartWidth:e,isMultiSelection:"multiple"===U,onViewportChange:$,isZoomScroll:"live"===Y,xAxisExtent:Ve,xScale:Te,selectedIds:m,getDataById:e=>qe.get(e),onSelectionChange:H,viewportMax:Re.viewportMax,viewportMin:Re.viewportMin,isRtl:ae}),{touchResponse:et,touchResponseStyle:tt}=G.useVisTouchResponse({type:"auto",supportsTouchDragGestures:"off"!==Ye,rootRef:ge}),{activeId:ot,focusedItemInfo:st,hoveredItemInfo:it,focusedGroupInfo:nt,navProps:rt,onFocusUpdate:at}=x.useChartNav({rootRef:ge,getNextChartItem:Oe,getNextNavGroup:$e,getDefaultNavGroup:Ze,touchResponse:et,onItemHover:K,onItemFocus:Q,drilling:L,xIndexExtent:Ge}),{tooltipContent:lt,tooltipProps:dt}=function({getTextAndBounds:e,width:t,isRtl:o}){const[s,i]=r.useState(),n=r.useRef(),{tooltipContent:a,tooltipProps:l}=T.useTooltip({text:s,position:"top-start",offset:w.calculateOffset(o,t,n.current)});return{tooltipContent:a,tooltipProps:p.mergeProps({onPointerMove:t=>{const o=e(t.target);o?(n.current=o.bounds,i(o.text)):i(void 0)}},l)}}({getTextAndBounds:e=>{if(e!=ge.current){const t=y.getElementData(ge,e),o=t?.ojText;if(!o)return;if(o===A?.title)return{text:o,bounds:we.titleProps?.dims};if(o===D?.title)return{text:o,bounds:ke.titleProps?.dims};if(t?.ojGroupIndex){const e=parseInt(t.ojGroupIndex);return{bounds:we.tickLabels[e].dims,text:o}}}if(e===ge.current&&nt.isFocusVisible){const e=F[nt.groupIndex];return{bounds:we.tickLabels[nt.groupIndex].dims,text:e.name||e.id}}},width:e,isRtl:ae}),{selectDrillProps:ut,selectionContent:ct}=f.useSelectDrill({selectionMode:U,selection:[...m],onChange:H,rootRef:ge,drilling:L,onItemDrill:_,onGroupDrill:J,focusedGroupInfo:nt,focusedItemInfo:st,groups:F,getDataItem:B,getDataById:e=>qe.get(e)}),xt=u.useChartViewport({rootRef:ge,width:e,height:s,xViewportExtent:Re,yViewportExtent:je,xAxisExtent:Ve,yAxisExtent:Ee,xScale:Te,yScale:Fe,plotAreaSpace:Le,isRtl:ae,isHoriz:fe,zoomAndScroll:Y,onViewportChange:$}),pt=ne(Te,Fe,Ne,He),gt=oe(Te,Fe,Ne,He),{datatipContent:ft,dataCursorContent:It,datatipProps:{"aria-describedby":ht,...mt}}=f.useChartDatatipAndCursor({series:R,groups:F,width:e,height:s,findNearest:pt,plotAreaSpace:Le,onDataCursorPositionChange:Z,isDataCursorEnabled:O,dataCursorPosition:q,dataCursorStyle:W,hoveredItemInfo:it,focusedItemInfo:st,getDataItem:B,getMarkerInfo:re,getDataItemPos:gt,datatip:X,valueFormats:ie,isHoriz:fe,touchResponse:et,isDisabled:"off"!=Ye,xScale:Te,yScale:Fe,timeAxisType:A?.timeAxisType}),Ct=l.useId(),{viewportMin:yt,viewportMax:St}=Re,{startIndex:vt,endIndex:bt}=Ge,At=t.jsx(a.Gridlines,{plotArea:M,yMinorTicks:Ue,xScale:Te,yScale:Fe,isLog:"log"===D?.scale,xViewportMin:yt,xViewportMax:St,yTicks:Be,yAxisPosition:he}),{contextMenuContent:Dt,contextMenuProps:Mt}=C.useChartContextMenu({series:R,groups:F,getDataItem:B,focusedItemInfo:st,rootRef:ge,xAxisTitle:A?.title,yAxisTitle:D?.title,contextMenuConfig:ce,onContextMenuDismissed:e=>{"keyboard"===e&&at()}}),Pt=p.mergeProps(rt,ut,xt,mt,Je,dt,Mt);return t.jsxs("div",{tabIndex:0,ref:ge,"aria-activedescendant":ot,"aria-label":xe["aria-label"],"aria-labelledby":xe["aria-labelledby"],"aria-describedby":j.merge([xe["aria-describedby"],ht]),style:{width:e,height:s,...tt},role:"application",className:o.styles.outline,...pe,...Pt,children:[t.jsxs("svg",{width:"100%",height:"100%",children:[t.jsx("clipPath",{id:`${Ct}`,children:t.jsx("rect",{...Le})}),t.jsx(a.PlotArea,{color:M?.color,yScale:Fe,cursor:_e,isLog:"log"===D?.scale,availSpace:Le,xAxisPosition:Ie}),!ue&&At,t.jsx(d.Axis,{...ke,axisPosition:he,isRtl:ae}),t.jsx(d.Axis,{...we,isRtl:ae,axisPosition:Ie,isTextInteractive:e=>{if(null!=A?.timeAxisType)return!1;const t=F[e].drilling;return"on"===t||"off"!=t&&("on"===L||"groupsOnly"===L)},activeId:ot,focusedGroupIndex:nt.isFocusVisible?nt.groupIndex:void 0}),t.jsxs("g",{"clip-path":`url(#${Ct})`,children:[le({xStartIndex:vt,xEndIndex:bt,colors:ye,xScale:Te,yScale:Fe,isPointInsideMarquee:Xe,defaultFontSize:me.labelFontSize,gapRatio:He,activeId:ot,focusedItemInfo:st,hoveredItemInfo:it,getTextDimensions:ve,groupWidth:Ne}),ue&&At,It]}),"live"===Y&&t.jsx(g.ScrollBar,{availSpace:De,isRtl:ae,viewport:Re,axisExtent:Ve,isHoriz:"bottom"===Ie}),Ke]}),Qe,Se,Ce,ft,lt,Dt,ct]})}e.Chart=function({width:e,height:i,...n}){return t.jsx(s.TrackResizeContainer,{width:e,height:i,class:o.dimensionStyle,children:(e,o)=>e||o?t.jsx(F,{width:e,height:o,...n}):void 0})}}));
//# sourceMappingURL=Chart-4796be31.js.map
