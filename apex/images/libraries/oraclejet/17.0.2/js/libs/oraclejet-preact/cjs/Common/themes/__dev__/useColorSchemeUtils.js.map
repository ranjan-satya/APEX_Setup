{"version":3,"file":"useColorSchemeUtils.js","sources":["../../../../../../../node_modules/ramda/es/internal/_reduce.js","../../../../../../../node_modules/ramda/es/internal/_identity.js","../../../../../../../node_modules/ramda/es/identity.js","../../../../../../../node_modules/ramda/es/pipeWith.js","../../../../../../../node_modules/ramda/es/isNotNil.js","../../../../../src/Common/themes/__dev__/useColorSchemeUtils.ts"],"sourcesContent":["import _arrayReduce from \"./_arrayReduce.js\";\nimport _createReduce from \"./_createReduce.js\";\n\nfunction _iterableReduce(reducer, acc, iter) {\n  var step = iter.next();\n\n  while (!step.done) {\n    acc = reducer(acc, step.value);\n    step = iter.next();\n  }\n\n  return acc;\n}\n\nfunction _methodReduce(reducer, acc, obj, methodName) {\n  return obj[methodName](reducer, acc);\n}\n\nvar _reduce =\n/*#__PURE__*/\n_createReduce(_arrayReduce, _methodReduce, _iterableReduce);\n\nexport default _reduce;","export default function _identity(x) {\n  return x;\n}","import _curry1 from \"./internal/_curry1.js\";\nimport _identity from \"./internal/_identity.js\";\n/**\n * A function that does nothing but return the parameter supplied to it. Good\n * as a default or placeholder function.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig a -> a\n * @param {*} x The value to return.\n * @return {*} The input value, `x`.\n * @example\n *\n *      R.identity(1); //=> 1\n *\n *      const obj = {};\n *      R.identity(obj) === obj; //=> true\n * @symb R.identity(a) = a\n */\n\nvar identity =\n/*#__PURE__*/\n_curry1(_identity);\n\nexport default identity;","import _arity from \"./internal/_arity.js\";\nimport _curry2 from \"./internal/_curry2.js\";\nimport head from \"./head.js\";\nimport _reduce from \"./internal/_reduce.js\";\nimport tail from \"./tail.js\";\nimport identity from \"./identity.js\";\n/**\n * Performs left-to-right function composition using transforming function. The first function may have\n * any arity; the remaining functions must be unary.\n *\n * **Note:** The result of pipeWith is not automatically curried. Transforming function is not used on the\n * first argument.\n *\n * @func\n * @memberOf R\n * @since v0.26.0\n * @category Function\n * @sig ((* -> *), [((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)]) -> ((a, b, ..., n) -> z)\n * @param {Function} transformer The transforming function\n * @param {Array} functions The functions to pipe\n * @return {Function}\n * @see R.composeWith, R.pipe\n * @example\n *\n *      const pipeWhileNotNil = R.pipeWith((f, res) => R.isNil(res) ? res : f(res));\n *      const f = pipeWhileNotNil([Math.pow, R.negate, R.inc])\n *\n *      f(3, 4); // -(3^4) + 1\n * @symb R.pipeWith(f)([g, h, i])(...args) = f(i, f(h, g(...args)))\n */\n\nvar pipeWith =\n/*#__PURE__*/\n_curry2(function pipeWith(xf, list) {\n  if (list.length <= 0) {\n    return identity;\n  }\n\n  var headList = head(list);\n  var tailList = tail(list);\n  return _arity(headList.length, function () {\n    return _reduce(function (result, f) {\n      return xf.call(this, f, result);\n    }, headList.apply(this, arguments), tailList);\n  });\n});\n\nexport default pipeWith;","import isNil from \"./isNil.js\";\nimport _curry1 from \"./internal/_curry1.js\";\n/**\n * Checks if the input value is not `null` and not `undefined`.\n *\n * @func\n * @memberOf R\n * @since v0.29.0\n * @category Type\n * @sig * -> Boolean\n * @param {*} x The value to test.\n * @return {Boolean} `true` if `x` is not `undefined` or not `null`, otherwise `false`.\n * @example\n *\n *      R.isNotNil(null); //=> false\n *      R.isNotNil(undefined); //=> false\n *      R.isNotNil(0); //=> true\n *      R.isNotNil([]); //=> true\n */\n\nvar isNotNil =\n/*#__PURE__*/\n_curry1(function isNotNil(x) {\n  return !isNil(x);\n});\n\nexport default isNotNil;","import { curry, curryN, isNotNil, pipe, pipeWith } from 'ramda';\nimport { getContrast, getLuminance, parseToRGBA, rgbaToHex } from '#utils/PRIVATE_colorUtils';\nimport { usePropertyValue } from '#hooks/PRIVATE_usePropertyValue';\nimport { useCallback } from 'react';\n\ntype ColorEncoding = (typeof colorEncodings)[number];\nconst colorEncodings = ['RGB', 'Hex'] as const;\n\nconst useColorUtils = ({\n  backgroundColor,\n  colorEncoding\n}: {\n  backgroundColor: string;\n  colorEncoding: ColorEncoding;\n}) => {\n  const [setRef, getPropertyValue] = usePropertyValue();\n  const contrastRatio = useCallback(\n    (token: string) =>\n      getContrastRatio(\n        tokenToLuminance(getPropertyValue, backgroundColor),\n        tokenToLuminance(getPropertyValue, token)\n      ),\n    [backgroundColor, getPropertyValue]\n  );\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const color = useCallback(\n    pipe(\n      tokenFromVar,\n      getPropertyValue,\n      colorEncoding === 'RGB' ? toRGBString : pipeWhileNotNil([parseToRGBA, rgbaToHex])\n    ),\n    [colorEncoding, getPropertyValue]\n  );\n\n  return {\n    setRef,\n    getColor: color,\n    getContrastRatio: contrastRatio\n  };\n};\n\n// Removes CSS var function from color.\nconst tokenFromVar = (str: string) => str.replace(/var\\(|\\)/g, '');\n\n// Adds rgb function to color.\nconst toRGBString = (str: string) =>\n  /rgb(a?)\\(/.test(str) ? str : str.split(',').length === 4 ? `rgba(${str})` : `rgb(${str})`;\n\nconst tokenToLuminance = curry((propertyValue: (s: string) => string, colorString: string) =>\n  pipe(tokenFromVar, propertyValue, getLuminance)(colorString)\n);\nconst getContrastRatio = curryN(2, (l1?: number, l2?: number) =>\n  isNotNil(l1) && isNotNil(l2) ? getContrast(l1, l2).toFixed(2) : 'NaN'\n);\nconst pipeWhileNotNil = pipeWith((f, res) => (isNotNil(res) ? f(res) : res));\n\nexport type { ColorEncoding };\nexport { colorEncodings, tokenFromVar, useColorUtils };\n"],"names":["_createReduce","_arrayReduce","_curry1","_curry2","head","tail","_arity","isNil","usePropertyValue","useCallback","pipe","parseToRGBA","rgbaToHex","curry","getLuminance","curryN","isNotNil","getContrast","pipeWith"],"mappings":"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"}