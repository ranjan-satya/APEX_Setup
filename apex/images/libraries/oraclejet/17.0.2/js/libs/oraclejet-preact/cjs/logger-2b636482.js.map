{"version":3,"file":"logger-2b636482.js","sources":["../../src/utils/UNSAFE_logger/logLevels.ts","../../src/utils/UNSAFE_logger/sessionStorage.ts","../../src/utils/UNSAFE_logger/logger.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2011 %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\n/**\n * Log level none (least verbose)\n */\nexport const NONE = 0;\n/**\n * Log level error\n */\nexport const ERROR = 1;\n/**\n * Log level warn\n */\nexport const WARN = 2;\n/**\n * Log level info\n */\nexport const INFO = 3;\n/**\n * Log level log\n */\nexport const LOG = 4;\n","/**\n * @license\n * Copyright (c) 2011 %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { NONE, ERROR, WARN, INFO, LOG } from './logLevels';\nimport { LogLevelType } from './logger';\n\n/*\n * Helper method that retrieves and parses session storage setting\n */\nconst _getSessionStorage = () => {\n  let logLevel: LogLevelType | undefined;\n  try {\n    const sessionValue = window?.sessionStorage?.getItem('ojet.logLevel');\n    switch (sessionValue) {\n      case 'none':\n        logLevel = NONE;\n        break;\n      case 'error':\n        logLevel = ERROR;\n        break;\n      case 'warning':\n        logLevel = WARN;\n        break;\n      case 'info':\n        logLevel = INFO;\n        break;\n      case 'log':\n        logLevel = LOG;\n        break;\n      default:\n        logLevel = undefined;\n    }\n    // eslint-disable-next-line no-empty\n  } catch (e) {}\n\n  return logLevel;\n};\n\n/**\n * SessionStorage setting\n */\nexport const sessionStorageLevel = _getSessionStorage();\n","/**\n * @license\n * Copyright (c) 2011 %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { sessionStorageLevel } from './sessionStorage';\nimport { NONE, ERROR, WARN, INFO, LOG } from './logLevels';\n\n/**\n * Logger object that writes into the native browser console or a custom writer, if a custom writer is specified.\n * When any of the logging methods is called, it compares the level of the message to the level of the logger and\n * logs the message if the logger level is at least as verbose as the message level.\n *\n * If the logging level is changed at a later point, the Logger will use the modified level for the subsequent log operations.\n *\n * The logging level can be overridden via sessionStorage.setItem() call for the current browser session.\n * Use 'ojet.logLevel' as the key with one of the following values: 'none' (least verbose), 'error', 'warning', 'info', 'log' (most verbose).\n * Set the value in the browser console and refresh the browser in order for the value to take effect.\n */\n\n/**\n * Acceptable values for the log level\n */\nexport type LogLevelType = typeof NONE | typeof ERROR | typeof WARN | typeof INFO | typeof LOG;\n\n/**\n * Acceptable values for the logger method\n */\ntype LogMethodType = 'log' | 'info' | 'warn' | 'error';\n\n/**\n * A type for the function that generates arguments for the Logger methods - 'log', 'info', 'warn', 'error', 'writer'.\n * You can pass this function to the logger method to avoid argument manipulation before log level is checked.\n */\ntype LogArgsFn = () => any | any[];\n\n/**\n * Function type for the Logger methods - 'log', 'info', 'warn', 'error', 'writer'.\n * The first argument might be a function that returns arguments for logging, or\n * it might be a JavaScript string containing zero or more substitution strings.\n * When a callback function is specified as an argument, it will be lazily invoked\n * only if the logger level is at least as verbose as the message level.\n * We recommend using a function callback in Logger calls\n * to skip expensive manipulations of string arguments when log level is insuficient.\n */\ntype LogFn = (message?: any | LogArgsFn, ...optionalParams: any[]) => void;\n\n/**\n * A type of the custom writer that can be passed to the Preact logger.\n * The writer should implement the following methods in order to be used - log, warn, info, error.\n */\nexport type LoggerType = {\n  log: LogFn;\n  warn: LogFn;\n  info: LogFn;\n  error: LogFn;\n  write?: never;\n};\n/**\n * An alternative type of the custom writer that can be passed to the Preact logger.\n * The writer should implement method 'write' in order to be used.\n * The method will get log level as a first argument in addition to other logging arguments.\n */\nexport type LoggerAltType = {\n  write: (logLevel: LogLevelType, message?: any | LogArgsFn, ...optionalParams: any[]) => void;\n  log?: never;\n  warn?: never;\n  info?: never;\n  error?: never;\n};\n\nlet _logLevel: LogLevelType = ERROR;\nlet _writer: LoggerType | LoggerAltType | null = null;\n\n/**\n * Sets log level\n * @param level NONE=0, ERROR=1, WARN=2, INFO=3, LOG=4\n */\nexport const setLogLevel = (level: LogLevelType) => {\n  _logLevel = level;\n};\n\n/**\n * Gets log level\n * @returns  NONE=0, ERROR=1, WARN=2, INFO=3, LOG=4\n */\nexport const getLogLevel = (): LogLevelType => {\n  return sessionStorageLevel === undefined ? _logLevel : sessionStorageLevel;\n};\n\n/**\n * Sets a custom writer for the logger. The custom writer should be an object\n * that either implements 'log', 'info', 'warn' and 'error' methods\n * or that implements 'write' method used for all levels of logging.\n * @param writer\n */\nexport const setLogWriter = (writer: LoggerType | LoggerAltType) => {\n  _writer = writer;\n};\n\nconst _getWriter = () => {\n  let writer;\n  if (_writer) {\n    writer = _writer;\n  } else if (typeof window !== 'undefined' && window.console !== undefined) {\n    writer = window.console;\n  }\n  return writer;\n};\n\nconst _write = (\n  method: LogMethodType,\n  logLevel: LogLevelType,\n  message?: any,\n  ...optionalParams: any[]\n) => {\n  if (getLogLevel() < logLevel) {\n    return;\n  }\n  const writer = _getWriter();\n  if (writer) {\n    let args = [message];\n    if (optionalParams) {\n      args = args.concat(optionalParams);\n    }\n    if (args.length === 1 && args[0] instanceof Function) {\n      const msg = args[0]();\n      args = Array.isArray(msg) ? msg : [msg];\n    }\n\n    if ((writer as LoggerAltType)['write']) {\n      args.unshift(logLevel);\n      (writer as LoggerAltType)['write'](...(args as [LogLevelType, any, any]));\n    } else {\n      (writer as LoggerType)[method].apply(writer, args);\n    }\n  }\n};\n\n/**\n * Outputs log messages to the browser console or custom writer.\n */\nexport const log: LogFn = _write.bind(null, 'log', LOG);\n/**\n * Outputs info messages to the browser console or custom writer.\n */\nexport const info: LogFn = _write.bind(null, 'info', INFO);\n/**\n * Outputs warn messages to the browser console or custom writer.\n */\nexport const warn: LogFn = _write.bind(null, 'warn', WARN);\n/**\n * Outputs error messages to the browser console or custom writer.\n */\nexport const error: LogFn = _write.bind(null, 'error', ERROR);\n"],"names":[],"mappings":"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"}