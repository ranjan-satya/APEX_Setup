{"version":3,"file":"UNSAFE_withThemeProps.js","sources":["../../../src/hoc/UNSAFE_withThemeProps/withThemeProps.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { createRef, ComponentType } from 'preact';\nimport { useEffect, forwardRef, Ref } from 'preact/compat';\nimport { EnvironmentProvider } from '#UNSAFE_Environment';\nimport {\n  ThemeModifiers as Props,\n  DARK_CLASS,\n  INVERT_CLASS,\n  LIGHT_CLASS,\n  COLORSCHEME_DEPENDENT_CLASS,\n  SCALE_SM_CLASS,\n  SCALE_MD_CLASS,\n  SCALE_LG_CLASS,\n  SCALE_DEPENDENT_CLASS,\n  DENSITY_COMPACT_CLASS,\n  DENSITY_STANDARD_CLASS,\n  DENSITY_DEPENDENT_CLASS\n} from '#UNSAFE_Theme';\n\n/**\n * Higher Order Component that allows you to wrap an existing component with an EnvironmentProvider\n * containing the desired colorScheme, scale, and density context. The returned component contains all the props\n * of the wrapped component with the addition of the `colorScheme`, `scale`, and `density` props.\n *\n * This should be used when nesting an alternate colorScheme (ie dark palette sub-form within a global light\n * palette). You can use this HOC instead of manually applying colorScheme classnames to DOM elements. This also\n * eliminates the need to add additional DOM wrapper elements.\n */\nconst withThemeProps = <T extends object>(WrappedComponent: ComponentType<T>) => {\n  const displayName =\n    WrappedComponent.displayName || WrappedComponent.name || 'ComponentWithProvider';\n\n  const ComponentWithProvider = forwardRef(\n    ({ colorScheme, scale, density, ...props }: T & Partial<Props>, ref) => {\n      // if no ref is supplied, create one\n      const wrapRef = (ref || createRef()) as Ref<unknown>;\n\n      useEffect(() => {\n        if (wrapRef.current) {\n          const { classList } = wrapRef.current as HTMLElement;\n          if (!classList) return;\n\n          // dynamically apply the appropriate colorscheme classname to ref element\n          if (colorScheme) {\n            const schemes = [\n              LIGHT_CLASS,\n              DARK_CLASS,\n              INVERT_CLASS,\n              COLORSCHEME_DEPENDENT_CLASS\n            ] as const;\n            schemes.map((current) => classList.remove(current));\n\n            if (colorScheme === 'dark') {\n              classList.add(DARK_CLASS);\n              classList.add(INVERT_CLASS);\n            } else {\n              classList.add(LIGHT_CLASS);\n            }\n            classList.add(COLORSCHEME_DEPENDENT_CLASS);\n          }\n\n          // dynamically apply the appropriate scale classname to ref element\n          if (scale) {\n            const scales = [SCALE_SM_CLASS, SCALE_MD_CLASS, SCALE_LG_CLASS, SCALE_DEPENDENT_CLASS];\n            scales.map((current) => classList.remove(current));\n            classList.add(\n              `${\n                scale === 'sm' ? SCALE_SM_CLASS : scale === 'md' ? SCALE_MD_CLASS : SCALE_LG_CLASS\n              }`\n            );\n            classList.add(SCALE_DEPENDENT_CLASS);\n          }\n\n          // dynamically apply the appropriate density classname to ref element\n          if (density) {\n            const densities = [\n              DENSITY_COMPACT_CLASS,\n              DENSITY_STANDARD_CLASS,\n              DENSITY_DEPENDENT_CLASS\n            ];\n            densities.map((current) => classList.remove(current));\n            classList.add(\n              `${density === 'compact' ? DENSITY_COMPACT_CLASS : DENSITY_STANDARD_CLASS}`\n            );\n            classList.add(DENSITY_DEPENDENT_CLASS);\n          }\n        }\n      }, [wrapRef, colorScheme, scale, density]);\n\n      // wrap component with new colorscheme context\n      return (\n        <EnvironmentProvider environment={{ colorScheme, scale, density }}>\n          <WrappedComponent {...(props as T)} ref={wrapRef} />\n        </EnvironmentProvider>\n      );\n    }\n  );\n\n  ComponentWithProvider.displayName = `withThemeProps(${displayName})`;\n\n  return ComponentWithProvider;\n};\n\nexport default withThemeProps;\n"],"names":["forwardRef","createRef","useEffect","LIGHT_CLASS","DARK_CLASS","INVERT_CLASS","COLORSCHEME_DEPENDENT_CLASS","SCALE_SM_CLASS","SCALE_MD_CLASS","SCALE_LG_CLASS","SCALE_DEPENDENT_CLASS","DENSITY_COMPACT_CLASS","DENSITY_STANDARD_CLASS","DENSITY_DEPENDENT_CLASS","_jsx","EnvironmentProvider"],"mappings":"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"}