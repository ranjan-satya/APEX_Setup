{"version":3,"file":"Gridlines-428bf909.js","sources":["../../src/PRIVATE_PlotArea/utils.ts","../../src/PRIVATE_PlotArea/PlotArea.tsx","../../src/PRIVATE_PlotArea/Gridlines.tsx"],"sourcesContent":["import { ColorProps } from '../utils/UNSAFE_interpolations/colors';\nimport { Dimension } from '../utils/UNSAFE_visTypes/common';\n\nexport function getAxisLineProps(\n  availSpace: Dimension,\n  axisPosition: 'left' | 'right' | 'top' | 'bottom',\n  axisLine?: {\n    lineColor?: ColorProps['color'];\n    lineWidth?: number;\n    isRendered: boolean;\n  }\n) {\n  return {\n    x1: axisPosition === 'right' ? availSpace.x + availSpace.width : availSpace.x,\n    x2: axisPosition === 'left' ? availSpace.x : availSpace.x + availSpace.width,\n    y1: axisPosition === 'bottom' ? availSpace.y + availSpace.height : availSpace.y,\n    y2: axisPosition === 'top' ? availSpace.y : availSpace.y + availSpace.height,\n    stroke: axisLine?.lineColor,\n    strokeWidth: axisLine?.lineWidth\n  };\n}\n\nexport function getBaseLineProps(\n  availSpace: Dimension,\n  coord: number,\n  axisPosition: 'left' | 'right' | 'top' | 'bottom'\n) {\n  let x1, x2, y1, y2: number;\n  if (axisPosition === 'bottom') {\n    x1 = availSpace.x;\n    x2 = availSpace.x + availSpace.width;\n    y1 = coord;\n    y2 = coord;\n  } else {\n    x1 = coord;\n    x2 = coord;\n    y1 = availSpace.y;\n    y2 = availSpace.y + availSpace.height;\n  }\n\n  return { x1, x2, y1, y2 };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { styles } from './themes/PlotAreaStyles.css';\nimport { Dimension } from '../utils/UNSAFE_visTypes/common';\nimport { getAxisLineProps, getBaseLineProps } from './utils';\nimport { Scale } from '../utils/UNSAFE_visTypes/chart';\nimport { ColorProps } from '../utils/UNSAFE_interpolations/colors';\n\ntype Props = {\n  yScale: Scale;\n  isLog: boolean;\n  color?: ColorProps['color'];\n  availSpace: Dimension;\n  xAxisPosition: 'left' | 'right' | 'top' | 'bottom';\n  cursor?: string;\n};\n\nexport function PlotArea({ color, yScale, isLog, availSpace, xAxisPosition, cursor }: Props) {\n  const hasBaseLine = !isLog && yScale.domain()[0] < 0 && yScale.domain()[1] > 0;\n  const axisLineProps = getAxisLineProps(availSpace, xAxisPosition);\n  const baseLineProps = getBaseLineProps(availSpace, yScale.transform(0), xAxisPosition);\n  return (\n    <>\n      <rect {...availSpace} class={styles.plotAreaStyle} style={{ fill: color, cursor }}></rect>\n      <line {...axisLineProps} class={styles.axisLineStyle} />\n      {hasBaseLine && <line {...baseLineProps} class={styles.baseLineStyle} />}\n    </>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { styles } from './themes/PlotAreaStyles.css';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { ChartPlotArea, Scale } from '../utils/UNSAFE_visTypes/chart';\nimport { useColorScheme } from '../hooks/UNSAFE_useColorScheme';\n\ntype Props = {\n  xScale: Scale;\n  yScale: Scale;\n  xViewportMin: number;\n  xViewportMax: number;\n  isLog: boolean;\n  yTicks: number[];\n  yMinorTicks: number[];\n  plotArea?: ChartPlotArea;\n  yAxisPosition: 'left' | 'right' | 'top' | 'bottom';\n};\n\nconst TICK_DEFAULT = {\n  yMajorTick: {\n    isRendered: true\n  },\n  yMinorTick: {\n    isRendered: false\n  },\n  xMajorTick: {\n    isRendered: false\n  }\n};\n\nexport function Gridlines({\n  plotArea = TICK_DEFAULT,\n  yMinorTicks,\n  xScale,\n  yScale,\n  isLog,\n  xViewportMin,\n  xViewportMax,\n  yTicks,\n  yAxisPosition\n}: Props) {\n  const isHoriz = yAxisPosition === 'top' || yAxisPosition === 'bottom';\n  const [x1, x2] = xScale.range();\n  const [y1, y2] = yScale.range();\n\n  let yLinesPath = '';\n  let xLinesPath = '';\n  let yMinorPath = '';\n  const { yMajorTick: _yMajorTick, yMinorTick: _yMinorTick, xMajorTick: _xMajorTick } = plotArea;\n  const yMajorTick = { ...TICK_DEFAULT.yMajorTick, ..._yMajorTick };\n  const yMinorTick = { ...TICK_DEFAULT.yMinorTick, ..._yMinorTick };\n  const xMajorTick = { ...TICK_DEFAULT.xMajorTick, ..._xMajorTick };\n  const isYMinorRendered = yMinorTick?.isRendered === true || isLog;\n\n  if (yMajorTick?.isRendered) {\n    for (let i = 1; i < yTicks.length; i++) {\n      let y = yScale.transform(yTicks[i]);\n      // last grid line get's clipped due to plot area clippath. Slightly adjust\n      // coord so that it's not clipped.\n      if (i === yTicks.length - 1) {\n        y += isHoriz ? -1 : 1;\n      }\n      yLinesPath += isHoriz ? `M${y},${x1}L${y},${x2}` : `M${x1},${y}L${x2},${y}`;\n    }\n  }\n\n  if (xMajorTick?.isRendered) {\n    const xStartIndex = Math.floor(xViewportMin - 0.5) + 1.5;\n    for (let i = xStartIndex; i < xViewportMax; i++) {\n      const x = xScale.transform(i);\n      xLinesPath += isHoriz ? `M${y1},${x}L${y2},${x}` : `M${x},${y1}L${x},${y2}`;\n    }\n  }\n\n  if (isYMinorRendered) {\n    for (let i = 0; i < yMinorTicks.length; i++) {\n      const y = yScale.transform(yMinorTicks[i]);\n      yMinorPath += isHoriz ? `M${y},${x1}L${y},${x2}` : `M${x1},${y}L${x2},${y}`;\n    }\n  }\n\n  const colorScheme = useColorScheme();\n\n  return (\n    <>\n      {yMajorTick?.isRendered && (\n        <path\n          d={yLinesPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.majorTickLineStyles,\n            yMajorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            yMajorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: yMajorTick.lineColor,\n            strokeWidth: yMajorTick.lineWidth\n          }}\n        />\n      )}\n      {xMajorTick?.isRendered && (\n        <path\n          d={xLinesPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.majorTickLineStyles,\n            xMajorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            xMajorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: xMajorTick.lineColor,\n            strokeWidth: xMajorTick.lineWidth\n          }}\n        />\n      )}\n      {isYMinorRendered && (\n        <path\n          d={yMinorPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.minorTickLineStyles,\n            colorScheme === 'light'\n              ? styles.lightMinorTickLineStroke\n              : styles.darkMinorTickLineStroke,\n            yMinorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            yMinorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: yMinorTick?.lineColor,\n            strokeWidth: yMinorTick?.lineWidth\n          }}\n        />\n      )}\n    </>\n  );\n}\n"],"names":["_jsxs","_jsx","_Fragment"],"mappings":"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"}