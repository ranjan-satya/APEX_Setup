{"version":3,"file":"useResizeObserver-260ee12b.js","sources":["../../src/hooks/UNSAFE_useResizeObserver/useResizeObserver.tsx"],"sourcesContent":["import { type Ref, useLayoutEffect } from 'preact/hooks';\n\ntype Options = {\n  /**\n   * When set to true, the callback will not be invoked even if the target element's size changes.\n   */\n  isDisabled?: boolean;\n\n  /**\n   * Sets which box model the observer will observe changes to.\n   */\n  box?: ResizeObserverBoxOptions;\n};\n\n/**\n * A hook for observing and responding to changes to the size of a DOM element.\n * It utilizes a ResizeObserver to observe changes to the size of the specified element\n * and accepts a callback function to respond to these changes.\n *\n * @param ref The ref to the target DOM element to observe.\n * @param callback A callback function to be called when the size of the observed element changes.\n *     If the provided callback triggers the consuming component to re-render, then\n *     it's important to pass the same instance of the callback function during each render\n *     to prevent infinite re-render loops. One way to achieve this is by using useCallback.\n * @param options Configuration options.\n */\nconst useResizeObserver = (\n  ref: Ref<Element>,\n  callback: (entry: ResizeObserverEntry) => void,\n  options?: Options\n) => {\n  const { box, isDisabled = false } = options || {};\n\n  useLayoutEffect(() => {\n    // Note ref may be undefined in the hooks storybook demo\n    if (!ref?.current || isDisabled) return;\n\n    const target = ref.current;\n    const resizeObserver = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        callback(entry);\n      }\n    });\n\n    resizeObserver.observe(target, { box });\n\n    return () => resizeObserver.disconnect();\n  }, [ref, callback, box, isDisabled]);\n};\n\nexport { useResizeObserver };\n"],"names":[],"mappings":";;;AAcA;;;;;;;;;;;AAWG;AACG,MAAA,iBAAiB,GAAG,CACxB,GAAiB,EACjB,QAA8C,EAC9C,OAAiB,KACf;IACF,MAAM,EAAE,GAAG,EAAE,UAAU,GAAG,KAAK,EAAE,GAAG,OAAO,IAAI,EAAE,CAAC;IAElD,eAAe,CAAC,MAAK;;AAEnB,QAAA,IAAI,CAAC,GAAG,EAAE,OAAO,IAAI,UAAU;YAAE,OAAO;AAExC,QAAA,MAAM,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC;QAC3B,MAAM,cAAc,GAAG,IAAI,cAAc,CAAC,CAAC,OAAO,KAAI;AACpD,YAAA,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;gBAC3B,QAAQ,CAAC,KAAK,CAAC,CAAC;aACjB;AACH,SAAC,CAAC,CAAC;QAEH,cAAc,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;AAExC,QAAA,OAAO,MAAM,cAAc,CAAC,UAAU,EAAE,CAAC;KAC1C,EAAE,CAAC,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC,CAAC;AACvC;;;;"}