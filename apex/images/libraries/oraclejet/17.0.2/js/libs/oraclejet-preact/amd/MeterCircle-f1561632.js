define(['exports', 'preact/jsx-runtime', './useUser-6dd85af9', 'preact/hooks', './mergeProps-bcfa6a92', './classNames-08d99695', './meterUtils-dcd89d95', './circleUtils-1886e5b4', './utils-95689660', './UNSAFE_MeterCircle/themes/MeterCircleStyles.css', './TrackResizeContainer-905caab2', './UNSAFE_MeterCircle/themes/MeterCircleContract.css', './Common/themes/themeContract.css', './utils-61ef4ad6', './useMeterDatatip-60af9281', './useKeyboardEvents-e9a2b72b', './TabbableModeContext-a9c97640', './useTabbableMode-dc440317', './useComponentTheme-5aa41a8f', './UNSAFE_MeterCircle/themes/redwood/MeterCircleTheme', './useTestId-82cf22a4', './CircularMeter-d19358bc'], (function(e,t,n,r,i,s,a,l,c,o,d,u,h,m,f,g,p,x,C,R,$,b){"use strict";function M({color:e,angle:n,radius:r,length:i,section:a="full"}){const d=l.getCenterCoord(a),u=`calc(${100*d.y}% - ((${Math.sin(2*n*Math.PI/360)} * ${r})))`,h=`calc(${100*d.x}%  + ((${Math.cos(2*n*Math.PI/360)} * ${r})))`;return t.jsx("div",{class:s.classNames([o.styles.referenceBaseLineStyle,e?void 0:o.styles.referenceBorderStyle]),style:{left:h,top:u,width:`calc(${i})`,transform:`translate(0, -1px) rotate(${360-n}deg)`,backgroundColor:e?c.getVisThresholdColor(e):void 0}})}function y(e,t){if(!e)return{width:0,height:0,innerRadius:0,outerRadius:0};const n=e.children[0],r=n.getBoundingClientRect();return{width:Math.round(r.width),height:Math.round(r.height),...S(n,r,t)}}function S(e,t,n){const r=e.clientWidth,i=e.clientHeight;return"bottom"===n||"top"===n?{outerRadius:t.width/2,innerRadius:i}:"left"===n||"right"===n?{outerRadius:t.height/2,innerRadius:r}:{innerRadius:r/2,outerRadius:t.width/2}}function v(e,t,n,r,i,s,a,c,o){const d=i.current;if(!d)return;const u=l.getCenterCoord(c),{angle:h}=l.convertToPolar(d.width*u.x,d.height*u.y,e.offsetX,e.offsetY),m=l.getPositiveAngle(h);let f;if(o&&s+a>m&&(f=l.getPositiveAngle(h-s)/a*(n-t)),!o){const e=l.getPositiveAngle(s-m);e<=a&&(f=e*(n-t)/a)}return null!=f&&(f=Math.round(f/r)*r,f=Math.max(Math.min(n,f),t)),f}function w(e,t,n,r){return e*r/(n-t)}function T(e,t,n,r,i,s){return r+(s?1:-1)*w(e-t,t,n,i)}function z(e,t){const n=e.current;if(!n)return;const r=l.getCenterCoord(t),i=r.x*n.width,s=r.y*n.height;let a,c,o,d,u,h,m,f;return"top"===t||"bottom"===t||"full"===t?(m=2*n.innerRadius,f="full"===t?2*n.innerRadius:n.innerRadius,u=i-n.innerRadius,h="bottom"===t?0:s-n.innerRadius,o=Math.sqrt(2)*n.innerRadius,d="full"===t?o:n.innerRadius/Math.sqrt(2),a=i-n.innerRadius/Math.sqrt(2),c="bottom"===t?0:s-n.innerRadius/Math.sqrt(2)):(f=2*n.innerRadius,m=n.innerRadius,u="left"===t?i-n.innerRadius:0,h=s-n.innerRadius,d=Math.sqrt(2)*n.innerRadius,o=n.innerRadius/Math.sqrt(2),a="left"===t?i-n.innerRadius/Math.sqrt(2):0,c=s-n.innerRadius/Math.sqrt(2)),{outerBounds:{x:u,y:h,width:m,height:f},innerBounds:{x:a,y:c,width:o,height:d}}}const I=8,P=16;function j(e,t){return e?"fit"===e?`${t}px`:u.meterCircleVars.sizes[e]:u.meterCircleVars.size}function k(e){return e?u.meterCircleVars.trackSizes[e]:u.meterCircleVars.trackSize}function A(e,t,n){return null!=t?`(${j(e,n)} * ${t/2})`:`(${j(e,n)} * 0.5 - ${k(e)})`}function E(e,t,n){return null!=t?`(${j(e,n)} * ${1-t} / 2)`:k(e)}function N(e,t,n,r){return`${E(e,t,r)} +  ${m.xUnits("fit"!==e||n?2:4)}`}function B(e,t,n,r,i,s){const{min:a,max:o,startAngle:d,angleExtent:u,size:h,section:m,isRtl:f,innerRadius:g}=e,p=`calc(${E(h,i,s)})`,x=[],C=t.filter((e=>e.max>a&&e.max<=o)).sort(((e,t)=>e.max-t.max)),R=C.length;for(let e=0;e<R;e++){const t=C[e],i=0===e?a:C[e-1].max,s=0===e?t.max:t.max-C[e-1].max;let h=T(i,a,o,d,u,f),$=w(s,a,o,u);const{startOffset:b,extentOffset:M}=U(g,u,0===e,t.max===o,f),y=l.getClipPath(h+b,$+M,f,m);if(x.push({clipPath:y,color:c.getVisThresholdColor(t.color),size:p,section:m}),e===R-1&&t.max<o&&n){h+=(f?1:-1)*$,$=w(o-t.max,a,o,u);const{startOffset:e,extentOffset:n}=U(g,u,!1,!0,f);x.push({clipPath:l.getClipPath(h+e,$+n,f,m),color:r,size:p,section:m})}}return x}function V(e,t,n,r,i){const{min:s,max:a,startAngle:l,angleExtent:c,size:o,isRtl:d}=e;return{radius:A(o,n,i),length:N(o,n,r,i),angle:T(t.value,s,a,l,c,d),color:t.color}}function D(e,t,n,r,i,s,a){const{startAngle:c,angleExtent:o,size:d,section:u,isRtl:m}=e;return{section:u,color:t?"all"===n&&s?`${h.colorSchemeVars.dvt.contrastLine}`:r:"transparent",clipPath:l.getClipPath(c,o,m,u),size:`calc(${E(d,i,a)})`}}function L(e,t,n,r){const{value:i,min:s,max:a,startAngle:c,angleExtent:o,size:d,section:u,isRtl:h}=e,m=(i-s)*o/(a-s),f=Math.min(Math.max(0,t),1),g="left"===u||"right"===u,p="top"===u||"bottom"===u,x=`calc(${E(d,n,r)} * ${f})`,C=`${j(d,r)} - ((1 - ${f}) * ${E(d,n,r)})`,R=`(${C}) / 2`;return{section:u,width:g?`calc(${R})`:`calc(${C})`,height:p?`calc(${R})`:`calc(${C})`,size:x,clipPath:l.getClipPath(c,m,h,u)}}function U(e,t,n,r,i){if(!e)return{startOffset:0,extentOffset:0};const s=360/(2*Math.PI*e);let a=s/2*(i?1:-1),l=-1*s;return n&&t<360&&(a=0,l=-.5*s),r&&t<360&&(l=-.5*s),{startOffset:a,extentOffset:l}}function q(e,t,n){return"top"===n||"bottom"===n?{height:Math.min(t,e/2),width:2*Math.min(t,e/2)}:"left"===n||"right"===n?{width:Math.min(e,t/2),height:2*Math.min(e,t/2)}:{width:Math.min(e,t),height:Math.min(e,t)}}const O=360,F=.8;function W({max:e=100,min:c=0,value:o=0,step:u=1,size:h="fit",startAngle:m=90,angleExtent:p=360,isTrackRendered:S=!0,thresholdDisplay:w="all",indicatorSize:T=1,testId:j,...k}){const A=$.useTestId(j);a.validateRange(c,e,o,u);const E=k.onCommit||k.onInput,{classes:N,styles:U}=C.useComponentTheme(R.MeterCircleRedwoodTheme,{size:h,interaction:E?"isInteractive":void 0});return t.jsx(d.TrackResizeContainer,{class:N,width:"100%",height:"100%",children:function(d,C){const{direction:R}=n.useUser(),$="rtl"===R;let j=m;$&&(j=180-j);const E=l.getCircleSection(j,p,$),{width:W}=q(d,C,E),K=W<O,_=k.innerRadius||"fit"===h?F:void 0,{width:H,height:X}=function(e,t,n,r,i){return n?"full"===i?{width:e-2*(r?I:P),height:t-2*(r?I:P)}:"top"===i||"bottom"===i?{width:e-2*(r?I:P),height:t-(r?I:P)}:{width:e-(r?I:P),height:t-2*(r?I:P)}:{width:e,height:t}}(d,C,!!k.referenceLines?.length,K,E),{width:Y,height:G}=q(H,X,E),J="full"===E?Math.min(Y,G)/2:Math.min(Y,G),Q=2*J,Z=r.useRef(),ee=r.useRef(y(null,E)),te=r.useRef(null),[ne,re]=r.useState(!1);r.useEffect((()=>{(k.onCommit||k.onInput||k.children)&&(ee.current=y(te.current,E),re(!0))}),[E]);const ie=r.useRef(!1),se=f.usePointerEvents(o,(t=>{const n=te.current;if(t.target==n)return v(t,c,e,u,ee,j,p,E,$)}),te,Z,ie,k.onCommit,k.onInput),ae=g.useKeyboardEvents(o,c,e,u,Z,k.onCommit,k.onInput),{datatipContent:le,datatipProps:ce}=f.useMeterDatatip(o,ie,k.datatip,k["aria-describedby"]),oe=a.getMeterAriaProps(o,c,e,k["aria-label"],k["aria-labelledby"],k.thresholds),de=i.mergeProps(se,ae,ce,oe),{trackColor:ue,indicatorColor:he}=a.getTrackAndIndicatorColor(o,w,k.trackColor,k.indicatorColor,k.thresholds),me={min:c,max:e,value:o,startAngle:j,angleExtent:p,size:h,section:E,isRtl:$,innerRadius:ee.current.innerRadius},{isTabbable:fe}=x.useTabbableMode(),ge=z(ee,E);return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:s.classNames([N,"full"===E?`${U.meterCircleFullSizeStyle}, ${U.centerDiv}`:""]),style:{width:d,height:C},tabIndex:fe?0:-1,...A,...de,children:t.jsxs(b.CircleWrapper,{wrapperRef:te,class:s.classNames([U.circleWrapperBaseStyle,k.referenceLines&&k.referenceLines.length>0?h&&U[`fit${K?"Sm":"Lg"}${E}Style`]:"",U.centerDiv]),width:`${Y}px`,height:`${G}px`,children:[t.jsx(b.CircleInner,{width:`${Y}px`,height:`${G}px`,class:s.classNames([U.circleTrackBaseStyle,U[`${E}Style`]]),...D(me,S,w,ue,_,k.thresholds,Q)}),"all"===w&&k.thresholds&&B(me,k.thresholds,S,ue,_,Q).map((e=>t.jsx(b.CircleInner,{class:s.classNames([U.circleTrackBaseStyle,U[`${E}Style`]]),...e,width:`${Y}px`,height:`${G}px`}))),t.jsx(b.CircleInner,{color:he,class:s.classNames([U.circleValueBaseStyle,U[`circleValue${E}Style`],U[`${E}Style`]]),...L(me,T,_,2*J)}),k.referenceLines?.map((e=>t.jsx(M,{...V(me,e,_,K,Q),section:E}))),ne&&k.children&&ge&&t.jsx("div",{class:s.classNames([U.meterCircleCenterContent]),children:k.children(ge)})]})}),le]})}})}function K({max:e=100,min:c=0,value:o=0,step:d=1,size:u,startAngle:h=90,angleExtent:m=360,isTrackRendered:p=!0,thresholdDisplay:S="all",indicatorSize:w=1,testId:T,...I}){const P=$.useTestId(T);a.validateRange(c,e,o,d);const j=r.useRef(),{direction:k}=n.useUser(),A="rtl"===k;let E=h;A&&(E=180-E);const N=l.getCircleSection(E,m,A),U=r.useRef(y(null,N)),q=r.useRef(null),[O,F]=r.useState(!1);r.useEffect((()=>{(I.onCommit||I.onInput||I.children)&&(U.current=y(q.current,N),F(!0))}),[u,N,I.onCommit,I.onInput,I.children]);const W=r.useRef(!1),K=f.usePointerEvents(o,(t=>{const n=q.current;if(t.target==n)return v(t,c,e,d,U,E,m,N,A)}),q,j,W,I.onCommit,I.onInput),_=g.useKeyboardEvents(o,c,e,d,j,I.onCommit,I.onInput),{datatipContent:H,datatipProps:X}=f.useMeterDatatip(o,W,I.datatip,I["aria-describedby"]),Y=a.getMeterAriaProps(o,c,e,I["aria-label"],I["aria-labelledby"],I.thresholds),G=i.mergeProps(K,_,X,Y),{trackColor:J,indicatorColor:Q}=a.getTrackAndIndicatorColor(o,S,I.trackColor,I.indicatorColor,I.thresholds),Z="bottom"===N||"top"===N?"Horizontal":"left"===N||"right"===N?"Vertical":"Full",ee={min:c,max:e,value:o,startAngle:E,angleExtent:m,size:u,section:N,isRtl:A,innerRadius:U.current.innerRadius},te=I.onCommit||I.onInput,{classes:ne,styles:re}=C.useComponentTheme(R.MeterCircleRedwoodTheme,{size:u,interaction:te?"isInteractive":void 0}),{isTabbable:ie}=x.useTabbableMode(),se=z(U,N);return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:s.classNames([ne]),tabIndex:ie?0:-1,...P,...G,children:t.jsxs(b.CircleWrapper,{wrapperRef:q,class:s.classNames([re.circleWrapperBaseStyle,I.referenceLines&&I.referenceLines.length>0?u&&re[`${u}${N}Style`]:"",re[`meterCircle${Z}SizeStyle`]]),children:[t.jsx(b.CircleInner,{class:s.classNames([re.circleTrackBaseStyle,re[`${N}Style`]]),...D(ee,p,S,J,I.innerRadius,I.thresholds)}),"all"===S&&I.thresholds&&B(ee,I.thresholds,p,J,I.innerRadius).map((e=>t.jsx(b.CircleInner,{class:s.classNames([re.circleTrackBaseStyle,re[`${N}Style`]]),...e}))),t.jsx(b.CircleInner,{color:Q,class:s.classNames([re.circleValueBaseStyle,re[`circleValue${N}Style`],re[`${N}Style`]]),...L(ee,w,I.innerRadius)}),I.referenceLines?.map((e=>t.jsx(M,{...V(ee,e,I.innerRadius),section:N}))),O&&I.children&&se&&t.jsx("div",{class:s.classNames([re.meterCircleCenterContent]),children:I.children(se)})]})}),H]})}e.MeterCircle=function({size:e,max:n=100,min:r=0,value:i=0,step:s=1,startAngle:a=90,angleExtent:l=360,isTrackRendered:c=!0,thresholdDisplay:o="all",indicatorSize:d=1,...u}){return"fit"===e?t.jsx(W,{min:r,value:i,max:n,step:s,startAngle:a,angleExtent:l,isTrackRendered:c,thresholdDisplay:o,indicatorSize:d,...u}):t.jsx(K,{size:e||"lg",min:r,value:i,max:n,step:s,startAngle:a,angleExtent:l,isTrackRendered:c,thresholdDisplay:o,indicatorSize:d,...u})}}));
//# sourceMappingURL=MeterCircle-f1561632.js.map
