{"version":3,"file":"calendarDateUtils-ca9bde6d.js","sources":["../../src/utils/UNSAFE_calendarDateUtils/calendarDateUtils.ts"],"sourcesContent":["import {\n  CalendarDate,\n  CalendarDateRequired,\n  CalendarMonth,\n  CalendarMonthRequired,\n  DateGranularity,\n  DatePlaceholders,\n  MonthYearPlaceholders,\n  IsoDay,\n  IsoMonth\n} from './types';\n\nimport {\n  BCP47Locale,\n  DateISOStr,\n  DateTimeUtils,\n  NativeDateTimeOptions,\n  getFormatParse\n} from '#UNSAFE_IntlDateTime';\n\nconst MAX_ISO_YEAR = 9999;\nconst MIN_ISO_YEAR = 0;\nconst MIN_ISO_DAY = 1;\nconst MIN_ISO_MONTH = 1;\n\nconst checkNoCalendarExtension = (locale: BCP47Locale) => {\n  if (locale.indexOf('-u-ca-') !== -1) {\n    throw new Error('Calendar not allowed in locale');\n  }\n};\n\nconst toJSDate = (year: number, month: IsoMonth, day: IsoDay) => {\n  // Date uses 0-based index for month.\n  const date = new Date(year, month - 1, day);\n  if (year < 100) {\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#interpretation_of_two-digit_years\n    date.setFullYear(year);\n  }\n  return date;\n};\n\nconst toIsoCalendarDate = (jsDate: Date): CalendarDateRequired => {\n  const year = jsDate.getFullYear();\n  const month = jsDate.getMonth() + 1;\n  const day = jsDate.getDate();\n  return { year, month: month as IsoMonth, day: day as IsoDay };\n};\n\n// only one duration type can be specified at a time.\ntype Duration =\n  | { years: number; months?: never; days?: never }\n  | { years?: never; months: number; days?: never }\n  | { years?: never; months?: never; days: number };\n\n/**\n * This function can add and subtract years/months/days to an existing CalendarDateRequired object.\n * You can only add/subtract one duration type (years, months, days) at a time.\n * Note: When adding/subtracting years or months, the end of the month is constrained. Examples:\n * e.g. if adding 1 month: 1/31/2024 -> 2/29/2024\n * e.g. if adding 1 year: 2/29/2024 -> 2/28/2025\n * @param calendarDate\n * @param Duration Object containing the optional years/months/days you want to add to the calendarDate. Positive and negative integers are allowed.\n * @returns CalendarDateRequired\n *\n * @example\n * // To add one month:\n * addToCalendarDate({ year: 2024, month: 1, day: 31 }, { months: 1 });\n * returns: { year: 2024, month: 2, day: 29 }\n * // To subtract 7 days (go back one week):\n * addToCalendarDate({ year: 2024, month: 1, day: 31 }, { days: -7 });\n * returns: { year: 2024, month: 1, day: 24 }\n * // To add 10 years:\n * addToCalendarDate({ year: 2024, month: 1, day: 31 }, { years: 10 });\n * returns: { year: 2034, month: 1, day: 31 }\n *\n * NOTE: When Temporal is available and supported, we can be using Temporal.add() instead of\n * js Date() to do the addition / subtraction.\n * See https://tc39.es/proposal-temporal/docs/plaindate.html. For instance, to add one month:\n * const plainDate = new Temporal.PlainDate(isoYear, isoMonth, isoDay);\n * const adjustedDate = plainDate.add({months: 1}); // constrains to end of month if needed, e.g. Jan 31 -> Feb 28\n */\nconst addToCalendarDate = (\n  calendarDate: CalendarDateRequired,\n  { years, months, days }: Duration\n): CalendarDateRequired => {\n  // Verify years, months and days are integers if defined.\n  throwIfNotInteger(years, 'years');\n  throwIfNotInteger(months, 'months');\n  throwIfNotInteger(days, 'days');\n  const YEAR_MIN = 1; // the lowest year we support\n  // According to the Date jsdoc, years < 100 (two-digit) have a bug that we need to workaround.\n  const TWO_DIGIT_YEAR_BROWSER_OFFSET = new Date(0, 1, 2).getFullYear(); // usually 1900, but the Date jsdoc says this could be 2000.\n\n  // First, we adjust the year or month, using the first of the month so that we don't roll\n  // over to the next month based on the current day.\n  const newYear = calendarDate.year + (years ? years : 0);\n  let jsDateOnFirstOfMonth;\n  if (newYear < 100) {\n    // Deal with this:\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#interpretation_of_two-digit_years\n    // do not let new year be < the cap\n    const cappedYear = newYear < YEAR_MIN ? YEAR_MIN : newYear;\n    jsDateOnFirstOfMonth = new Date(cappedYear, calendarDate.month - 1 + (months ? months : 0), 1);\n    // E.g., let's say cappedYear is 4. And we are subtracting 1 month, and we are on January, so we go to the previous year when we move back one month.\n    // e.g., const mydate = new Date(4, -1, 1) => Tue Dec 01 1903\n    // mydate.getFullYear() => 1903 (It should be 3, so we have to work around that browser offset for 2-digit years)\n    // diff will be 1903 - (1900+4) => -1, so we want to set full year to 4-1, 3.\n    const diff = jsDateOnFirstOfMonth.getFullYear() - (TWO_DIGIT_YEAR_BROWSER_OFFSET + cappedYear);\n    jsDateOnFirstOfMonth.setFullYear(cappedYear + diff);\n  } else {\n    jsDateOnFirstOfMonth = new Date(newYear, calendarDate.month - 1 + (months ? months : 0), 1);\n  }\n\n  const adjYear = jsDateOnFirstOfMonth.getFullYear();\n  if (adjYear < YEAR_MIN) {\n    // do not adjust the calendarDate if doing so would make the year < the cap.\n    return calendarDate;\n  }\n  const adjMonth = jsDateOnFirstOfMonth.getMonth();\n  // Now we determine the current day of the month based on the number of days in the current\n  // month and year before we add the days\n  const adjDay = Math.min(calendarDate.day, getDaysInMonth((adjMonth + 1) as IsoMonth, adjYear));\n  // now, we adjust for the days\n  const adjustedJsDate = new Date(adjYear, adjMonth, adjDay + (days ? days : 0));\n\n  // again, handle if adjYear is < 100.\n  if (adjYear < 100) {\n    const diff = adjustedJsDate.getFullYear() - (TWO_DIGIT_YEAR_BROWSER_OFFSET + adjYear);\n    adjustedJsDate.setFullYear(adjYear + diff);\n  }\n\n  // this is the adjusted year after we adjust for days.\n  const adjYear2 = adjustedJsDate.getFullYear();\n  if (adjYear2 < YEAR_MIN) {\n    return calendarDate;\n  }\n\n  return {\n    year: adjustedJsDate.getFullYear(),\n    month: (adjustedJsDate.getMonth() + 1) as IsoMonth,\n    day: adjustedJsDate.getDate() as IsoDay\n  };\n};\n\n/**\n * This function can add or subtract months to the existing month. When the end is reached\n * it goes to the beginning when adding and end when subtracting.\n *\n * @example\n * // adds one month\n * addToMonth(5, 1); // returns 6.\n * // subtracts one month\n * addToMonth(5, -1); // returns 4.\n * // adds one month from december\n * addToMonth(12, 1); // returns 1.\n * // subtracts one month from january\n * addToMonth(1, -1); // returns 12.\n *\n * @param month\n * @param months Duration of months that need to be added\n * @returns the result month of type IsoMonth\n */\nconst addToMonth = (month: IsoMonth, months: number) => {\n  const resultMonth = month - 1 + months;\n  if (resultMonth >= 12) return ((resultMonth % 12) + 1) as IsoMonth;\n  if (resultMonth < 0) return (12 + (resultMonth % 12) + 1) as IsoMonth;\n  return (resultMonth + 1) as IsoMonth;\n};\n\n/**\n * This function can add or subtract years to the existing year. The resulting year\n * cannot be greater than the MAX_ISO_YEAR (9999) or less than MIN_ISO_YEAR (0).\n *\n * @example\n * // adds one year\n * addToYear(2025, 1); // returns 2026.\n * // subtracts one year\n * addToYear(2025, -1); // returns 2024.\n * // adds one year to ISO_MAX_YEAR\n * addToYear(9999, 1); // returns 9999.\n * // subtracts one year from ISO_MIN_YEAR\n * addToYear(0, -1); // returns 0.\n *\n * @param year\n * @param years Duration of years that need to be added\n * @returns the result year\n */\nconst addToYear = (year: number, years: number) => {\n  const resultYear = year + years;\n  if (resultYear < MIN_ISO_YEAR) return MIN_ISO_YEAR;\n  if (resultYear > MAX_ISO_YEAR) return MAX_ISO_YEAR;\n  return resultYear;\n};\n\n// Throws an error of the value exists and is not an integer.\nconst throwIfNotInteger = (value: number | undefined, valueName: string) => {\n  if (value && !Number.isInteger(value)) {\n    throw new Error(`Internal error. Argument '${valueName}' is not an integer.`);\n  }\n};\n\n/**\n * This function formats a test date using Intl.DateTimeFormat for the given locale.\n * It then uses Intl.DateTimeFormat.formatToParts to get the parts of the date in a\n * locale specific order, substitutes translated placeholders, and filters out\n * unwanted parts of the date. If granularity = month, then the placeholder for day\n * is removed. The shape of the return value matches what is returned by formatToParts.\n *\n * @param locale The BCP47Locale\n * @param granularity Specifies whether you want placeholders for month, year OR day, month, year\n * @param monthPlaceholder The translated month placeholder\n * @param dayPlaceholder The translated day placeholder\n * @param yearPlaceholder The translated year placeholder\n */\nconst getDatePlaceholderMasks = (\n  locale: BCP47Locale,\n  granularity: 'month' | 'day',\n  monthPlaceholder: string,\n  dayPlaceholder: string,\n  yearPlaceholder: string\n): DatePlaceholders => {\n  checkNoCalendarExtension(locale);\n  const testDate = new Date('2022-11-30');\n  const formatter = new Intl.DateTimeFormat(locale, { dateStyle: 'short' });\n\n  // Filter out anything that is not month, day, year, or literal (e.g. a separator).\n  const filterByType = (p: Intl.DateTimeFormatPart) => {\n    return (\n      (granularity === 'day' && p.type === 'day') ||\n      p.type === 'month' ||\n      p.type === 'year' ||\n      p.type === 'literal'\n    );\n  };\n\n  // Substitute translated placeholders. Trim literals for visual consistency (they can include whitespace)\n  // so the date looks more like a string when the placeholders are rendered next to each other.\n  const mapTranslatedPlaceholders = (p: Intl.DateTimeFormatPart) => {\n    switch (p.type) {\n      case 'month':\n        return { ...p, value: monthPlaceholder };\n      case 'day':\n        return { ...p, value: dayPlaceholder };\n      case 'year':\n        return { ...p, value: yearPlaceholder };\n      default:\n        return { ...p, value: p.value.trim() };\n    }\n  };\n\n  const parts = formatter.formatToParts(testDate).filter(filterByType);\n  let placeholders = parts.map(mapTranslatedPlaceholders);\n\n  // Remove any repeated literals, which can occur after filtering (such as mm//yyyy).\n  placeholders = removeExcessiveLiteralsFromPlaceholders(placeholders);\n\n  return placeholders as DatePlaceholders;\n};\n\n/**\n * Return the number of days in a given month and year. Pass '*' if you don't know a value.\n * If neither month or year are known, then return the maximum number of days in any month in any year.\n * If only month is known, return the maximum number of days for that month in any year.\n * For Gregorian calendar:\n *   getDaysInMonth(2, *) => returns 29\n *   getDaysInMonth(*, *) => returns 31\n *   getDaysInMonth(*, 2023) => returns 31\n */\nconst getDaysInMonth = (month: IsoMonth | '*', year: number | '*') => {\n  if (month === '*') {\n    return 31;\n  } else if (year === '*') {\n    return getDaysInMonthGregorian(month);\n  } else {\n    checkIsValidIsoYear(year);\n    // DateTimeUtils.getDaysInMonth uses a 0-based index.\n    return DateTimeUtils.getDaysInMonth(year, month - 1);\n  }\n};\n\n/**\n * Return the number of months in a given year. Pass '*' if you don't know the year.\n * In a Gregorian calendar the number of months is always 12. We'll have to revisit this\n * when multiple calendars are supported; in some cases the number of months can vary by year.\n */\nconst getMonthsInYear = (year: number | '*') => {\n  if (year !== '*') {\n    checkIsValidIsoYear(year);\n  }\n  return 12;\n};\n\n/**\n * Return the number of days in a month in the Gregorian calendar, without knowing the year.\n */\nconst getDaysInMonthGregorian = (month: IsoMonth) => {\n  switch (month) {\n    case 1:\n    case 3:\n    case 5:\n    case 7:\n    case 8:\n    case 10:\n    case 12:\n      return 31;\n    case 2:\n      return 29; // Since we don't know the year, return the maximum possible number of days.\n    default:\n      return 30;\n  }\n};\n\n/**\n * Throw an error if year is not a valid ISO year (0-9999).\n * The allowed range is too large to express using Typescript.\n */\nconst checkIsValidIsoYear = (year: number) => {\n  if (year < MIN_ISO_YEAR || year > MAX_ISO_YEAR) {\n    throw new Error('Invalid year value');\n  }\n};\n\n/**\n * This utility method uses Intl.DateTimeFormat directly to format with month: long and\n * year: numeric. It returns something like 'May 2025'.\n */\nconst getLongFormattedYearMonth = (locale: BCP47Locale, year: number, month: IsoMonth) => {\n  checkNoCalendarExtension(locale);\n  const formatter = new Intl.DateTimeFormat(locale, { month: 'long', year: 'numeric' });\n  return formatter.format(toJSDate(year, month, 1));\n};\n\n/**\n * This utility method uses Intl.DateTimeFormat directly to format with year: numeric.\n * It returns something like '2025'.\n * @param locale the locale for formatting the year\n * @param year the year of the date to be formatted\n * @param month the month of the date to be formatted\n * @returns the numeric formatted year\n */\nconst getNumericFormattedYear = (locale: BCP47Locale, year: number, month: IsoMonth) => {\n  checkNoCalendarExtension(locale);\n  const formatter = new Intl.DateTimeFormat(locale, { year: 'numeric' });\n  return formatter.format(toJSDate(year, month, 1));\n};\n\n/**\n * Construct and return an IS0 date string from year, month, and day.\n */\nconst getIsoDateStr = (year: number, month: IsoMonth, day: IsoDay) => {\n  checkIsValidIsoYear(year);\n\n  // Month and day must be 2 digits and year must be 4 digits to be a valid ISO 8601 string.\n  const parts = [\n    year.toString().padStart(4, '0'),\n    month.toString().padStart(2, '0'),\n    day.toString().padStart(2, '0')\n  ];\n  return parts.join('-');\n};\n\n/**\n * Parse a DateIsoStr and return an equivalent CalendarDate.\n */\nconst getCalendarDateFromIso = (str: DateISOStr) => {\n  if (!DateTimeUtils.isDateOnlyIsoString(str)) {\n    return undefined;\n  }\n\n  const parts = str.split('-');\n  return { year: +parts[0], month: +parts[1], day: +parts[2] } as unknown as CalendarDate;\n};\n\n/**\n * Returns the CalendarDateRequired object that represents the current CalendarDate for today\n * in the timeZone specified, or if not specified, in the default system timezone.\n *\n * @param timeZone the timeZone name\n * @returns CalendarDateRequired\n *\n * @example\n * // Return today's date in New York for the current time\n * getCalendarDateToday('America/New_York');\n */\nconst getCalendarDateToday = (timeZone?: Intl.DateTimeFormatOptions['timeZone']) =>\n  toIsoCalendarDate(\n    // If a timezone is passed in, then create a date adjusted with the timezone, otherwise just get the date with the default timezone.\n    timeZone ? new Date(new Intl.DateTimeFormat('en', { timeZone }).format(new Date())) : new Date()\n  );\n\n/**\n * Return the calendar date for year, month, and day formatted using the specified date style\n * in the given locale.\n */\nconst getFormattedYearMonthDay = (\n  locale: BCP47Locale,\n  year: number,\n  month: IsoMonth,\n  day: IsoDay,\n  style: NonNullable<Intl.DateTimeFormatOptions['dateStyle']>\n) => {\n  checkNoCalendarExtension(locale);\n  const dateIsoStr = getIsoDateStr(year, month, day);\n\n  const dateFormatOptions: NativeDateTimeOptions = {\n    locale,\n    dateStyle: style,\n    dateStyleShortYear: style === 'short' ? 'numeric' : undefined\n  };\n  const { format } = getFormatParse(dateFormatOptions);\n  return format(dateIsoStr);\n};\n\n/**\n * Format and return the calendar date as a string. If the date is not a complete\n * date, i.e. any of its segments are missing, return an empty string.\n */\nconst formatCalendarDateAsString = (\n  locale: BCP47Locale,\n  calendarDate: CalendarDate,\n  style: NonNullable<Intl.DateTimeFormatOptions['dateStyle']>\n) => {\n  if (!calendarDate.year || !calendarDate.month || !calendarDate.day) {\n    return '';\n  }\n  return getFormattedYearMonthDay(\n    locale,\n    calendarDate.year,\n    calendarDate.month,\n    calendarDate.day,\n    style\n  );\n};\n\n/**\n * Format an example DateISOStr in short format.\n */\nconst formatIsoDateStrAsExample = (\n  locale: BCP47Locale,\n  str: DateISOStr,\n  masks?: DatePlaceholders,\n  granularity?: DateGranularity\n) => {\n  const calDate = getCalendarDateFromIso(str);\n  // The placeholders aren't used for formatting, so use dummy values.\n  const dateMasks =\n    masks ?? getDatePlaceholderMasks(locale, granularity ?? 'day', 'mm', 'dd', 'yyyy');\n  return calDate === undefined\n    ? ''\n    : formatShortCalendarDate(calDate, granularity ?? 'day', dateMasks);\n};\n\n/**\n * Format an example CalendarMonthRequired in short format.\n */\nconst formatCalendarMonthRequiredAsExample = (\n  locale: BCP47Locale,\n  calMonth: CalendarMonthRequired,\n  masks?: DatePlaceholders\n) => {\n  // The placeholders aren't used for formatting, so use dummy values.\n  const dateMasks = masks ?? getDatePlaceholderMasks(locale, 'month', 'mm', 'dd', 'yyyy');\n  return calMonth === undefined ? '' : formatShortCalendarDate(calMonth, 'month', dateMasks);\n};\n\n/**\n * Format a CalendarDate in short format.\n */\nconst formatShortCalendarDate = (\n  cd: CalendarDate,\n  granularity: DateGranularity,\n  masks: DatePlaceholders\n) => {\n  if (!cd.year || !cd.month || (granularity === 'day' && !cd.day)) {\n    return '';\n  }\n  const dateValues = masks.map(({ type, value }) =>\n    type === 'year' ? cd.year : type === 'month' ? cd.month : type === 'day' ? cd.day : value.trim()\n  );\n  return dateValues.join('');\n};\n\n/**\n * Format a CalendarDate in full format.\n */\nconst formatFullCalendarDate = (\n  locale: BCP47Locale,\n  cd: CalendarDate,\n  granularity: DateGranularity\n) => {\n  if (!cd.year || !cd.month || (granularity === 'day' && !cd.day)) {\n    return '';\n  }\n  checkNoCalendarExtension(locale);\n\n  return granularity === 'day'\n    ? getFormattedYearMonthDay(locale, cd.year, cd.month, cd.day!, 'full')\n    : getLongFormattedYearMonth(locale, cd.year, cd.month);\n};\n\n// returns true if undefined or null, or if the value has a year and month property that are valid.\n// This is used to check if the value, min and max properties are valid in input-month-mask.\n// This is equivalent to DateTimeUtils.isDateOnlyIsoString that is used for input-date-mask.\nconst isValidCalendarMonthRequired = (value?: CalendarMonthRequired | null) => {\n  if (value === undefined || value === null) return true;\n  const { year, month } = value;\n\n  const isValidNumber = (num: number | undefined, max: number | undefined): boolean => {\n    return (\n      typeof num === 'number' &&\n      Number.isInteger(num) &&\n      num > 0 &&\n      (max === undefined || num <= max)\n    );\n  };\n\n  // Check if the value is a complete object and its month is valid\n  if (isValidNumber(year, MAX_ISO_YEAR) && isValidNumber(month, getMonthsInYear(year))) {\n    return true;\n  }\n  return false;\n};\n\nconst isCompleteCalendarDate = (value: CalendarDate) => {\n  const { year, month, day } = value;\n\n  // Check if the value is a complete object\n  return year !== undefined && month !== undefined && day !== undefined;\n};\n\nconst isCompleteCalendarMonth = (value: CalendarMonth) => {\n  const { year, month } = value;\n\n  // Check if the value is a complete object\n  return year !== undefined && month !== undefined;\n};\n\n// Given a pattern, return a DatePlaceholder array.\nconst getDatePlaceholdersFromPattern = (pattern: string) => {\n  const arr = getMaskArrayFromPattern(pattern);\n  const datePlaceholders = convertMaskArrayToDatePlaceholders(arr);\n  return datePlaceholders;\n};\n\n// Given a pattern, like 'd-m-yyyy', return an array like ['d', '-', 'm', '-', 'yyyy']\nconst getMaskArrayFromPattern = (pattern: string) => {\n  const result: Array<string> = [];\n  let currentSegmentStr = '';\n  let currentLiteral = '';\n\n  const addSegment = () => {\n    if (currentSegmentStr !== '') {\n      result.push(currentSegmentStr);\n      currentSegmentStr = '';\n    }\n  };\n\n  const addLiteral = () => {\n    if (currentLiteral !== '') {\n      // InputDateMask does not want spaces in its literals. Even if InputDateMask\n      // trims its literals for the masks property, we do so here as well\n      // since we could end up using this for things that are\n      // outside of InputDateMasks masks property.\n      result.push(currentLiteral.trim());\n      currentLiteral = '';\n    }\n  };\n\n  for (let i = 0; i < pattern.length; i++) {\n    const char = pattern[i];\n\n    if (char.toLowerCase() === 'm' || char.toLowerCase() === 'd' || char.toLowerCase() === 'y') {\n      addLiteral();\n      currentSegmentStr += char;\n    } else {\n      addSegment();\n      currentLiteral += char;\n    }\n  }\n\n  // Add the last components\n  addSegment();\n  addLiteral();\n\n  return result;\n};\n\nconst getMonthYearPlaceholdersFromDatePlaceholders = (\n  datePlaceholders: DatePlaceholders\n): MonthYearPlaceholders => {\n  // filter out day\n  const noDay = datePlaceholders.filter((part) => part.type !== 'day');\n  // now filter out the extra literal\n  const monthYearPlaceholders = removeExcessiveLiteralsFromPlaceholders(noDay);\n  return monthYearPlaceholders as MonthYearPlaceholders;\n};\n\n// converts an array into the object that is needed to set on the InputDateMask's masks property, DatePlaceholder[];\nconst convertMaskArrayToDatePlaceholders = (array: Array<string>) => {\n  return array.map((item) => {\n    if (item.toLowerCase()[0] === 'd') {\n      return { type: 'day', value: item };\n    } else if (item.toLowerCase()[0] === 'm') {\n      return { type: 'month', value: item };\n    } else if (item.toLowerCase()[0] === 'y') {\n      return { type: 'year', value: item };\n    } else {\n      // Default to literal for anything else\n      return { type: 'literal', value: item };\n    }\n  }) as DatePlaceholders;\n};\n\nconst removeExcessiveLiteralsFromPlaceholders = (\n  placeholders: { value: string; type: keyof Intl.DateTimeFormatPartTypesRegistry }[]\n) => {\n  const index = placeholders.findIndex((element, index, array) => {\n    return element.type === 'literal' && index > 0 && array[index - 1].type === 'literal';\n  });\n  if (index !== -1) {\n    placeholders = placeholders.slice(0, index).concat(placeholders.slice(index + 1));\n  }\n\n  // Remove any leading or trailing literals. Leading literals can occur after filtering,\n  // and certain locales include trailing literals such as mm.dd.yyyy. which we don't want.\n  if (placeholders[placeholders.length - 1].type === 'literal') {\n    placeholders = placeholders.slice(0, -1);\n  }\n  if (placeholders[0].type === 'literal') {\n    placeholders = placeholders.slice(1);\n  }\n  return placeholders;\n};\n\n/**\n * Computes the closest decade that is before the provided year.\n * @param year the current year\n * @returns the closest decade before the provided year\n */\nconst getClosestDecade = (year: number) => Math.floor(year / 10) * 10;\n\n/**\n * Compares two CalendarDateRequired objects and returns a number indicating their relative order.\n * @param {CalendarDateRequired} date1 The first date to compare.\n * @param {CalendarDateRequired} date2 The second date to compare.\n * @returns {number} A negative number if date1 is before date2, a positive number if date1 is after date2, or 0 if they are the same.\n */\nconst compareDates = (date1: CalendarDateRequired, date2: CalendarDateRequired) => {\n  if (date1.year !== date2.year) {\n    return date1.year - date2.year;\n  }\n  if (date1.month !== date2.month) {\n    return date1.month - date2.month;\n  }\n  return date1.day - date2.day;\n};\n\n/**\n * Checks if one CalendarDateRequired object is before another CalendarDateRequired object.\n * @param date1\n * @param date2\n * @returns {boolean} True if date1 is before date2, otherwise false.\n */\nconst isCalendarDateBefore = (date1: CalendarDateRequired, date2: CalendarDateRequired) => {\n  return compareDates(date1, date2) < 0;\n};\n\n/**\n * Checks if one CalendarDateRequired object is after another CalendarDateRequired object.\n * @param date1\n * @param date2\n * @returns {boolean} True if date1 is after date2, otherwise false.\n */\nconst isCalendarDateAfter = (date1: CalendarDateRequired, date2: CalendarDateRequired) => {\n  return compareDates(date1, date2) > 0;\n};\n\n/**\n * Constrains a given CalendarDateRequired object within the specified date range (inclusive).\n * If the date is before the min, constrain it to the min. If the date is after the max, constrain it to the max.\n * This function creates a new CalendarDateRequired object and does not modify the incoming objects.\n * @param {CalendarDateRequired} date The date to be constrained.\n * @param {CalendarDateRequired} [min] The minimum date allowed (inclusive)\n * @param {CalendarDateRequired} [max] The maximum date allowed (inclusive)\n * @returns {CalendarDateRequired} A new CalendarDateObject constrained within the specified min and max dates (inclusive).\n */\nconst constrainCalendarDate = (\n  date: CalendarDateRequired,\n  min?: CalendarDateRequired,\n  max?: CalendarDateRequired\n) => {\n  let constrainedDate = { ...date }; // Create a new object to avoid modifying the original date objects that are passed in.\n\n  if (min && isCalendarDateBefore(constrainedDate, min)) {\n    constrainedDate = { ...min };\n  }\n\n  if (max && isCalendarDateAfter(constrainedDate, max)) {\n    constrainedDate = { ...max };\n  }\n\n  return constrainedDate;\n};\n\n/**\n * Check if a given CalendarDateRequired object is outside of the specified min/max date range.\n * @param {CalendarDateRequired} date The date to check\n * @param {CalendarDateRequired} [min] The minimum date allowed (inclusive)\n * @param {CalendarDateRequired} [max] The maximum date allowed (inclusive)\n * @returns {boolean} True if the date is outside of the min/max range, otherwise false.\n */\nconst isDateOutOfRange = (\n  date: CalendarDateRequired,\n  min?: CalendarDateRequired,\n  max?: CalendarDateRequired\n) => {\n  return (min && isCalendarDateBefore(date, min)) || (max && isCalendarDateAfter(date, max));\n};\n\nexport {\n  MIN_ISO_DAY,\n  MIN_ISO_MONTH,\n  MIN_ISO_YEAR,\n  MAX_ISO_YEAR,\n  addToCalendarDate,\n  addToMonth,\n  addToYear,\n  checkIsValidIsoYear,\n  checkNoCalendarExtension,\n  compareDates,\n  constrainCalendarDate,\n  formatCalendarDateAsString,\n  formatShortCalendarDate,\n  formatFullCalendarDate,\n  formatCalendarMonthRequiredAsExample,\n  formatIsoDateStrAsExample,\n  getCalendarDateFromIso,\n  getCalendarDateToday,\n  getClosestDecade,\n  getDatePlaceholderMasks,\n  getFormattedYearMonthDay,\n  getDaysInMonth,\n  getDatePlaceholdersFromPattern,\n  getLongFormattedYearMonth,\n  getNumericFormattedYear,\n  getMonthYearPlaceholdersFromDatePlaceholders,\n  getIsoDateStr,\n  getMonthsInYear,\n  isCalendarDateAfter,\n  isCalendarDateBefore,\n  isCompleteCalendarDate,\n  isCompleteCalendarMonth,\n  isDateOutOfRange,\n  isValidCalendarMonthRequired,\n  toIsoCalendarDate,\n  toJSDate\n};\n"],"names":["DateTimeUtils.getDaysInMonth","DateTimeUtils.isDateOnlyIsoString","getFormatParse"],"mappings":";;;;;;AAoBM,MAAA,YAAY,GAAG,KAAK;AACpB,MAAA,YAAY,GAAG,EAAE;AACjB,MAAA,WAAW,GAAG,EAAE;AAChB,MAAA,aAAa,GAAG,EAAE;AAExB,MAAM,wBAAwB,GAAG,CAAC,MAAmB,KAAI;IACvD,IAAI,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;AACnC,QAAA,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;KACnD;AACH,EAAE;AAEI,MAAA,QAAQ,GAAG,CAAC,IAAY,EAAE,KAAe,EAAE,GAAW,KAAI;;AAE9D,IAAA,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;AAC5C,IAAA,IAAI,IAAI,GAAG,GAAG,EAAE;;AAEd,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KACxB;AACD,IAAA,OAAO,IAAI,CAAC;AACd,EAAE;AAEF,MAAM,iBAAiB,GAAG,CAAC,MAAY,KAA0B;AAC/D,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;IAClC,MAAM,KAAK,GAAG,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;AACpC,IAAA,MAAM,GAAG,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC;IAC7B,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAiB,EAAE,GAAG,EAAE,GAAa,EAAE,CAAC;AAChE,EAAE;AAQF;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BG;AACH,MAAM,iBAAiB,GAAG,CACxB,YAAkC,EAClC,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAY,KACT;;AAExB,IAAA,iBAAiB,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;AAClC,IAAA,iBAAiB,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AACpC,IAAA,iBAAiB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AAChC,IAAA,MAAM,QAAQ,GAAG,CAAC,CAAC;;AAEnB,IAAA,MAAM,6BAA6B,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;;;AAItE,IAAA,MAAM,OAAO,GAAG,YAAY,CAAC,IAAI,IAAI,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;AACxD,IAAA,IAAI,oBAAoB,CAAC;AACzB,IAAA,IAAI,OAAO,GAAG,GAAG,EAAE;;;;AAIjB,QAAA,MAAM,UAAU,GAAG,OAAO,GAAG,QAAQ,GAAG,QAAQ,GAAG,OAAO,CAAC;QAC3D,oBAAoB,GAAG,IAAI,IAAI,CAAC,UAAU,EAAE,YAAY,CAAC,KAAK,GAAG,CAAC,IAAI,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;;;;AAK/F,QAAA,MAAM,IAAI,GAAG,oBAAoB,CAAC,WAAW,EAAE,IAAI,6BAA6B,GAAG,UAAU,CAAC,CAAC;AAC/F,QAAA,oBAAoB,CAAC,WAAW,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC;KACrD;SAAM;QACL,oBAAoB,GAAG,IAAI,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC,KAAK,GAAG,CAAC,IAAI,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KAC7F;AAED,IAAA,MAAM,OAAO,GAAG,oBAAoB,CAAC,WAAW,EAAE,CAAC;AACnD,IAAA,IAAI,OAAO,GAAG,QAAQ,EAAE;;AAEtB,QAAA,OAAO,YAAY,CAAC;KACrB;AACD,IAAA,MAAM,QAAQ,GAAG,oBAAoB,CAAC,QAAQ,EAAE,CAAC;;;IAGjD,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE,cAAc,EAAE,QAAQ,GAAG,CAAC,GAAe,OAAO,CAAC,CAAC,CAAC;;IAE/F,MAAM,cAAc,GAAG,IAAI,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,IAAI,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;;AAG/E,IAAA,IAAI,OAAO,GAAG,GAAG,EAAE;AACjB,QAAA,MAAM,IAAI,GAAG,cAAc,CAAC,WAAW,EAAE,IAAI,6BAA6B,GAAG,OAAO,CAAC,CAAC;AACtF,QAAA,cAAc,CAAC,WAAW,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC;KAC5C;;AAGD,IAAA,MAAM,QAAQ,GAAG,cAAc,CAAC,WAAW,EAAE,CAAC;AAC9C,IAAA,IAAI,QAAQ,GAAG,QAAQ,EAAE;AACvB,QAAA,OAAO,YAAY,CAAC;KACrB;IAED,OAAO;AACL,QAAA,IAAI,EAAE,cAAc,CAAC,WAAW,EAAE;QAClC,KAAK,GAAG,cAAc,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAa;AAClD,QAAA,GAAG,EAAE,cAAc,CAAC,OAAO,EAAY;KACxC,CAAC;AACJ,EAAE;AAEF;;;;;;;;;;;;;;;;;AAiBG;AACH,MAAM,UAAU,GAAG,CAAC,KAAe,EAAE,MAAc,KAAI;AACrD,IAAA,MAAM,WAAW,GAAG,KAAK,GAAG,CAAC,GAAG,MAAM,CAAC;IACvC,IAAI,WAAW,IAAI,EAAE;QAAE,QAAQ,CAAC,WAAW,GAAG,EAAE,IAAI,CAAC,EAAc;IACnE,IAAI,WAAW,GAAG,CAAC;QAAE,QAAQ,EAAE,IAAI,WAAW,GAAG,EAAE,CAAC,GAAG,CAAC,EAAc;AACtE,IAAA,QAAQ,WAAW,GAAG,CAAC,EAAc;AACvC,EAAE;AAEF;;;;;;;;;;;;;;;;;AAiBG;AACH,MAAM,SAAS,GAAG,CAAC,IAAY,EAAE,KAAa,KAAI;AAChD,IAAA,MAAM,UAAU,GAAG,IAAI,GAAG,KAAK,CAAC;IAChC,IAAI,UAAU,GAAG,YAAY;AAAE,QAAA,OAAO,YAAY,CAAC;IACnD,IAAI,UAAU,GAAG,YAAY;AAAE,QAAA,OAAO,YAAY,CAAC;AACnD,IAAA,OAAO,UAAU,CAAC;AACpB,EAAE;AAEF;AACA,MAAM,iBAAiB,GAAG,CAAC,KAAyB,EAAE,SAAiB,KAAI;IACzE,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;AACrC,QAAA,MAAM,IAAI,KAAK,CAAC,6BAA6B,SAAS,CAAA,oBAAA,CAAsB,CAAC,CAAC;KAC/E;AACH,CAAC,CAAC;AAEF;;;;;;;;;;;;AAYG;AACH,MAAM,uBAAuB,GAAG,CAC9B,MAAmB,EACnB,WAA4B,EAC5B,gBAAwB,EACxB,cAAsB,EACtB,eAAuB,KACH;IACpB,wBAAwB,CAAC,MAAM,CAAC,CAAC;AACjC,IAAA,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;AACxC,IAAA,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC;;AAG1E,IAAA,MAAM,YAAY,GAAG,CAAC,CAA0B,KAAI;QAClD,QACE,CAAC,WAAW,KAAK,KAAK,IAAI,CAAC,CAAC,IAAI,KAAK,KAAK;YAC1C,CAAC,CAAC,IAAI,KAAK,OAAO;YAClB,CAAC,CAAC,IAAI,KAAK,MAAM;AACjB,YAAA,CAAC,CAAC,IAAI,KAAK,SAAS,EACpB;AACJ,KAAC,CAAC;;;AAIF,IAAA,MAAM,yBAAyB,GAAG,CAAC,CAA0B,KAAI;AAC/D,QAAA,QAAQ,CAAC,CAAC,IAAI;AACZ,YAAA,KAAK,OAAO;gBACV,OAAO,EAAE,GAAG,CAAC,EAAE,KAAK,EAAE,gBAAgB,EAAE,CAAC;AAC3C,YAAA,KAAK,KAAK;gBACR,OAAO,EAAE,GAAG,CAAC,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC;AACzC,YAAA,KAAK,MAAM;gBACT,OAAO,EAAE,GAAG,CAAC,EAAE,KAAK,EAAE,eAAe,EAAE,CAAC;AAC1C,YAAA;AACE,gBAAA,OAAO,EAAE,GAAG,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC;SAC1C;AACH,KAAC,CAAC;AAEF,IAAA,MAAM,KAAK,GAAG,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;IACrE,IAAI,YAAY,GAAG,KAAK,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;;AAGxD,IAAA,YAAY,GAAG,uCAAuC,CAAC,YAAY,CAAC,CAAC;AAErE,IAAA,OAAO,YAAgC,CAAC;AAC1C,EAAE;AAEF;;;;;;;;AAQG;AACH,MAAM,cAAc,GAAG,CAAC,KAAqB,EAAE,IAAkB,KAAI;AACnE,IAAA,IAAI,KAAK,KAAK,GAAG,EAAE;AACjB,QAAA,OAAO,EAAE,CAAC;KACX;AAAM,SAAA,IAAI,IAAI,KAAK,GAAG,EAAE;AACvB,QAAA,OAAO,uBAAuB,CAAC,KAAK,CAAC,CAAC;KACvC;SAAM;QACL,mBAAmB,CAAC,IAAI,CAAC,CAAC;;QAE1B,OAAOA,6BAA4B,CAAC,IAAI,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;KACtD;AACH,EAAE;AAEF;;;;AAIG;AACH,MAAM,eAAe,GAAG,CAAC,IAAkB,KAAI;AAC7C,IAAA,IAAI,IAAI,KAAK,GAAG,EAAE;QAChB,mBAAmB,CAAC,IAAI,CAAC,CAAC;KAC3B;AACD,IAAA,OAAO,EAAE,CAAC;AACZ,EAAE;AAEF;;AAEG;AACH,MAAM,uBAAuB,GAAG,CAAC,KAAe,KAAI;IAClD,QAAQ,KAAK;AACX,QAAA,KAAK,CAAC,CAAC;AACP,QAAA,KAAK,CAAC,CAAC;AACP,QAAA,KAAK,CAAC,CAAC;AACP,QAAA,KAAK,CAAC,CAAC;AACP,QAAA,KAAK,CAAC,CAAC;AACP,QAAA,KAAK,EAAE,CAAC;AACR,QAAA,KAAK,EAAE;AACL,YAAA,OAAO,EAAE,CAAC;AACZ,QAAA,KAAK,CAAC;YACJ,OAAO,EAAE,CAAC;AACZ,QAAA;AACE,YAAA,OAAO,EAAE,CAAC;KACb;AACH,CAAC,CAAC;AAEF;;;AAGG;AACH,MAAM,mBAAmB,GAAG,CAAC,IAAY,KAAI;IAC3C,IAAI,IAAI,GAAG,YAAY,IAAI,IAAI,GAAG,YAAY,EAAE;AAC9C,QAAA,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;KACvC;AACH,EAAE;AAEF;;;AAGG;AACG,MAAA,yBAAyB,GAAG,CAAC,MAAmB,EAAE,IAAY,EAAE,KAAe,KAAI;IACvF,wBAAwB,CAAC,MAAM,CAAC,CAAC;AACjC,IAAA,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC;AACtF,IAAA,OAAO,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;AACpD,EAAE;AAEF;;;;;;;AAOG;AACG,MAAA,uBAAuB,GAAG,CAAC,MAAmB,EAAE,IAAY,EAAE,KAAe,KAAI;IACrF,wBAAwB,CAAC,MAAM,CAAC,CAAC;AACjC,IAAA,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC;AACvE,IAAA,OAAO,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;AACpD,EAAE;AAEF;;AAEG;AACG,MAAA,aAAa,GAAG,CAAC,IAAY,EAAE,KAAe,EAAE,GAAW,KAAI;IACnE,mBAAmB,CAAC,IAAI,CAAC,CAAC;;AAG1B,IAAA,MAAM,KAAK,GAAG;QACZ,IAAI,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;QAChC,KAAK,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;QACjC,GAAG,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;KAChC,CAAC;AACF,IAAA,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACzB,EAAE;AAEF;;AAEG;AACH,MAAM,sBAAsB,GAAG,CAAC,GAAe,KAAI;IACjD,IAAI,CAACC,kCAAiC,CAAC,GAAG,CAAC,EAAE;AAC3C,QAAA,OAAO,SAAS,CAAC;KAClB;IAED,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC7B,OAAO,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAA6B,CAAC;AAC1F,EAAE;AAEF;;;;;;;;;;AAUG;AACH,MAAM,oBAAoB,GAAG,CAAC,QAAiD,KAC7E,iBAAiB;AACf;AACA,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,EAAE,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,GAAG,IAAI,IAAI,EAAE,EAChG;AAEJ;;;AAGG;AACH,MAAM,wBAAwB,GAAG,CAC/B,MAAmB,EACnB,IAAY,EACZ,KAAe,EACf,GAAW,EACX,KAA2D,KACzD;IACF,wBAAwB,CAAC,MAAM,CAAC,CAAC;IACjC,MAAM,UAAU,GAAG,aAAa,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;AAEnD,IAAA,MAAM,iBAAiB,GAA0B;QAC/C,MAAM;AACN,QAAA,SAAS,EAAE,KAAK;QAChB,kBAAkB,EAAE,KAAK,KAAK,OAAO,GAAG,SAAS,GAAG,SAAS;KAC9D,CAAC;IACF,MAAM,EAAE,MAAM,EAAE,GAAGC,6BAAc,CAAC,iBAAiB,CAAC,CAAC;AACrD,IAAA,OAAO,MAAM,CAAC,UAAU,CAAC,CAAC;AAC5B,EAAE;AAEF;;;AAGG;AACG,MAAA,0BAA0B,GAAG,CACjC,MAAmB,EACnB,YAA0B,EAC1B,KAA2D,KACzD;AACF,IAAA,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE;AAClE,QAAA,OAAO,EAAE,CAAC;KACX;AACD,IAAA,OAAO,wBAAwB,CAC7B,MAAM,EACN,YAAY,CAAC,IAAI,EACjB,YAAY,CAAC,KAAK,EAClB,YAAY,CAAC,GAAG,EAChB,KAAK,CACN,CAAC;AACJ,EAAE;AAEF;;AAEG;AACG,MAAA,yBAAyB,GAAG,CAChC,MAAmB,EACnB,GAAe,EACf,KAAwB,EACxB,WAA6B,KAC3B;AACF,IAAA,MAAM,OAAO,GAAG,sBAAsB,CAAC,GAAG,CAAC,CAAC;;AAE5C,IAAA,MAAM,SAAS,GACb,KAAK,IAAI,uBAAuB,CAAC,MAAM,EAAE,WAAW,IAAI,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;IACrF,OAAO,OAAO,KAAK,SAAS;AAC1B,UAAE,EAAE;UACF,uBAAuB,CAAC,OAAO,EAAE,WAAW,IAAI,KAAK,EAAE,SAAS,CAAC,CAAC;AACxE,EAAE;AAEF;;AAEG;AACG,MAAA,oCAAoC,GAAG,CAC3C,MAAmB,EACnB,QAA+B,EAC/B,KAAwB,KACtB;;AAEF,IAAA,MAAM,SAAS,GAAG,KAAK,IAAI,uBAAuB,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;AACxF,IAAA,OAAO,QAAQ,KAAK,SAAS,GAAG,EAAE,GAAG,uBAAuB,CAAC,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;AAC7F,EAAE;AAEF;;AAEG;AACG,MAAA,uBAAuB,GAAG,CAC9B,EAAgB,EAChB,WAA4B,EAC5B,KAAuB,KACrB;IACF,IAAI,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,KAAK,KAAK,WAAW,KAAK,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE;AAC/D,QAAA,OAAO,EAAE,CAAC;KACX;IACD,MAAM,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,KAC3C,IAAI,KAAK,MAAM,GAAG,EAAE,CAAC,IAAI,GAAG,IAAI,KAAK,OAAO,GAAG,EAAE,CAAC,KAAK,GAAG,IAAI,KAAK,KAAK,GAAG,EAAE,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,EAAE,CACjG,CAAC;AACF,IAAA,OAAO,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAC7B,EAAE;AAEF;;AAEG;AACG,MAAA,sBAAsB,GAAG,CAC7B,MAAmB,EACnB,EAAgB,EAChB,WAA4B,KAC1B;IACF,IAAI,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,KAAK,KAAK,WAAW,KAAK,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE;AAC/D,QAAA,OAAO,EAAE,CAAC;KACX;IACD,wBAAwB,CAAC,MAAM,CAAC,CAAC;IAEjC,OAAO,WAAW,KAAK,KAAK;AAC1B,UAAE,wBAAwB,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,GAAI,EAAE,MAAM,CAAC;AACtE,UAAE,yBAAyB,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,KAAK,CAAC,CAAC;AAC3D,EAAE;AAEF;AACA;AACA;AACA,MAAM,4BAA4B,GAAG,CAAC,KAAoC,KAAI;AAC5E,IAAA,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI;AAAE,QAAA,OAAO,IAAI,CAAC;AACvD,IAAA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;AAE9B,IAAA,MAAM,aAAa,GAAG,CAAC,GAAuB,EAAE,GAAuB,KAAa;AAClF,QAAA,QACE,OAAO,GAAG,KAAK,QAAQ;AACvB,YAAA,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC;AACrB,YAAA,GAAG,GAAG,CAAC;aACN,GAAG,KAAK,SAAS,IAAI,GAAG,IAAI,GAAG,CAAC,EACjC;AACJ,KAAC,CAAC;;AAGF,IAAA,IAAI,aAAa,CAAC,IAAI,EAAE,YAAY,CAAC,IAAI,aAAa,CAAC,KAAK,EAAE,eAAe,CAAC,IAAI,CAAC,CAAC,EAAE;AACpF,QAAA,OAAO,IAAI,CAAC;KACb;AACD,IAAA,OAAO,KAAK,CAAC;AACf,EAAE;AAEF,MAAM,sBAAsB,GAAG,CAAC,KAAmB,KAAI;IACrD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,KAAK,CAAC;;IAGnC,OAAO,IAAI,KAAK,SAAS,IAAI,KAAK,KAAK,SAAS,IAAI,GAAG,KAAK,SAAS,CAAC;AACxE,EAAE;AAEF,MAAM,uBAAuB,GAAG,CAAC,KAAoB,KAAI;AACvD,IAAA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;;AAG9B,IAAA,OAAO,IAAI,KAAK,SAAS,IAAI,KAAK,KAAK,SAAS,CAAC;AACnD,EAAE;AAEF;AACA,MAAM,8BAA8B,GAAG,CAAC,OAAe,KAAI;AACzD,IAAA,MAAM,GAAG,GAAG,uBAAuB,CAAC,OAAO,CAAC,CAAC;AAC7C,IAAA,MAAM,gBAAgB,GAAG,kCAAkC,CAAC,GAAG,CAAC,CAAC;AACjE,IAAA,OAAO,gBAAgB,CAAC;AAC1B,EAAE;AAEF;AACA,MAAM,uBAAuB,GAAG,CAAC,OAAe,KAAI;IAClD,MAAM,MAAM,GAAkB,EAAE,CAAC;IACjC,IAAI,iBAAiB,GAAG,EAAE,CAAC;IAC3B,IAAI,cAAc,GAAG,EAAE,CAAC;IAExB,MAAM,UAAU,GAAG,MAAK;AACtB,QAAA,IAAI,iBAAiB,KAAK,EAAE,EAAE;AAC5B,YAAA,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YAC/B,iBAAiB,GAAG,EAAE,CAAC;SACxB;AACH,KAAC,CAAC;IAEF,MAAM,UAAU,GAAG,MAAK;AACtB,QAAA,IAAI,cAAc,KAAK,EAAE,EAAE;;;;;YAKzB,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,CAAC;YACnC,cAAc,GAAG,EAAE,CAAC;SACrB;AACH,KAAC,CAAC;AAEF,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACvC,QAAA,MAAM,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QAExB,IAAI,IAAI,CAAC,WAAW,EAAE,KAAK,GAAG,IAAI,IAAI,CAAC,WAAW,EAAE,KAAK,GAAG,IAAI,IAAI,CAAC,WAAW,EAAE,KAAK,GAAG,EAAE;AAC1F,YAAA,UAAU,EAAE,CAAC;YACb,iBAAiB,IAAI,IAAI,CAAC;SAC3B;aAAM;AACL,YAAA,UAAU,EAAE,CAAC;YACb,cAAc,IAAI,IAAI,CAAC;SACxB;KACF;;AAGD,IAAA,UAAU,EAAE,CAAC;AACb,IAAA,UAAU,EAAE,CAAC;AAEb,IAAA,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC;AAEF,MAAM,4CAA4C,GAAG,CACnD,gBAAkC,KACT;;AAEzB,IAAA,MAAM,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC;;AAErE,IAAA,MAAM,qBAAqB,GAAG,uCAAuC,CAAC,KAAK,CAAC,CAAC;AAC7E,IAAA,OAAO,qBAA8C,CAAC;AACxD,EAAE;AAEF;AACA,MAAM,kCAAkC,GAAG,CAAC,KAAoB,KAAI;AAClE,IAAA,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,KAAI;QACxB,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YACjC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;SACrC;aAAM,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YACxC,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;SACvC;aAAM,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YACxC,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;SACtC;aAAM;;YAEL,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;SACzC;AACH,KAAC,CAAqB,CAAC;AACzB,CAAC,CAAC;AAEF,MAAM,uCAAuC,GAAG,CAC9C,YAAmF,KACjF;AACF,IAAA,MAAM,KAAK,GAAG,YAAY,CAAC,SAAS,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,KAAI;QAC7D,OAAO,OAAO,CAAC,IAAI,KAAK,SAAS,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS,CAAC;AACxF,KAAC,CAAC,CAAC;AACH,IAAA,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;QAChB,YAAY,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;KACnF;;;AAID,IAAA,IAAI,YAAY,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS,EAAE;QAC5D,YAAY,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KAC1C;IACD,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS,EAAE;AACtC,QAAA,YAAY,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;KACtC;AACD,IAAA,OAAO,YAAY,CAAC;AACtB,CAAC,CAAC;AAEF;;;;AAIG;AACH,MAAM,gBAAgB,GAAG,CAAC,IAAY,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC,GAAG,GAAG;AAEtE;;;;;AAKG;AACH,MAAM,YAAY,GAAG,CAAC,KAA2B,EAAE,KAA2B,KAAI;IAChF,IAAI,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,EAAE;AAC7B,QAAA,OAAO,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;KAChC;IACD,IAAI,KAAK,CAAC,KAAK,KAAK,KAAK,CAAC,KAAK,EAAE;AAC/B,QAAA,OAAO,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;KAClC;AACD,IAAA,OAAO,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;AAC/B,EAAE;AAEF;;;;;AAKG;AACH,MAAM,oBAAoB,GAAG,CAAC,KAA2B,EAAE,KAA2B,KAAI;IACxF,OAAO,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AACxC,EAAE;AAEF;;;;;AAKG;AACH,MAAM,mBAAmB,GAAG,CAAC,KAA2B,EAAE,KAA2B,KAAI;IACvF,OAAO,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AACxC,EAAE;AAEF;;;;;;;;AAQG;AACG,MAAA,qBAAqB,GAAG,CAC5B,IAA0B,EAC1B,GAA0B,EAC1B,GAA0B,KACxB;IACF,IAAI,eAAe,GAAG,EAAE,GAAG,IAAI,EAAE,CAAC;IAElC,IAAI,GAAG,IAAI,oBAAoB,CAAC,eAAe,EAAE,GAAG,CAAC,EAAE;AACrD,QAAA,eAAe,GAAG,EAAE,GAAG,GAAG,EAAE,CAAC;KAC9B;IAED,IAAI,GAAG,IAAI,mBAAmB,CAAC,eAAe,EAAE,GAAG,CAAC,EAAE;AACpD,QAAA,eAAe,GAAG,EAAE,GAAG,GAAG,EAAE,CAAC;KAC9B;AAED,IAAA,OAAO,eAAe,CAAC;AACzB,EAAE;AAEF;;;;;;AAMG;AACG,MAAA,gBAAgB,GAAG,CACvB,IAA0B,EAC1B,GAA0B,EAC1B,GAA0B,KACxB;IACF,OAAO,CAAC,GAAG,IAAI,oBAAoB,CAAC,IAAI,EAAE,GAAG,CAAC,MAAM,GAAG,IAAI,mBAAmB,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;AAC7F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}