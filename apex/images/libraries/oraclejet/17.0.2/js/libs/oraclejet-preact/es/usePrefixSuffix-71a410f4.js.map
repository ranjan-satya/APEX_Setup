{"version":3,"file":"usePrefixSuffix-71a410f4.js","sources":["../../src/hooks/UNSAFE_usePrefixSuffix/usePrefixSuffix.tsx"],"sourcesContent":["import { merge } from '../../utils/UNSAFE_stringUtils';\nimport { useUser } from '../UNSAFE_useUser';\n\ntype Props = {\n  baseId: string;\n  hasEndContent?: boolean;\n  hasInsideLabel?: boolean;\n  hasStartContent?: boolean;\n  hasValue?: boolean;\n  isDisabled?: boolean;\n  isFocused?: boolean;\n  labelId?: string;\n  prefix?: string;\n  suffix?: string;\n  value?: string;\n};\n\ntype PrefixSuffixVariant = 'prefix' | 'suffix';\n\n// returns the prefix and/or suffix components\n// if the condition in which they should be shown is met.\nexport const usePrefixSuffix = ({\n  baseId,\n  hasEndContent,\n  hasInsideLabel,\n  hasStartContent,\n  hasValue,\n  isDisabled,\n  isFocused,\n  labelId,\n  prefix,\n  suffix,\n  value\n}: Props) => {\n  const { direction } = useUser();\n  // for accessibility, if you have a prefix, then you must have a prefixId\n  const prefixId = `${baseId}-prefix`;\n  const suffixId = `${baseId}-suffix`;\n  const hasPrefixText = prefix !== undefined && prefix !== '';\n  const hasSuffixText = suffix !== undefined && suffix !== '';\n  const shouldRenderPrefix = hasPrefixText && !isDisabled && (hasValue || isFocused);\n  const shouldRenderSuffix = hasSuffixText && !isDisabled && (hasValue || isFocused);\n\n  // get value and prefix/suffix if available and return as plain text.\n  const valuePrefixSuffix =\n    hasPrefixText || hasSuffixText ? getText(direction, hasValue, prefix, suffix, value) : value;\n  // get aria-labelledby if there is a prefix or suffix text\n  const ariaLabelledBy =\n    hasPrefixText || hasSuffixText\n      ? merge([labelId, hasPrefixText ? prefixId : undefined, hasSuffixText ? suffixId : undefined])\n      : undefined;\n  const prefixProps = {\n    id: prefixId,\n    hasEndContent,\n    hasInsideLabel,\n    hasStartContent,\n    isDisabled,\n    isFocused,\n    text: prefix ?? '',\n    variant: 'prefix' as PrefixSuffixVariant\n  };\n  const suffixProps = {\n    id: suffixId,\n    hasInsideLabel,\n    isDisabled,\n    isFocused,\n    text: suffix ?? '',\n    variant: 'suffix' as PrefixSuffixVariant\n  };\n\n  return {\n    shouldRenderPrefix,\n    shouldRenderSuffix,\n    prefixProps,\n    suffixProps,\n    valuePrefixSuffix,\n    ariaLabelledBy\n  };\n};\n\n/**\n * Returns the value to render in plain text, taking into account the prefix and suffix\n * and reading direction. Do not add a prefix/suffix if the component doesn't have a value.\n * @returns string | undefined\n */\nfunction getText(\n  direction: 'ltr' | 'rtl',\n  hasValue?: boolean,\n  prefix?: string,\n  suffix?: string,\n  value?: string\n) {\n  // Do not add a prefix/suffix if the component doesn't have a value.\n  if (!hasValue) {\n    return value;\n  }\n  // TODO: direction is 'ltr' even though the storybook is rtl.\n  // Test this when the storybook bug is fixed. ?src=confmacro\n  const isLTR = direction === 'ltr';\n  const plainPrefix = prefix === undefined ? `` : isLTR ? `${prefix} ` : ` ${prefix}`;\n  const plainSuffix = suffix === undefined ? `` : isLTR ? ` ${suffix}` : `${suffix} `;\n\n  const ltrPlainText = `${plainPrefix}${value}${plainSuffix}`;\n  const rtlPlainText = `${plainSuffix}${value}${plainPrefix}`;\n  return isLTR ? ltrPlainText : rtlPlainText;\n}\n"],"names":[],"mappings":";;;;AAmBA;AACA;AACO,MAAM,eAAe,GAAG,CAAC,EAC9B,MAAM,EACN,aAAa,EACb,cAAc,EACd,eAAe,EACf,QAAQ,EACR,UAAU,EACV,SAAS,EACT,OAAO,EACP,MAAM,EACN,MAAM,EACN,KAAK,EACC,KAAI;AACV,IAAA,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,CAAC;;AAEhC,IAAA,MAAM,QAAQ,GAAG,CAAG,EAAA,MAAM,SAAS,CAAC;AACpC,IAAA,MAAM,QAAQ,GAAG,CAAG,EAAA,MAAM,SAAS,CAAC;IACpC,MAAM,aAAa,GAAG,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,EAAE,CAAC;IAC5D,MAAM,aAAa,GAAG,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,EAAE,CAAC;AAC5D,IAAA,MAAM,kBAAkB,GAAG,aAAa,IAAI,CAAC,UAAU,KAAK,QAAQ,IAAI,SAAS,CAAC,CAAC;AACnF,IAAA,MAAM,kBAAkB,GAAG,aAAa,IAAI,CAAC,UAAU,KAAK,QAAQ,IAAI,SAAS,CAAC,CAAC;;IAGnF,MAAM,iBAAiB,GACrB,aAAa,IAAI,aAAa,GAAG,OAAO,CAAC,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC;;AAE/F,IAAA,MAAM,cAAc,GAClB,aAAa,IAAI,aAAa;UAC1B,KAAK,CAAC,CAAC,OAAO,EAAE,aAAa,GAAG,QAAQ,GAAG,SAAS,EAAE,aAAa,GAAG,QAAQ,GAAG,SAAS,CAAC,CAAC;UAC5F,SAAS,CAAC;AAChB,IAAA,MAAM,WAAW,GAAG;AAClB,QAAA,EAAE,EAAE,QAAQ;QACZ,aAAa;QACb,cAAc;QACd,eAAe;QACf,UAAU;QACV,SAAS;QACT,IAAI,EAAE,MAAM,IAAI,EAAE;AAClB,QAAA,OAAO,EAAE,QAA+B;KACzC,CAAC;AACF,IAAA,MAAM,WAAW,GAAG;AAClB,QAAA,EAAE,EAAE,QAAQ;QACZ,cAAc;QACd,UAAU;QACV,SAAS;QACT,IAAI,EAAE,MAAM,IAAI,EAAE;AAClB,QAAA,OAAO,EAAE,QAA+B;KACzC,CAAC;IAEF,OAAO;QACL,kBAAkB;QAClB,kBAAkB;QAClB,WAAW;QACX,WAAW;QACX,iBAAiB;QACjB,cAAc;KACf,CAAC;AACJ,EAAE;AAEF;;;;AAIG;AACH,SAAS,OAAO,CACd,SAAwB,EACxB,QAAkB,EAClB,MAAe,EACf,MAAe,EACf,KAAc,EAAA;;IAGd,IAAI,CAAC,QAAQ,EAAE;AACb,QAAA,OAAO,KAAK,CAAC;KACd;;;AAGD,IAAA,MAAM,KAAK,GAAG,SAAS,KAAK,KAAK,CAAC;IAClC,MAAM,WAAW,GAAG,MAAM,KAAK,SAAS,GAAG,CAAE,CAAA,GAAG,KAAK,GAAG,CAAA,EAAG,MAAM,CAAA,CAAA,CAAG,GAAG,CAAA,CAAA,EAAI,MAAM,CAAA,CAAE,CAAC;IACpF,MAAM,WAAW,GAAG,MAAM,KAAK,SAAS,GAAG,CAAE,CAAA,GAAG,KAAK,GAAG,CAAA,CAAA,EAAI,MAAM,CAAA,CAAE,GAAG,CAAA,EAAG,MAAM,CAAA,CAAA,CAAG,CAAC;IAEpF,MAAM,YAAY,GAAG,CAAG,EAAA,WAAW,GAAG,KAAK,CAAA,EAAG,WAAW,CAAA,CAAE,CAAC;IAC5D,MAAM,YAAY,GAAG,CAAG,EAAA,WAAW,GAAG,KAAK,CAAA,EAAG,WAAW,CAAA,CAAE,CAAC;IAC5D,OAAO,KAAK,GAAG,YAAY,GAAG,YAAY,CAAC;AAC7C;;;;"}