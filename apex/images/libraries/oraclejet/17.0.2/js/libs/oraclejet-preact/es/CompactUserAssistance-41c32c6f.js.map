{"version":3,"file":"CompactUserAssistance-41c32c6f.js","sources":["../../src/UNSAFE_UserAssistance/CompactUserAssistance.tsx"],"sourcesContent":["import { RefObject } from 'preact/compat';\n\nimport { ComponentMessageContainer, ComponentMessageItem } from '../UNSAFE_ComponentMessage';\nimport { useFormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { Popup } from '../UNSAFE_Popup';\nimport { Coords } from '../UNSAFE_Floating';\nimport { Separator } from '../UNSAFE_Separator';\nimport { usePopupFocusWithin } from './usePopupFocusWithin';\nimport { assistiveStyles, dividerStyle } from './themes/UserAssistanceStyles.css';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { UserAssistanceRedwoodTheme } from './themes/redwood/UserAssistanceTheme';\n\ntype Props = {\n  anchorRef: RefObject<HTMLElement | Coords>;\n  assistiveText?: string;\n  fieldLabel?: string;\n  id?: string;\n  messages?: ComponentMessageItem[];\n};\n\nexport function CompactUserAssistance({\n  anchorRef,\n  assistiveText,\n  fieldLabel,\n  id,\n  messages = []\n}: Props) {\n  const { isInputFocused, isReadonly } = useFormFieldContext();\n  const flip = { mainAxis: true, crossAxis: false };\n  const { isFocused: isPopupFocused, popupProps } = usePopupFocusWithin();\n  const isOpen = isInputFocused === true || isPopupFocused === true;\n\n  const { baseTheme } = useComponentTheme(UserAssistanceRedwoodTheme);\n\n  const uaCompactContent =\n    isReadonly !== true && (messages.length > 0 || assistiveText) ? (\n      <Popup\n        {...popupProps}\n        placement=\"end-top-corner\"\n        isOpen={isOpen}\n        anchorRef={anchorRef}\n        flipOptions={flip}\n        tail=\"simple\"\n        maxWidth={'296px'}>\n        <div id={id} class={baseTheme}>\n          {messages.length > 0 && (\n            <ComponentMessageContainer fieldLabel={fieldLabel} messages={messages} />\n          )}\n          {messages.length > 0 && assistiveText && (\n            <span class={dividerStyle}>\n              <Separator />\n            </span>\n          )}\n          {assistiveText && <span class={assistiveStyles}>{assistiveText}</span>}\n        </div>\n      </Popup>\n    ) : null;\n\n  return uaCompactContent;\n}\n"],"names":["_jsx","_jsxs"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoBgB,SAAA,qBAAqB,CAAC,EACpC,SAAS,EACT,aAAa,EACb,UAAU,EACV,EAAE,EACF,QAAQ,GAAG,EAAE,EACP,EAAA;IACN,MAAM,EAAE,cAAc,EAAE,UAAU,EAAE,GAAG,mBAAmB,EAAE,CAAC;IAC7D,MAAM,IAAI,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;IAClD,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,UAAU,EAAE,GAAG,mBAAmB,EAAE,CAAC;IACxE,MAAM,MAAM,GAAG,cAAc,KAAK,IAAI,IAAI,cAAc,KAAK,IAAI,CAAC;IAElE,MAAM,EAAE,SAAS,EAAE,GAAG,iBAAiB,CAAC,0BAA0B,CAAC,CAAC;IAEpE,MAAM,gBAAgB,GACpB,UAAU,KAAK,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,aAAa,CAAC,IAC3DA,GAAC,CAAA,KAAK,EACA,EAAA,GAAA,UAAU,EACd,SAAS,EAAC,gBAAgB,EAC1B,MAAM,EAAE,MAAM,EACd,SAAS,EAAE,SAAS,EACpB,WAAW,EAAE,IAAI,EACjB,IAAI,EAAC,QAAQ,EACb,QAAQ,EAAE,OAAO,EAAA,QAAA,EACjBC,IAAK,CAAA,KAAA,EAAA,EAAA,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,SAAS,aAC1B,QAAQ,CAAC,MAAM,GAAG,CAAC,KAClBD,GAAC,CAAA,yBAAyB,EAAC,EAAA,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAA,CAAI,CAC1E,EACA,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,aAAa,KACnCA,GAAM,CAAA,MAAA,EAAA,EAAA,KAAK,EAAE,YAAY,EACvB,QAAA,EAAAA,GAAA,CAAC,SAAS,EAAA,EAAA,CAAG,EACR,CAAA,CACR,EACA,aAAa,IAAIA,GAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAE,eAAe,EAAG,QAAA,EAAA,aAAa,EAAQ,CAAA,CAAA,EAAA,CAClE,EACA,CAAA,IACN,IAAI,CAAC;AAEX,IAAA,OAAO,gBAAgB,CAAC;AAC1B;;;;"}