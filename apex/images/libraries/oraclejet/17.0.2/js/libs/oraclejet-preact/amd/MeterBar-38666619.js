define(['exports', 'preact/jsx-runtime', './TrackResizeContainer-905caab2', './size-4e81acac', './classNames-08d99695', './mergeProps-bcfa6a92', 'preact/hooks', './useUser-6dd85af9', './useMeterDatatip-60af9281', './useKeyboardEvents-e9a2b72b', './meterUtils-dcd89d95', './UNSAFE_MeterBar/themes/MeterBarStyles.css', './utils-95689660', './TabbableModeContext-a9c97640', './useTabbableMode-dc440317', './useComponentTheme-5aa41a8f', './UNSAFE_MeterBar/themes/redwood/MeterBarTheme', './useTestId-82cf22a4', './UNSAFE_MeterBar/themes/MeterBarContract.css', './utils-61ef4ad6', './LinearMeter-82411a78'], (function(e,t,r,a,s,n,i,o,l,c,d,h,u,S,m,y,g,f,b,p,T){"use strict";function x(e){if(!e)return{width:0,height:0};const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}const k=function(e,t,r,a,s,n){const i=[];return e.start&&i.push(t?r:a),e.end&&i.push(t?s:n),i},z=function(e,t,r,a,s,n){const i=[];return e.start&&i.push(t?r:a),e.end&&i.push(t?s:n),i},M=function(e,t,r){return t&&(e.start&&!r&&(t-=16),e.end&&!r&&(t-=16)),t},B=function(e,t,r){return t&&(e.start&&r&&(t-=16),e.end&&r&&(t-=16)),t};function C({orientation:e,percentage:r,color:a,position:n,width:i,height:l}){const c="horizontal"===e,{direction:d}=o.useUser(),S="rtl"===d,m="start"===n;return t.jsx("div",{class:s.classNames([h.styles.referenceLinesBaseStyle,c?h.styles.referenceLinesHorizontalStyle:h.styles.referenceLinesVerticalStyle,m?c?h.styles.referenceLinesHoriontalStartStyle:S?h.styles.referenceLinesVerticalStartRtlStyle:h.styles.referenceLinesVerticalStartLtrStyle:""]),style:{left:c&&!S?r:void 0,right:c&&S?r:void 0,bottom:c?void 0:r,backgroundColor:u.getVisThresholdColor(a),width:i,height:l}})}function v({color:e,length:r,orientation:a,...n}){const{direction:i}=o.useUser(),l="horizontal"===a,c="rtl"===i;return t.jsx("div",{class:s.classNames([h.styles.thresholdBarBaseStyle,l?c?h.styles.thresholdBarHorizontalBarTrackSectionRtlStyle:h.styles.thresholdBarHorizontalBarTrackSectionLtrStyle:h.styles.thresholdBarVerticalBarTrackSectionStyle,n.class]),style:{width:l?r:"100%",height:l?"100%":r,backgroundColor:u.getVisThresholdColor(e)}})}function V({max:e=100,min:r=0,value:h=0,step:u=1,length:S="100%",width:V,height:w,size:j,orientation:L="horizontal",isTrackRendered:R=!0,thresholdDisplay:F="all",indicatorSize:I=1,testId:U,...E}){const H=f.useTestId(U);d.validateRange(r,e,h,u);const N=i.useRef(),A="horizontal"===L,P=i.useRef(null),$=i.useRef(x(null)),{direction:D,forcedColors:_}=o.useUser(),K="rtl"===D;i.useEffect((()=>{(E.onCommit||E.onInput)&&($.current=x(P.current))}),[j,S,L,E.onCommit,E.onInput]);const X=i.useRef(!1),Y=l.usePointerEvents(h,(t=>{if(t.target==P.current)return function(e,t,r,a,s,n,i){const o=t.current;if(!o||0===o.width)return;let l;if("horizontal"===n){const t=e.offsetX;l=r+(a-r)*(i?o.width-t:t)/o.width}else l=r+(a-r)*(o.height-e.offsetY)/o.height;return l=Math.round(l/s)*s,Math.max(r,Math.min(a,l))}(t,$,r,e,u,L,K)}),P,N,X,E.onCommit,E.onInput),q=c.useKeyboardEvents(h,r,e,u,N,E.onCommit,E.onInput),{datatipContent:G,datatipProps:J}=l.useMeterDatatip(h,X,E.datatip,E["aria-describedby"]),O=d.getMeterAriaProps(h,r,e,E["aria-label"],E["aria-labelledby"],E.thresholds),Q=n.mergeProps(Y,q,J,O),W=Math.max(0,Math.min(1,I)),Z=100*(h-r)/(e-r)+"%",ee=100*W+"%",{trackColor:te,indicatorColor:re}=d.getTrackAndIndicatorColor(h,F,E.trackColor,E.indicatorColor,E.thresholds),ae=function(e){let t={start:!1,end:!1};return e&&(t=e.reduce(((e,t)=>(e.start=e.start||"start"===t.position,e.end=e.end||"end"===t.position||null==t.position,e)),t)),t}(E.referenceLines),se=E.onCommit||E.onInput,{isTabbable:ne}=m.useTabbableMode(),{classes:ie,styles:{interactiveStyle:oe,barValueBaseStyle:le,barValueVerticalStyle:ce,barValueHorizontalStyle:de,barValueHighContrastStyle:he,barTrackBaseStyle:ue,barTrackHorizontalSizeStyle:Se,barTrackVerticalSizeStyle:me,barTrackBorderStyle:ye,barTrackMarginTopStyle:ge,barTrackMarginStartStyle:fe,barTrackMarginBottomStyle:be,barTrackMarginEndStyle:pe,barTrackMarginTopFitStyle:Te,barTrackMarginStartFitStyle:xe,barTrackMarginBottomFitStyle:ke,barTrackMarginEndFitStyle:ze,trackSectionHorizontalFirstStyle:Me,trackSectionHorizontalLastStyle:Be,trackSectionVerticalFirstStyle:Ce,trackSectionVerticalLastStyle:ve,trackSectionRoundedCornersStyle:Ve}}=y.useComponentTheme(g.MeterBarRedwoodTheme,{size:j,orientation:L}),we="fit"===j;return t.jsxs(t.Fragment,{children:[t.jsx("div",{tabIndex:ne?0:-1,...H,...Q,style:{width:we?M(ae,V,A):A?a.sizeToCSS(S):void 0,height:we?B(ae,w,A):A?void 0:a.sizeToCSS(S)},class:s.classNames([ie,...we?z(ae,A,Te,xe,ke,ze):[]]),children:t.jsxs(T.BarTrack,{ref:P,orientation:L,color:!R||"all"===F&&E.thresholds?"transparent":te,class:s.classNames([ue,se?oe:"",A?Se:me,!R||"all"===F&&E.thresholds?void 0:ye,...we?"":k(ae,A,ge,fe,be,pe)]),children:["all"===F&&E.thresholds?.filter((t=>t.max>r&&t.max<=e)).sort(((e,t)=>e.max-t.max)).map(((a,s,n)=>{const i=0===s?a.max-r:a.max-n[s-1].max,o=A?Be:ve;let l=0===s?A?Me:Ce:"";return a.max===e&&(l=0===s?Ve:o),t.jsxs(t.Fragment,{children:[t.jsx(v,{class:l,orientation:L,length:100*i/(e-r)+"%",color:a.color}),R&&s===n.length-1&&a.max<e?t.jsx(v,{class:o,color:te,orientation:L,length:100*(e-n[s].max)/(e-r)+"%"}):""]})})),t.jsx(T.BarValue,{length:Z,size:ee,orientation:L,class:s.classNames([le,A?de:ce,"active"===_?he:""]),color:re}),E.referenceLines?.map((a=>t.jsx(C,{color:a.color,orientation:L,percentage:100*(a.value-r)/(e-r)+"%",position:a.position,width:we?A?void 0:`calc(${p.xUnits(4)} + ${b.meterBarVars.size})`:void 0,height:we&&A?`calc(${p.xUnits(4)} + ${b.meterBarVars.size})`:void 0})))]})}),G]})}e.MeterBar=function({orientation:e,length:a,size:s,...n}){return t.jsx(t.Fragment,{children:"fit"===s?t.jsx(r.TrackResizeContainer,{width:"100%",height:"100%",children:(r,a)=>t.jsx(V,{width:r,height:a,orientation:e,size:s,...n})}):t.jsx(V,{size:s,length:a,orientation:e,...n})})}}));
//# sourceMappingURL=MeterBar-38666619.js.map
