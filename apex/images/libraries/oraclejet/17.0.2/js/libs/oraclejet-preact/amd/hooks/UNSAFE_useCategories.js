define(['exports', 'preact/hooks', '../eventsUtils-5d567a9d'], (function(e,t,r){"use strict";const n=(e,t)=>{const r=new Set(e);return t.forEach((t=>{e.has(t)?r.delete(t):r.add(t)})),r};function u(e,t="any",r){return[...r].reduce(((r,n,u)=>{const c=e.get(n);return"any"===t?c?new Set([...r,...c]):r:u?new Set([...r].filter((e=>c.has(e)))):c}),new Set)}e.useCategories=(e,c,o=[],s="all",a=!0,i)=>{const d=t.useMemo((()=>function(e,t){const r=new Map,n=new Map;return e.forEach((e=>{const u=e.id,c=t(e);n.set(u,new Set(c)),c.forEach((e=>{r.has(e)?r.get(e)?.add(u):r.set(e,new Set([u]))}))})),{categoryToItem:r,itemToCategory:n}}(e,c)),[e,c]),l=new Set(o),f=u(d.categoryToItem,s,l),g=t.useRef(l),w=t.useRef(f);r.isEqual(f,w.current)||(w.current=f),r.isEqual(g.current,l)||(g.current=l,i?.([...l]));return{ids:[...w.current],updateCategories:e=>{let t=null!=e?d.itemToCategory.get(e):new Set([]),c=u(d.categoryToItem,s,t);a||(c=n(w.current,c),t=n(g.current,t)),r.isEqual(c,w.current)||(w.current=c),t&&!r.isEqual(t,g.current)&&(g.current=t,i?.([...t]))}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_useCategories.js.map
