{"version":3,"file":"useSelectDrill-9ce5bccf.js","sources":["../../src/hooks/PRIVATE_useChartEvents/useDatatipAndCursor.ts","../../src/hooks/PRIVATE_useChartEvents/useSelectDrill.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { mergeProps } from '../../utils/UNSAFE_mergeProps';\nimport { useChartDataCursor } from '../PRIVATE_useChartDataCursor';\nimport { useChartDatatip } from '../PRIVATE_useChartDatatip';\nimport { ChartItemData } from '../../utils/UNSAFE_visTypes/chart';\n\ntype DataCursorProps = Parameters<typeof useChartDataCursor>[0];\ntype DatatipProps<K extends string | number, D extends ChartItemData<K>> = Parameters<\n  typeof useChartDatatip<K, D>\n>[0];\n\nexport function useChartDatatipAndCursor<K extends string | number, D extends ChartItemData<K>>({\n  series,\n  groups,\n  width,\n  height,\n  findNearest,\n  getMarkerInfo,\n  onDataCursorPositionChange,\n  isDataCursorEnabled,\n  dataCursorPosition,\n  dataCursorStyle,\n  hoveredItemInfo,\n  focusedItemInfo,\n  getDataItem,\n  getDataItemPos,\n  datatip,\n  valueFormats,\n  isHoriz,\n  xScale,\n  yScale,\n  plotAreaSpace,\n  timeAxisType,\n  touchResponse,\n  isDisabled\n}: DataCursorProps & DatatipProps<K, D>) {\n  const { datatipContent, datatipProps } = useChartDatatip<K, D>({\n    series,\n    groups,\n    width,\n    height,\n    isDataCursorEnabled,\n    dataCursorPosition,\n    hoveredItemInfo,\n    getDataItem,\n    getDataItemPos,\n    focusedItemInfo,\n    datatip,\n    valueFormats,\n    isHoriz,\n    xScale,\n    findNearest,\n    timeAxisType,\n    touchResponse,\n    isDisabled\n  });\n\n  const { dataCursorContent, dataCursorProps } = useChartDataCursor({\n    touchResponse,\n    findNearest,\n    dataCursorPosition,\n    onDataCursorPositionChange,\n    isDataCursorEnabled,\n    dataCursorStyle,\n    isHoriz,\n    getMarkerInfo,\n    focusedItemInfo,\n    plotAreaSpace,\n    yScale,\n    xScale,\n    getDataItemPos\n  });\n\n  return {\n    datatipContent,\n    dataCursorContent,\n    datatipProps: mergeProps(dataCursorProps, datatipProps)\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { getInfo } from '../../utils/UNSAFE_visUtils';\nimport { useChartDrill } from '../PRIVATE_useChartDrill';\nimport { useSelection } from '../PRIVATE_useVisSelection/useSelection';\nimport { mergeProps } from '../../utils/UNSAFE_mergeProps';\nimport { ChartItemData } from '../../utils/UNSAFE_visTypes/chart';\n\ntype DrillProps<K, D extends ChartItemData<K>> = Parameters<typeof useChartDrill<K, D>>[0];\n\ntype SelectionProps<K, D> = {\n  selection: K[];\n  onChange?: (detail: { ids: K[]; data: (D | undefined)[] }) => void;\n  getDataById: (id: K) => D | undefined;\n};\n\nexport function useSelectDrill<K, D extends ChartItemData<K>>({\n  selectionMode,\n  selection,\n  onChange,\n  rootRef,\n  drilling,\n  onItemDrill,\n  onGroupDrill,\n  focusedGroupInfo,\n  focusedItemInfo,\n  groups,\n  getDataItem,\n  getDataById\n}: DrillProps<K, D> & SelectionProps<K, D>) {\n  const idExtracter = (event: Event): K | undefined => {\n    const isItemFocused = focusedItemInfo.isCurrent;\n    const info =\n      isItemFocused && event.type === 'keyup'\n        ? focusedItemInfo\n        : getInfo(rootRef, event.target as HTMLElement);\n    return info && info.seriesIndex != null && info.groupIndex != null\n      ? getDataItem(info.seriesIndex, info.groupIndex)?.id\n      : undefined;\n  };\n\n  const { selectionProps, selectionContent } = useSelection<K, D>({\n    idExtracter,\n    isDrillEnabled: drilling === 'on',\n    selection,\n    selectionMode,\n    onChange,\n    getDataById\n  });\n\n  const drillProps = useChartDrill<K, D>({\n    rootRef,\n    selectionMode,\n    drilling,\n    focusedItemInfo,\n    focusedGroupInfo,\n    groups,\n    getDataItem,\n    onItemDrill,\n    onGroupDrill\n  });\n\n  return { selectDrillProps: mergeProps(selectionProps, drillProps), selectionContent };\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;;;;;;AAMG;AAYG,SAAU,wBAAwB,CAAwD,EAC9F,MAAM,EACN,MAAM,EACN,KAAK,EACL,MAAM,EACN,WAAW,EACX,aAAa,EACb,0BAA0B,EAC1B,mBAAmB,EACnB,kBAAkB,EAClB,eAAe,EACf,eAAe,EACf,eAAe,EACf,WAAW,EACX,cAAc,EACd,OAAO,EACP,YAAY,EACZ,OAAO,EACP,MAAM,EACN,MAAM,EACN,aAAa,EACb,YAAY,EACZ,aAAa,EACb,UAAU,EAC2B,EAAA;AACrC,IAAA,MAAM,EAAE,cAAc,EAAE,YAAY,EAAE,GAAG,eAAe,CAAO;QAC7D,MAAM;QACN,MAAM;QACN,KAAK;QACL,MAAM;QACN,mBAAmB;QACnB,kBAAkB;QAClB,eAAe;QACf,WAAW;QACX,cAAc;QACd,eAAe;QACf,OAAO;QACP,YAAY;QACZ,OAAO;QACP,MAAM;QACN,WAAW;QACX,YAAY;QACZ,aAAa;QACb,UAAU;AACX,KAAA,CAAC,CAAC;AAEH,IAAA,MAAM,EAAE,iBAAiB,EAAE,eAAe,EAAE,GAAG,kBAAkB,CAAC;QAChE,aAAa;QACb,WAAW;QACX,kBAAkB;QAClB,0BAA0B;QAC1B,mBAAmB;QACnB,eAAe;QACf,OAAO;QACP,aAAa;QACb,eAAe;QACf,aAAa;QACb,MAAM;QACN,MAAM;QACN,cAAc;AACf,KAAA,CAAC,CAAC;IAEH,OAAO;QACL,cAAc;QACd,iBAAiB;AACjB,QAAA,YAAY,EAAE,UAAU,CAAC,eAAe,EAAE,YAAY,CAAC;KACxD,CAAC;AACJ;;ACrFA;;;;;;AAMG;AAgBG,SAAU,cAAc,CAAgC,EAC5D,aAAa,EACb,SAAS,EACT,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,gBAAgB,EAChB,eAAe,EACf,MAAM,EACN,WAAW,EACX,WAAW,EAC6B,EAAA;AACxC,IAAA,MAAM,WAAW,GAAG,CAAC,KAAY,KAAmB;AAClD,QAAA,MAAM,aAAa,GAAG,eAAe,CAAC,SAAS,CAAC;QAChD,MAAM,IAAI,GACR,aAAa,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO;AACrC,cAAE,eAAe;cACf,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,MAAqB,CAAC,CAAC;AACpD,QAAA,OAAO,IAAI,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI;AAChE,cAAE,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE;cAClD,SAAS,CAAC;AAChB,KAAC,CAAC;AAEF,IAAA,MAAM,EAAE,cAAc,EAAE,gBAAgB,EAAE,GAAG,YAAY,CAAO;QAC9D,WAAW;QACX,cAAc,EAAE,QAAQ,KAAK,IAAI;QACjC,SAAS;QACT,aAAa;QACb,QAAQ;QACR,WAAW;AACZ,KAAA,CAAC,CAAC;IAEH,MAAM,UAAU,GAAG,aAAa,CAAO;QACrC,OAAO;QACP,aAAa;QACb,QAAQ;QACR,eAAe;QACf,gBAAgB;QAChB,MAAM;QACN,WAAW;QACX,WAAW;QACX,YAAY;AACb,KAAA,CAAC,CAAC;AAEH,IAAA,OAAO,EAAE,gBAAgB,EAAE,UAAU,CAAC,cAAc,EAAE,UAAU,CAAC,EAAE,gBAAgB,EAAE,CAAC;AACxF;;;;"}