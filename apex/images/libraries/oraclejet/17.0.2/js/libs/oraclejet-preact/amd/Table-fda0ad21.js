define(['exports', 'preact/jsx-runtime', 'preact/hooks', 'preact/compat', './classNames-08d99695', './useId-c9578d26', './TabbableModeContext-a9c97640', './useUser-6dd85af9', './LoadMoreCollection-83413a59', './PRIVATE_Table/themes/Table.css', './Skeleton-325116ff', './Selector-ad2af152', './keys-cc1cb01d', './Text-e132dec0', './PRIVATE_Table/themes/redwood/TableCellTheme', './useComponentTheme-5aa41a8f', './PRIVATE_Table/themes/redwood/TableRowTheme', './useInteractionStyle-360d25a5', './useTranslationBundle-6ef0dab6', './PRIVATE_Table/themes/TableRowStyles.css', './PRIVATE_Table/themes/redwood/TableNoDataTheme', './SelectorAll-879d186e', './PRIVATE_Table/themes/redwood/TableHeaderCellTheme', './ChevronUp-dd92fc9c', './ChevronUpDown-09c77868', './ChevronDown-575edbfc', './EmbeddedIconButton-b22df710', './PRIVATE_Table/themes/redwood/TableFooterCellTheme', './FocusTracker-545d5904', './mergeProps-bcfa6a92', './collectionUtils-6740111c', './tabbableUtils-62c44f56', './clientHints-030d25aa', './textSelectionUtils-06c7855d', './PRIVATE_Table/themes/TableStyles.css', './PRIVATE_Table/themes/redwood/TableTheme', './useResizeObserver-c63865cc', './useTestId-82cf22a4'], (function(e,t,l,n,o,r,i,a,s,c,u,d,y,f,m,S,h,b,g,p,R,w,C,k,v,E,K,x,T,j,A,I,F,H,z,P,D,W){"use strict";function L({tableId:e,columnWidthsArray:l}){const n=e=>null==e?"":`width: ${e}px;`;return t.jsx("colgroup",{children:l.map((l=>t.jsx("col",{style:n(l),"data-oj-table-col":e})))})}const $=50;function B({colspan:e,preactKey:n,minimumCount:r=1}){const[i,a]=l.useState(!1);l.useEffect((()=>{setTimeout((()=>{a(!0)}),$)}),[]);const d=o.classNames([c.tableSkeletonCellStyles.base]);return t.jsx("tr",{class:s.LOADMORE_STYLE_CLASS,children:i?t.jsx("td",{class:d,colSpan:e,role:"presentation",children:[...Array(r)].map((e=>t.jsx("div",{class:c.tableSkeletonBarContainerStyles.base,children:t.jsx(u.Skeleton,{height:"4x"})})))}):null},n)}function M({rowData:e,field:l}){return null!=l?t.jsx(f.Text,{truncation:"ellipsis",variant:"primary",size:"md",children:String(e[l])}):null}function q({tableId:e,rowData:l,field:n,columnKey:i,columnIndex:a,rowKey:s,rowIndex:c,isFinalRowIndex:u,isFinalColumnIndex:d,hasVerticalGridlines:y,hasHorizontalGridlines:f,isRowSelected:h,isPreviousRowSelected:b,isColumnSelected:g,isPreviousColumnSelected:p,isShowFocusRing:R,isRowHeader:w,stickyColumn:C="none",renderer:k=M,selectorRenderer:v,isRowSelectionEnabled:E,isRowSingleSelection:K,variant:x,applyActiveStyle:T,applyHoverStyle:j,applyPseudoHoverStyle:A,isStickyStartEdge:I,isStickyEndEdge:F,isRtl:H}){const z=k!==M,{classes:P}=S.useComponentTheme(m.TableCellRedwoodTheme,{defaultRenderer:z?"notDefaultRenderer":"isDefaultRenderer",firstRow:0===c?"isFirstRow":"notFirstRow",lastRow:u?"isLastRow":"notLastRow",firstColumn:0===a?"isFirstColumn":"notFirstColumn",lastColumn:d?"isLastColumn":"notLastColumn",borderTopSpacer:K&&(h||b)||f&&0!==c?"notBorderTopSpacer":"isBorderTopSpacer",borderBottomSpacer:u&&!(K&&h||f)?"isBorderBottomSpacer":"notBorderBottomSpacer",borderStartSpacer:p||g||y&&0!==a?"notBorderStartSpacer":"isBorderStartSpacer",borderEndSpacer:d&&!g?"isBorderEndSpacer":"notBorderEndSpacer",verticalGrid:y?"isVerticalGrid":"notVerticalGrid",horizontalGrid:f?"isHorizontalGrid":"notHorizontalGrid",rowSingleSelection:K?"isRowSingleSelection":"notRowSingleSelection",rowSelectable:E?"isRowSelectable":"notRowSelectable",rowSelected:h?"isRowSelected":"notRowSelected",previousRowSelected:b?"isPreviousRowSelected":"notPreviousRowSelected",columnSelected:g?"isColumnSelected":"notColumnSelected",previousColumnSelected:p?"isPreviousColumnSelected":"notPreviousColumnSelected",stickyStartColumn:"start"===C?"isStickyStartColumn":"notStickyStartColumn",stickyEndColumn:"end"===C?"isStickyEndColumn":"notStickyEndColumn",stickyStartEdge:I?"isStickyStartEdge":"notStickyStartEdge",stickyEndEdge:F?"isStickyEndEdge":"notStickyEndEdge",rowHighlight:"highlight"===x?"isRowHighlight":"notRowHighlight",showFocusRing:R?"isShowFocusRing":"notShowFocusRing",active:T?"isActive":"notActive",hover:j?"isHover":"notHover",pseudoHover:A?"isPseudoHover":"notPseudoHover",rtl:H?"isRtl":"notRtl"}),D=o.classNames([P]),W={rowData:l,rowKey:s,field:n,columnKey:i,selector:v};return t.jsx("td",{"aria-colindex":a+1,class:D,id:r.useId(),tabIndex:-1,role:w?"rowheader":"gridcell","data-oj-cell-type":"data","data-oj-column-key":i,"data-oj-table-focusable":e,"data-oj-table-data-cell":e,..."number"==typeof i&&{"data-oj-column-key-type":"number"},children:k(W)})}const V=n.memo((function({tableId:e,rowKey:l,rowData:n,rowIndex:r,isFinalRow:i,columnsArray:a,rowHeaderColumnKeys:s,hasVerticalGridlines:c,hasHorizontalGridlines:u,isSelected:f,isPreviousSelected:m,isRowSelectionEnabled:p,isSingleRowSelectionEnabled:R,selectedRowKeys:w={all:!1,keys:new Set},focusRingColumnKey:C,selectedColumnKeys:k={all:!1,keys:new Set},variant:v,onSelectionChange:E,startStickyEdge:K,endStickyEdge:x,isRtl:T}){const j=g.useTranslationBundle("@oracle/oraclejet-preact"),{interactionProps:A,applyActiveStyle:I,applyHoverStyle:F,applyPseudoHoverStyle:H}=b.useInteractionStyle(),{classes:z}=S.useComponentTheme(h.TableRowRedwoodTheme,{lastRow:i?"isLastRow":"notLastRow"}),P=o.classNames([z]),D=(r+2).toString(),W=e=>{null!=E&&E({value:{row:e.value,column:k},target:e.target},!1)},L=p&&!R?()=>t.jsx(d.Selector,{"aria-label":j.collection_selectRow({ROW_NAME:D}),onChange:W,rowKey:l,selectedKeys:w}):void 0;let $=!1;return t.jsx("tr",{"aria-rowindex":r+1,class:P,role:"row","data-oj-key":l,"data-oj-table-data-row":e,...p?f?{"aria-selected":!0}:{"aria-selected":!1}:{},..."number"==typeof l&&{"data-oj-key-type":"number"},...p&&A,children:a.map(((o,d)=>{const S=o.key,h=y.containsKey(k,S),b={tableId:e,rowData:n,field:o.value.field,stickyColumn:o.value.stickyEdge,columnKey:S,columnIndex:d,rowKey:l,rowIndex:r,isFinalRowIndex:i,isFinalColumnIndex:d===a.length-1,hasVerticalGridlines:c,hasHorizontalGridlines:u,isRowSelected:f,isPreviousRowSelected:m,isColumnSelected:h,isPreviousColumnSelected:$,isShowFocusRing:o.key===C,isRowHeader:s.has(o.key),renderer:o.value.renderer,selectorRenderer:L,isRowSelectionEnabled:p,variant:v,isRowSingleSelection:R,applyActiveStyle:I,applyHoverStyle:F,applyPseudoHoverStyle:H,isStickyStartEdge:d===K,isStickyEndEdge:d===x,isRtl:T};return $=h,t.jsx(q,{...b})}))})}),((e,t)=>{return!(!e||!t)&&(e.tableId===t.tableId&&e.rowKey===t.rowKey&&e.rowData===t.rowData&&e.rowIndex===t.rowIndex&&e.isFinalRow===t.isFinalRow&&((e,t)=>{if(e.length===t.length){for(let l=0;l<e.length;l++)if(e[l].key!==t[l].key||e[l].value!==t[l].value)return!1;return!0}return!1})(e.columnsArray,t.columnsArray)&&e.horizontalGridlines===t.horizontalGridlines&&e.verticalGridlines===t.verticalGridlines&&(l=e.rowHeaderColumnKeys,n=t.rowHeaderColumnKeys,null==l?null==n:null!=n&&l.size===n.size&&[...l].every((e=>n.has(e))))&&e.isSelected===t.isSelected&&e.isPreviousSelected===t.isPreviousSelected&&e.isRowSelectionEnabled===t.isRowSelectionEnabled&&e.isSingleRowSelectionEnabled===t.isSingleRowSelectionEnabled&&(!(e.isRowSelectionEnabled&&!e.isSingleRowSelectionEnabled)||y.isSameKey(e.selectedRowKeys,t.selectedRowKeys))&&y.isSameKey(e.selectedColumnKeys,t.selectedColumnKeys)&&e.focusRingColumnKey===t.focusRingColumnKey&&e.variant===t.variant&&e.onSelectionChange===t.onSelectionChange&&e.startStickyEdge===t.startStickyEdge&&e.endStickyEdge===t.endStickyEdge&&e.isRtl===t.isRtl);var l,n}));function G({tableId:e,columnsCount:l,isShowFocusRing:n,renderer:i}){const a=g.useTranslationBundle("@oracle/oraclejet-preact"),s=o.classNames([p.tableRowStyles.base]),{classes:c}=S.useComponentTheme(R.TableNoDataRedwoodTheme,{defaultRenderer:null==i?"isDefaultRenderer":"notDefaultRenderer",showFocusRing:n?"isShowFocusRing":"notShowFocusRing"}),u=o.classNames([c]);const d=null!=i?i:function(){return t.jsx(f.Text,{truncation:"ellipsis",variant:"primary",size:"md",children:a.collection_noData()})};return t.jsx("tr",{"aria-rowindex":2,class:s,role:"row",children:t.jsx("td",{"aria-colindex":1,class:u,id:r.useId(),tabIndex:-1,role:"gridcell",colSpan:l,"data-oj-cell-type":"noData","data-oj-table-focusable":e,"data-oj-table-nodata-cell":e,children:d()})})}function N({tableId:e,getAccessibleRowHeaders:n,data:r,columnsArray:i,hasVerticalGridlines:a,hasHorizontalGridlines:u,isShowFocusRing:d,getRowKey:f,hasMore:m,onLoadMore:S,viewportConfig:h,currentCell:b,currentRowVariant:g,selected:p,isRowSelectionEnabled:R,isSingleRowSelectionEnabled:w,onSelectionChange:C,noDataRenderer:k,startStickyEdge:v,endStickyEdge:E,isRtl:K}){const x=l.useRef((new Date).getTime()),T=l.useRef(),j=o.classNames([c.collectionStyles.base]),A=l.useCallback((e=>({index:e.index,data:e.data.data,key:f(e.data.data)})),[f]);let I=!1;const F=null!=r?r.map((e=>({data:e,metadata:f(e)}))):[],H=null!=r&&0===r.length&&m,z=null==r||0===r.length&&!m;return T.current!==H&&(x.current=(new Date).getTime()),T.current=H,t.jsx("tbody",{class:j,children:z?t.jsx(G,{tableId:e,columnsCount:i.length,isShowFocusRing:d&&"noData"===b?.type,renderer:k}):t.jsx(s.LoadMoreCollection,{data:F,loadMoreIndicator:t.jsx(B,{colspan:i.length,preactKey:x.current,minimumCount:H?25:3}),hasMore:m,onLoadMore:S,viewportConfig:h,children:l=>{const o=A(l),s=o.key,c=b?.rowKey===s,f=c&&d?b.columnKey:void 0,m=y.containsKey(p.row,s),S={tableId:e,columnsArray:i,rowHeaderColumnKeys:n(o),hasVerticalGridlines:a,hasHorizontalGridlines:u,isSelected:m,isPreviousSelected:I,onSelectionChange:C,isRowSelectionEnabled:R,isSingleRowSelectionEnabled:w,variant:c?g:"none",focusRingColumnKey:f,selectedRowKeys:p.row,selectedColumnKeys:p.column,rowIndex:o.index,rowKey:s,rowData:o.data,isFinalRow:o.index===(null!=r?r.length-1:-1),startStickyEdge:v,endStickyEdge:E,isRtl:K};return I=m,t.jsx(V,{...S})}})})}function X({tableId:e,columnKey:n,columnIndex:i,isFinalColumnIndex:a,hasVerticalGridlines:s,isSelected:u,isPreviousSelected:d,isColumnSelectable:m,isRowSelectionEnabled:h,selectedColumnKeys:p={all:!1,keys:new Set},selectedRowKeys:R={all:!1,keys:new Set},isShowFocusRing:x,headerText:T,stickyColumn:j="none",renderer:A,onSelectionChange:I,sortable:F="disabled",sortDirection:H,onSortCriterionChange:z,isStickyStartEdge:P,isStickyEndEdge:D,isRtl:W}){const L=g.useTranslationBundle("@oracle/oraclejet-preact"),{interactionProps:$,applyActiveStyle:B,applyHoverStyle:M,applyPseudoHoverStyle:q}=b.useInteractionStyle(),V=null!=A,{classes:G}=S.useComponentTheme(C.TableHeaderCellRedwoodTheme,{defaultRenderer:V?"notDefaultRenderer":"isDefaultRenderer",firstColumn:0===i?"isFirstColumn":"notFirstColumn",lastColumn:a?"isLastColumn":"notLastColumn",borderStartSpacer:d||u||s&&0!==i?"notBorderStartSpacer":"isBorderStartSpacer",borderEndSpacer:a&&!u?"isBorderEndSpacer":"notBorderEndSpacer",verticalGrid:s?"isVerticalGrid":"notVerticalGrid",columnSelectable:m?"isColumnSelectable":"notColumnSelectable",columnSelected:u?"isColumnSelected":"notColumnSelected",previousColumnSelected:d?"isPreviousColumnSelected":"notPreviousColumnSelected",stickyStartColumn:"start"===j?"isStickyStartColumn":"notStickyStartColumn",stickyEndColumn:"end"===j?"isStickyEndColumn":"notStickyEndColumn",stickyStartEdge:P?"isStickyStartEdge":"notStickyStartEdge",stickyEndEdge:D?"isStickyEndEdge":"notStickyEndEdge",showFocusRing:x?"isShowFocusRing":"notShowFocusRing",active:B?"isActive":"notActive",hover:M?"isHover":"notHover",pseudoHover:q?"isPseudoHover":"notPseudoHover",rtl:W?"isRtl":"notRtl"}),N=o.classNames([G]);let X;X=y.isSameKey(R,{all:!0,deletedKeys:new Set})?"all":y.isSameKey(R,{all:!1,keys:new Set})?"none":"partial";const O=e=>{null!=I&&I({value:{row:e.value,column:p},target:e.target},!1)},_={key:n,headerText:T,sortable:F,sortDirection:H,selector:h?()=>t.jsx(w.SelectorAll,{"aria-label":L.collection_selectAllRows(),onChange:O,selected:X}):void 0,sortControl:"enabled"===F||null!=H?()=>t.jsx(K.EmbeddedIconButton,{"aria-label":"enabled"===F?L.collection_sortEnabled():L.collection_sortDisabled(),isDisabled:"enabled"!==F,onAction:U,children:"ascending"===H?t.jsx(k.SvgChevronUp,{}):"descending"===H?t.jsx(E.SvgChevronDown,{}):t.jsx(v.SvgChevronUpDown,{})}):void 0},U=l.useCallback((()=>{if(null!=z){z([{key:n,sortDirection:"ascending"===H?"descending":"ascending"}])}}),[n,H,z]),Y=l.useCallback((()=>null!=A?A:({headerText:e,sortControl:l})=>{const n=null!=e?t.jsx("div",{class:c.tableHeaderCellTextStyles.base,children:t.jsx(f.Text,{overflowWrap:"normal",lineClamp:2,variant:"primary",size:"md",children:e})}):null;return null!=l?t.jsxs("div",{class:c.tableHeaderSortContainerStyles.base,children:[n,l()]}):n}),[A]);return t.jsx("th",{"aria-colindex":i+1,...u?{"aria-selected":!0}:m?{"aria-selected":!1}:void 0,...(()=>{if("ascending"===H||"descending"===H)return{"aria-sort":H}})(),class:N,id:r.useId(),tabIndex:-1,role:"columnheader","data-oj-cell-type":"header","data-oj-column-key":n,"data-oj-table-focusable":e,"data-oj-table-header-cell":e,..."number"==typeof n&&{"data-oj-column-key-type":"number"},...m&&$,children:Y()(_)})}function O({tableId:e,columnsArray:l,hasVerticalGridlines:n,focusedKey:r,isShowFocusRing:i,selectedColumnKeys:a,selectedRowKeys:s,isColumnSelectionEnabled:u,isRowSelectionEnabled:d,onSelectionChange:f,sortCriterion:m,onSortCriterionChange:S,startStickyEdge:h,endStickyEdge:b,isResizeHover:g,isRtl:p}){const R=o.classNames([c.tableHeaderRowStyles.base]),w=o.classNames([c.tableHeaderRowContainerStyles.base]);let C=!1;return t.jsx("thead",{class:w,children:t.jsx("tr",{class:R,role:"row",style:g?"cursor: col-resize;":"","data-oj-table-header-row":e,children:l.map(((o,c)=>{const g=o.key;let R;if(null!=m)for(const e of m)if(e.key===g){R=e.sortDirection;break}const w=y.containsKey(a,g),k={tableId:e,hasVerticalGridlines:n,columnKey:g,columnIndex:c,isFinalColumnIndex:c===l.length-1,stickyColumn:o.value.stickyEdge,isSelected:w,isPreviousSelected:C,selectedColumnKeys:a,selectedRowKeys:s,isColumnSelectable:u&&"disabled"!==o.value.selectable,isRowSelectionEnabled:d,isShowFocusRing:i&&g===r,headerText:o.value.headerText,renderer:o.value.headerRenderer,onSelectionChange:f,sortable:o.value.sortable,sortDirection:R,onSortCriterionChange:S,isStickyStartEdge:c===h,isStickyEndEdge:c===b,isRtl:p};return C=w,t.jsx(X,{...k})}))})})}function _({footerText:e}){return null!=e?t.jsx(f.Text,{truncation:"ellipsis",variant:"primary",size:"md",children:e}):null}function U({tableId:e,columnKey:l,columnIndex:n,isFinalColumnIndex:i,hasVerticalGridlines:a,isSelected:s,isPreviousSelected:c,isColumnSelectable:u,isShowFocusRing:d,stickyColumn:y="none",footerText:f,renderer:m=_,isStickyStartEdge:h,isStickyEndEdge:g,isRtl:p}){const{interactionProps:R,applyActiveStyle:w,applyHoverStyle:C,applyPseudoHoverStyle:k}=b.useInteractionStyle(),v=m!==_,{classes:E}=S.useComponentTheme(x.TableFooterCellRedwoodTheme,{defaultRenderer:v?"notDefaultRenderer":"isDefaultRenderer",firstColumn:0===n?"isFirstColumn":"notFirstColumn",lastColumn:i?"isLastColumn":"notLastColumn",borderStartSpacer:c||s||a&&0!==n?"notBorderStartSpacer":"isBorderStartSpacer",borderEndSpacer:i&&!s?"isBorderEndSpacer":"notBorderEndSpacer",verticalGrid:a?"isVerticalGrid":"notVerticalGrid",columnSelectable:u?"isColumnSelectable":"notColumnSelectable",columnSelected:s?"isColumnSelected":"notColumnSelected",previousColumnSelected:c?"isPreviousColumnSelected":"notPreviousColumnSelected",stickyStartColumn:"start"===y?"isStickyStartColumn":"notStickyStartColumn",stickyEndColumn:"end"===y?"isStickyEndColumn":"notStickyEndColumn",stickyStartEdge:h?"isStickyStartEdge":"notStickyStartEdge",stickyEndEdge:g?"isStickyEndEdge":"notStickyEndEdge",showFocusRing:d?"isShowFocusRing":"notShowFocusRing",active:w?"isActive":"notActive",hover:C?"isHover":"notHover",pseudoHover:k?"isPseudoHover":"notPseudoHover",rtl:p?"isRtl":"notRtl"}),K=o.classNames([E]),T={key:l,footerText:f};return t.jsx("td",{"aria-colindex":n+1,...s?{"aria-selected":!0}:u?{"aria-selected":!1}:{},class:K,id:r.useId(),tabIndex:-1,role:"gridcell","data-oj-cell-type":"footer","data-oj-column-key":l,"data-oj-table-focusable":e,"data-oj-table-footer-cell":e,..."number"==typeof l&&{"data-oj-column-key-type":"number"},...u&&R,children:m(T)})}function Y({tableId:e,isRendered:l,columnsArray:n,hasVerticalGridlines:r,focusedKey:i,isShowFocusRing:a,selectedKeys:s,isColumnSelectionEnabled:u,startStickyEdge:d,endStickyEdge:f,isRtl:m}){const S=o.classNames([c.tableFooterRowStyles.base]),h=o.classNames([c.tableFooterRowContainerStyles.base]);let b=!1;return l?t.jsx("tfoot",{class:h,children:t.jsx("tr",{class:S,role:"row","data-oj-table-footer-row":e,children:n.map(((l,o)=>{const c=l.key,S=y.containsKey(s,c),h={tableId:e,columnKey:c,columnIndex:o,isFinalColumnIndex:o===n.length-1,hasVerticalGridlines:r,stickyColumn:l.value.stickyEdge,isSelected:S,isPreviousSelected:b,isColumnSelectable:u&&"disabled"!==l.value.selectable,isShowFocusRing:a&&c===i,footerText:l.value.footerText,renderer:l.value.footerRenderer,isStickyStartEdge:o===d,isStickyEndEdge:o===f,isRtl:m};return b=S,t.jsx(U,{...h})}))})}):null}function J({position:e,isRtl:l}){const n=o.classNames([c.tableDragIndicatorStyles.base]);return t.jsx("div",{class:n,style:null!=e?l?`right:${e}px;cursor:col-resize;`:`left:${e}px;cursor:col-resize;`:"display:none;"})}const Q=e=>e.dataset.ojCellType,Z=e=>"number"===e.dataset.ojKeyType?Number(e.dataset.ojKey):e.dataset.ojKey,ee=(e,t,l)=>{if(null!=e){const n=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);if(n.length>l)return Z(n[l])}return null},te=(e,t,l)=>{if(null!=e){const n=e.querySelectorAll(`[data-oj-table-data-row='${t}']`),o=Array.prototype.indexOf.call(n,l);if(o>-1)return o}return null};const le=e=>"number"===e.dataset.ojColumnKeyType?Number(e.dataset.ojColumnKey):e.dataset.ojColumnKey,ne=(e,t,l,n)=>{if(null!=e){const o=e.querySelectorAll(n?`[data-oj-table-header-cell='${t}']`:`[data-oj-table-footer-cell='${t}']`),r=Array.prototype.indexOf.call(o,l);if(r>-1)return r}return null};function oe(e,t,l,n){const o=n?e.parentElement:e;if(null!=o){const e=o.closest(l);if(null!=e){const l=Q(e);if("data"===l)return{rowKey:A.keyExtractor(e,`[data-oj-table-data-row='${t}']`),columnKey:le(e),type:l};if("header"===l||"footer"===l)return{columnKey:le(e),type:l};if("noData"===l)return{type:l}}}return null}function re(e,t,l){if("header"===l.type){const n=e.querySelectorAll(`[data-oj-table-header-cell='${t}']`);for(const e of n)if(l.columnKey===le(e))return e}else if("footer"===l.type){const n=e.querySelectorAll(`[data-oj-table-footer-cell='${t}']`);for(const e of n)if(l.columnKey===le(e))return e}else if("data"===l.type){const n=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(const e of n)if(l.rowKey===Z(e)){const n=e.querySelectorAll(`[data-oj-table-focusable='${t}']`);for(const e of n)if(l.columnKey===le(e))return e}}else if("noData"===l.type)return e.querySelector(`[data-oj-table-nodata-cell='${t}']`);return null}const ie=(e,t)=>{const l=e.querySelector(`[data-oj-table-footer-row='${t}']`);return null!=l?l.getBoundingClientRect().height:0},ae=(e,t)=>{if(null!=e){const l=e.querySelector(`[data-oj-table-data-row='${t}']`);if(null!=l)return Z(l)}return null},se=(e,t)=>{const l=e.querySelectorAll(`[data-oj-table-data-row='${t}']`),n=l.length;return n>0?Z(l[n-1]):null},ce=(e,t)=>{if(null!=e){const l=e.querySelector(`[data-oj-table-focusable='${t}']`);if(null!=l){const e=Q(l);return"header"===e||"footer"===e?{columnKey:le(l),type:e}:"noData"===e?{type:"noData"}:{rowKey:Z(l),columnKey:le(l),type:"data"}}}return null},ue=(e,t)=>null!=e&&e.querySelectorAll(`[data-oj-table-nodata-cell='${t}']`).length>0,de=(e,t)=>null!=e&&e.querySelectorAll(`[data-oj-table-footer-row='${t}']`).length>0;const ye=(e,t,l,n,o,r)=>{const i=((e,t)=>{const l=e.querySelector(`[data-oj-table-header-row='${t}']`);return null!=l?l.getBoundingClientRect().height:0})(e,t),a=ie(e,t),s=Se(l,n,i,a,o),c=s.top,u=c>=0,d=s.bottom,y=d>=0;u&&y||(null==r||"inView"===r?y?Math.abs(c)>Math.abs(d)?n.scrollTop=fe(n.scrollTop+d,!0):n.scrollTop=fe(n.scrollTop-c,!1):u&&(Math.abs(d)>Math.abs(c)?n.scrollTop=fe(n.scrollTop-c,!1):n.scrollTop=fe(n.scrollTop+d,!0)):n.scrollTop="top"===r?fe(n.scrollTop-c,!1):fe(n.scrollTop+d,!0))},fe=(e,t)=>t?Math.ceil(e):Math.floor(e),me=(e,t,l,n,o,r)=>{const i=e.getBoundingClientRect(),a=t.getBoundingClientRect();return r?{left:a.left-i.left+n+o,right:i.right-a.right+l}:{left:a.left-i.left+l,right:i.right-a.right+n+o}},Se=(e,t,l,n,o)=>{const r=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{top:i.top-r.top+l,bottom:r.bottom-i.bottom+n+o}};function he(e,t,l,n,o){const r=function(e,t,l,n){if(null!=n){let o,r=!1;if(null!=n.columnKey)r=!0,o=n.columnKey;else if(null!=n.offsetX&&null==n.x){r=!0;o=ge(e,t,l).columnKey}if(r){if(null!=o){let e=0;for(let r=0;r<l.length;r++){if(t[r].key===o)return e+(null!=n.offsetX?n.offsetX:0);"start"!==t[r].value.stickyEdge&&(e+=l[r])}}}else if(null!=n.x)return n.x}return}(e,t,l,o);e.scrollLeft=null!=r?n?-r:r:0}function be(e,t,l){const n=function(e,t,l){if(null!=l){let n,o=!1;if(null!=l.rowKey?(o=!0,n=l.rowKey):null!=l.offsetY&&null==l.y&&(o=!0,n=pe(e,t).rowKey),o){if(null!=n){let o=0;const r=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(let e=0;e<r.length;e++){if(n===Z(r[e]))return o+(null!=l.offsetY?l.offsetY:0);o+=r[e].getBoundingClientRect().height}}}else if(null!=l.y)return l.y}return}(e,t,l);e.scrollTop=null!=n?n:0}function ge(e,t,l,n){const o=Math.abs(null==n?e.scrollLeft:n),r={x:o,columnKey:void 0,offsetX:void 0};let i=0;if(t.length>0&&0===o)return r.columnKey=t[0].key,r.offsetX=0,r;for(let e=0;e<t.length;e++)if("start"!==t[e].value.stickyEdge&&(i+=l[e]),o<i){r.columnKey=t[e].key,r.offsetX=l[e]+o-i;break}return r}function pe(e,t,l){const n=Math.abs(null==l?e.scrollTop:l),o={y:n,rowKey:void 0,offsetY:void 0};let r=0;const i=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);if(i.length>0&&0===n)return o.rowKey=ee(e,t,0),o.offsetY=0,o;for(let l=0;l<i.length;l++){const a=i[l].getBoundingClientRect().height;if(r+=a,n<r){o.rowKey=ee(e,t,l),o.offsetY=a+n-r;break}}return o}function Re(e,t,l,n,o,r,i,a){const s=a?.scroller()||e;if("data"===o.cell.type){const l=A.findElementByKey(e,o.cell.rowKey,`[data-oj-table-data-row='${t}']`);null!=l&&ye(e,t,l,s,n.boxHeight-n.contentHeight,o.locationY)}const c=re(e,t,o.cell);null!=c&&function(e,t,l,n,o,r,i){const a=le(e);let s;for(let e=0;e<l.length;e++)if(l[e].key===a){s=e;break}if(null!=s&&null!=r){let a=0,c=0;const u=we(l,!0);for(let e=0;e<u.length;e++){const t=u[e];if(!(t<s))break;a+=r[t]}const d=we(l,!1);for(let e=d.length-1;e>-1;e--){const t=d[e];if(!(t>s))break;c+=r[t]}const y=me(e,t,a,c,n,o),f=y.left,m=f>=0,S=y.right,h=S>=0;if(m&&h)return;null==i||"inView"===i?m?Math.abs(S)>Math.abs(f)?t.scrollLeft=fe(t.scrollLeft-f,!1):t.scrollLeft=fe(t.scrollLeft+S,!0):h&&(Math.abs(f)>Math.abs(S)?t.scrollLeft=fe(t.scrollLeft+S,!0):t.scrollLeft=fe(t.scrollLeft-f,!1)):t.scrollLeft="start"===i?fe(t.scrollLeft-f,!1):fe(t.scrollLeft+S,!0)}}(c,s,l,n.boxWidth-n.contentWidth,r,i,o.locationX)}const we=(e,t)=>{const l=[],n=t?"start":"end";for(let t=0;t<e.length;t++)e[t].value.stickyEdge===n&&l.push(t);return l},Ce=(e,t,l,n,o,r)=>{const i=r&&!l||!r&&l?"left":"right",a=`${o}px`;e.querySelectorAll(`[data-oj-table-header-cell='${t}']`)[n].style[i]=a;const s=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(let e=0;e<s.length;e++){s[e].querySelectorAll(`[data-oj-table-data-cell='${t}']`)[n].style[i]=a}const c=e.querySelectorAll(`[data-oj-table-footer-cell='${t}']`);if(c.length>0){c[n].style[i]=a}};function ke(e,t,l,n,o,r){if(t.length>0){let i,a;const s=ge(e,t,l,r);for(i=0;i<t.length;i++)if(t[i].key===s.columnKey){a=i;break}let c,u;if(s.x>=1){const e=we(t,!0);for(i=0;i<e.length;i++){const t=e[i];if(!(t<a))break;c=t}}let d=0;const y=e.scrollWidth-e.clientWidth-s.x;if(y>=1){const e=we(t,!1);for(let n=t.length-1;n>-1;n--)if(-1!==e.indexOf(n))u=n;else if(d+=l[n],d>y)break}n.start==c&&n.end==u||o({start:c,end:u})}}const ve=(e,t)=>t??{scroller:()=>e.current};function Ee(e,t){return null==e?null==t:null!=t&&(e?.rowKey===t?.rowKey&&e?.columnKey===t?.columnKey&&e?.type===t?.type)}function Ke(e,t,l,n,o,r){let i;const a=n.type;if("noData"!==a){const l=n.columnKey;if("data"===a){const a=n.rowKey,s=A.findElementByKey(e,a,`[data-oj-table-data-row='${t}']`);if(null!=s){const a=r?s.previousElementSibling:s.nextElementSibling;if(null!=a){const e=Z(a);null!=e&&(i={rowKey:e,columnKey:l,type:"data"},o({value:i}))}else r?(i={columnKey:n.columnKey,type:"header"},o({value:i})):de(e,t)&&(i={columnKey:n.columnKey,type:"footer"},o({value:i}))}}else if("header"!==a||r){if("footer"===a&&r){const r=se(e,t);null!=r?(i={rowKey:r,columnKey:l,type:"data"},o({value:i})):ue(e,t)?(i={type:"noData"},o({value:i})):(i={columnKey:n.columnKey,type:"header"},o({value:i}))}}else{const r=ae(e,t);null!=r?(i={rowKey:r,columnKey:l,type:"data"},o({value:i})):ue(e,t)?(i={type:"noData"},o({value:i})):de(e,t)&&(i={columnKey:n.columnKey,type:"footer"},o({value:i}))}}else{const n=je(l,!0);r?(i={columnKey:n,type:"header"},o({value:i})):de(e,t)&&(i={columnKey:n,type:"footer"},o({value:i}))}}function xe(e,t,l,n,o,r,i,a,s){const c=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);if(c.length>0){const u=pe(e,t),d=function(e,t,l){if(null!=e){const n=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(let e=0;e<n.length;e++)if(l===Z(n[e]))return e}return null}(e,t,u.rowKey);let y;if(i)y=0===u.offsetY?Math.max(d-1,0):d;else{const l=e.getBoundingClientRect(),o=n.current.boxHeight-n.current.contentHeight,r=l.bottom+ie(e,t)+o;for(y=d;c.length>y+1;){y+=1;if(c[y].getBoundingClientRect().bottom>r)break}}const f=ee(e,t,y);if(null!=f){const c={rowKey:f,columnKey:o.columnKey,type:"data"};f!==o.rowKey&&r({value:c}),Re(e,t,l,n.current,{cell:c,locationX:"inView",locationY:i?"bottom":"top"},a,s)}}}function Te(e,t,l,n){let o;const r=t.type;if("noData"!==r){const i=function(e,t,l){let n=-1;const o=t.length;for(let l=0;l<o;l++)if(t[l].key===e){n=l;break}return l&&0!==n?t[n-1].key:l||n===o-1?null:t[n+1].key}(t.columnKey,e,n);null!=i&&("data"===r?(o={rowKey:t.rowKey,columnKey:i,type:r},l({value:o})):(o={columnKey:i,type:r},l({value:o})))}}function je(e,t){return t?e[0].key:e[e.length-1].key}function Ae(e,t,l,n,o,r,i){let a;const s=n.type;if("noData"!==s){const c=n.columnKey,u=je(l,r);if(i)if(ue(e,t))a={type:"noData"},Ee(a,n)||o({value:a});else{const l=r?ae(e,t):se(e,t);null!=l&&(a={rowKey:l,columnKey:u,type:"data"},Ee(a,n)||o({value:a}))}else u!==c&&("data"===s?(a={rowKey:n.rowKey,columnKey:u,type:s},o({value:a})):(a={columnKey:u,type:s},o({value:a})))}}const Ie=0,Fe=200,He=[" ","F2","Enter","Esc","Escape","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Home","End","PageUp","PageDown"];function ze(e,t,l,n,o,r){let i,a;if("data"===r?.type){i=r.rowKey;const l=re(e,t,r);null!=l&&(a=l.parentElement)}else i=A.keyExtractor(o,`[data-oj-table-data-row='${t}']`),null!=i&&(a=o.closest(`[data-oj-table-data-row='${t}']`));if(null!=i&&null!=a){const r=te(e,t,a);if(null!=r){return n({context:{key:i,data:l[r]},target:o}),!0}}return!1}function Pe(e,t,l,n,o,r,i,a){const s={all:!1,keys:new Set};let c=null!=a?.row?a.row:s,u=null!=a?.column?a.column:s;const d=A.keyExtractor(n,`[data-oj-table-data-row='${t}']`);if(null!=d)"single"!==i?.row&&"multiple"!==i?.row||(c=null==c?{all:!1,keys:new Set([d])}:y.containsKey(c,d)?o?y.removeKey(c,d,!1):{all:!1,keys:new Set([d])}:o&&"multiple"===i.row?y.addKey(c,d):{all:!1,keys:new Set([d])},u=s);else if("single"===i?.column||"multiple"===i?.column){const r=n.closest(`[data-oj-table-focusable='${t}']`);if(null!=r){const n=Q(r);if("header"===n||"footer"===n){const a=ne(e,t,r,"header"===n);if(null!=a){const e=l[a];"disabled"!==e.value.selectable&&(u=null==u?{all:!1,keys:new Set([e.key])}:y.containsKey(u,e.key)?o?y.removeKey(u,e.key,!1):{all:!1,keys:new Set([e.key])}:o&&"multiple"===i.column?y.addKey(u,e.key):{all:!1,keys:new Set([e.key])},c=s)}}}}y.isSameKey(c,a?.row)&&y.isSameKey(u,a?.column)||r({value:{row:c,column:u},target:n},!1)}function De(e,t,l,n,o,r,i,a,s,c){const u={all:!1,keys:new Set};let d=null!=c?.row?c.row:u,f=null!=c?.column?c.column:u;if(i){if(f=u,"multiple"===s?.row)if(d=u,o<=r)for(let l=o;l<=r;l++){const n=ee(e,t,l);d=y.addKey(d,n)}else for(let l=o;l>=r;l--){const n=ee(e,t,l);d=y.addKey(d,n)}}else if(d=u,"multiple"===s?.column)if(f=u,o<=r)for(let e=o;e<=r;e++){const t=l[e];"disabled"!==t.value.selectable&&(f=y.addKey(f,t.key))}else for(let e=o;e>=r;e--){const t=l[e];"disabled"!==t.value.selectable&&(f=y.addKey(f,t.key))}y.isSameKey(d,c?.row)&&y.isSameKey(f,c?.column)||a({value:{row:d,column:f},target:n},!0)}function We(e,t,l,n,o,r,i,a,s,c,u,d,y){const f=re(e,t,i);if(null!=f){let m,S;const h="data"===i.type,b="header"===i.type;if(h?(S=f.parentElement,m=te(e,t,S)):(S=f,m=ne(e,t,S,b)),null!=m){let g,p;const R=a.current;null!=R?(p=r?R.previousElementSibling:R.nextElementSibling,null!=p?(a.current=p,g=h?te(e,t,p):ne(e,t,p,b)):g=h?te(e,t,R):ne(e,t,R,b)):(p=r?S.previousElementSibling:S.nextElementSibling,null!=p?(a.current=p,g=h?te(e,t,p):ne(e,t,p,b)):g=m),null!=g&&De(e,t,l,o,m,g,h,s,d,y);const w=null!=a.current?a.current:f;let C;if(h){const e=A.keyExtractor(w,`[data-oj-table-data-row='${t}']`);C={type:i.type,rowKey:e,columnKey:i.columnKey}}else C=oe(w,t,`[data-oj-table-focusable='${t}']`);Re(e,t,l,n.current,{cell:C,locationX:"inView",locationY:"inView"},c,u)}}}function Le(e,t,l,n,o,r){const i=e.querySelector(`[data-oj-table-header-row='${t}']`);if(null!=i){const e=i.querySelectorAll(`[data-oj-table-header-cell='${t}']`);if(A.getElementContainsFunc(i)(l.target)){let t=!1;for(let a=0;a<e.length;a++){const s=e[a].getBoundingClientRect(),c=r?s.left:s.right;if(Math.abs(c-l.pageX)<=8){if("enabled"!==n[a].value.edgeResizable)break;o.current.key=n[a].key,i.style.cursor="col-resize",t=!0,o.current.isResizeHover=!0}}t||(i.style.cursor="",o.current.key=void 0,o.current.isResizeHover=!1)}else null!=i&&(i.style.cursor=""),o.current.key=void 0,o.current.isResizeHover=!1}}function $e(e,t,l,n,o,r,i){if(o.current.isResizing&&null!=i){for(const e of o.current.fullColumnWidths);const a=e.querySelector(`[data-oj-table-inner-table='${t}']`);if(null!=a){const e=a.getBoundingClientRect(),t=r?e.right-l.clientX:l.clientX-e.left;o.current.delta=t-o.current.startX,i({key:o.current.key,delta:o.current.delta,allColumnWidths:n})}}o.current={isResizing:!1,isResizeHover:o.current.isResizeHover,ignoreClick:o.current.ignoreClick}}function Be({outerTableRef:e,tableId:t,data:n,isRtl:o,columnsArray:r,appliedColumnWidths:i,resizeInfoRef:a,selectionExtensionElementRef:s,fullColumnWidths:c,onColumnResizing:u,onColumnResize:d,currentCell:y,selectionMode:f,selected:m,onTableSelectionChange:S,onRowAction:h}){const b=l.useRef(!1),g=l.useCallback((l=>{null!=e.current&&null!=u&&(a.current.isResizing?function(e,t,l,n,o,r,i,a){if(o.current.isResizing&&null!=i){const i=e.querySelector(`[data-oj-table-inner-table='${t}']`);if(null!=i){const e=i.getBoundingClientRect(),t=r?e.right-l.clientX:l.clientX-e.left;o.current.delta=t-o.current.startX,null!=a&&a({key:o.current.key,delta:o.current.delta,allColumnWidths:n})}}}(e.current,t,l,i,a,o,c,u):function(e,t,l,n,o,r){Le(e,t,l,n,o,r)}(e.current,t,l,r,a,o))}),[e,t,r,i,a,o,c,u]),p=l.useCallback((l=>{if(null!=e.current){b.current="touch"===l.pointerType;const n=l.target;null!=S&&null!=y&&l.shiftKey&&function(e,t,l,n,o){const r=oe(l,t,`[data-oj-table-focusable='${t}']`);if(("multiple"===o?.row&&"data"===n.type||"multiple"===o?.column&&("header"===n.type||"footer"===n.type))&&r?.type===n.type){const l=re(e,t,n),o=re(e,t,r);if(null!=l&&null!=o){if("data"===r?.type)return null!=te(e,t,l.parentElement)&&null!=te(e,t,o.parentElement);if("header"===r?.type||"footer"===r?.type){const n="header"===r?.type;return null!=ne(e,t,l,n)&&null!=ne(e,t,o,n)}}}return!1}(e.current,t,n,y,f)?H.getIsSelectionPending()||l.preventDefault():function(e,t,l,n,o,r,i,a,s){if(null!=a&&(null==r.current.key&&Le(e,t,l,n,r,i),null!=r.current.key)){const n=e.querySelector(`[data-oj-table-inner-table='${t}']`);if(null!=n){const e=n.getBoundingClientRect(),t=i?e.right-l.clientX:l.clientX-e.left,c=[];for(let e=0;e<a.length;e++){const t=a[e];c.push(t)}return r.current={isResizing:!0,isResizeHover:!0,key:r.current.key,startX:t,delta:0,fullColumnWidths:c,ignoreClick:r.current.ignoreClick},null!=s&&s({key:r.current.key,delta:0,allColumnWidths:o}),!0}}return!1}(e.current,t,l,r,i,a,o,c,u)&&(l.preventDefault(),a.current.ignoreClick=!0)}}),[e,t,r,i,a,o,y,f,S,c,u]),R=l.useCallback((l=>{null!=e.current&&$e(e.current,t,l,i,a,o,d)}),[e,t,i,a,o,d]),w=l.useCallback((l=>{null!=e.current&&function(e,t,l){if(!l.current.isResizing){const n=e.querySelector(`[data-oj-table-header-row='${t}']`);null!=n&&(n.style.cursor=""),l.current.isResizeHover=!1}}(e.current,t,a)}),[e,t,a]),C=l.useCallback((l=>{null!=e.current&&function(e,t,l,n,o,r,i){o.current.isResizing&&0===l.buttons&&$e(e,t,l,n,o,r,i)}(e.current,t,l,i,a,o,d)}),[e,t,i,a,o,d]),k=l.useCallback((l=>{let o=!1;const i=F.getClientHints().platform,c=l.target;null!=e.current&&(null==S||a.current.ignoreClick||H.getIsSelectionPending()||(null!=y&&l.shiftKey&&(o=function(e,t,l,n,o,r,i,a,s){const c=oe(n,t,`[data-oj-table-focusable='${t}']`),u=re(e,t,o),d=re(e,t,c);if(null!=u&&null!=d&&("multiple"===a?.row&&"data"===c?.type||"multiple"===a?.column&&("header"===c?.type||"footer"===c?.type))&&c?.type===o.type){let o,y,f;const m="data"===c?.type;if(m)f=d.parentElement,o=te(e,t,u.parentElement),y=te(e,t,f);else if("header"===c?.type||"footer"===c?.type){const l="header"===c?.type;f=d,o=ne(e,t,u,l),y=ne(e,t,d,l)}if(null!=o&&null!=y)return r.current=f,De(e,t,l,n,o,y,m,i,a,s),!0}return!1}(e.current,t,r,c,y,s,S,f,m)),o||Pe(e.current,t,r,c,("mac"===i?l.metaKey:l.ctrlKey)||b.current,S,f,m)),null!=h&&null!=n&&!H.getIsSelectionPending()&&ze(e.current,t,n,h,c)&&l.stopPropagation()),a.current.ignoreClick=!1}),[e,t,r,n,a,s,y,f,m,S,h]);return{onPointerMove:g,onPointerDown:p,onPointerUp:R,onPointerLeave:w,onPointerEnter:C,onClick:k}}function Me({outerTableRef:e,tableId:t,data:n,isRtl:o,columnsArray:r,appliedColumnWidths:i,sizingInfoRef:a,resizeInfoRef:s,stickyEdgesState:c,setStickyEdgesState:u,cellHasRenderer:d,fullColumnWidths:y,onColumnResizing:f,onColumnResize:m,currentCellOverride:S,onPersistCurrentCell:h,selectionMode:b,selected:g,onSelectionChange:p,onRowAction:R,sortCriterion:w,onSortCriterionChange:C}){const k=l.useRef(),v=l.useMemo((()=>null!=p?(e,t)=>{t||(k.current=void 0),p(e)}:void 0),[p]),{focusHandlingProps:E,currentCell:K,onCurrentCellChanged:x,isShowFocusRing:T,isTabbableMode:H,onStartFocusTracking:z,onFocusStartEdge:P,onFocusEndEdge:D}=function({outerTableRef:e,tableId:t,isRtl:n,columnsArray:o,sizingInfoRef:r,selectionExtensionElementRef:i,cellSupportsTabbable:a,fullColumnWidths:s,currentCellOverride:c,onPersistCurrentCell:u}){const d=l.useRef(!1),y=l.useRef(!0);y.current=!0;const f=l.useRef(null),m=l.useRef(!1),[S,h]=l.useState(!1),[b,g]=l.useState(!1),p=l.useRef(!1),R=l.useRef(null),w=l.useRef(null),[C,k]=l.useState(c),v=l.useRef(c),[E,K]=l.useState(!1),x=l.useMemo((()=>e=>{k(e.value),v.current=e.value,i.current=void 0,null!=u&&u(e)}),[u,i]),T=l.useRef(c);T.current!==c&&(T.current=c,Ee(C,c)||x({value:c}));const j=l.useCallback((()=>{m.current=!1,h(!1),g(!1)}),[]),F=l.useCallback(((l,i)=>{const a=e.current;null!=a&&(h(!1),g(null!==w.current?w.current:!p.current),p.current||i||Re(a,t,o,r.current,{cell:l,locationX:"inView",locationY:"inView"},n,s),Ee(l,C)||x({value:l}))}),[e,t,o,r,n,C,x,s]),H=l.useCallback(((l,i,a)=>{const c=e.current;null!=c&&(h(!0),i||(g(!1),Ee(l,C)||x({value:l}),p.current||a||Re(c,t,o,r.current,{cell:l,locationX:"inView",locationY:"inView"},n,s)))}),[e,t,o,r,n,C,x,s]),z=l.useCallback((l=>{const n=e.current;if(null!=n){h(!1);const e=re(n,t,l);null!=e?e.focus({preventScroll:!0}):n.focus({preventScroll:!0})}}),[e,t]),P=l.useCallback((e=>{"touch"!==e.pointerType&&(null!=R.current&&clearTimeout(R.current),p.current=!0,R.current=setTimeout((()=>{p.current=!1,b&&g(!1)}),Ie))}),[b]),D=l.useCallback((()=>{null!=R.current&&clearTimeout(R.current),p.current=!0,R.current=setTimeout((()=>{p.current=!1,b&&g(!1)}),Fe)}),[b]),W=l.useCallback((l=>{m.current=!0;const n=e.current;if(null!=n){const e=d.current;d.current=!1;const o=l.target;if(o===n){const l=null!=C?C:ce(n,t);null!=l&&F(l,e)}else{const l=oe(o,t,`[data-oj-table-focusable='${t}']`);null!=l&&(null!=Q(o)?F(l,e):H(l,!1,e))}}null!=R.current&&(clearTimeout(R.current),R.current=null),p.current=!1,w.current=null}),[e,t,C,H,F]),L=l.useCallback((t=>{const l=e.current;if(null!=l){t.target===document.activeElement&&(w.current=b);const e=t.relatedTarget,n=null==e;d.current=n,!n&&A.getElementContainsFunc(l,!0)(e)||(j(),y.current&&(f.current=t.target)),K(!1)}}),[e,b,j]),$=l.useCallback((l=>{const i=e.current;null!=i&&null!=C&&(a(C)&&("F2"===l.key?S?z(C):H(C,!0):"Esc"===l.key||"Escape"===l.key?z(C):"Enter"!==l.key||S||H(C,!0)),He.indexOf(l.key)>-1&&!S&&(g(!0),Re(i,t,o,r.current,{cell:C,locationX:"inView",locationY:"inView"},n,s))),"Tab"!==l.key||S||K(!0)}),[e,t,o,r,n,S,C,a,s,H,z]),B=l.useCallback((l=>{const n=e.current;null!=n&&null!=C&&A.handleEnterActionableMode(l.hasFocusWithin&&null==Q(l.activeElement),I.allTabbableElements(re(n,t,C)),(e=>{h(null!=e)}))}),[e,C,t]),M=l.useCallback((e=>{A.handleWrapActionableFocus(!0,e.tabbableElements,(e=>{h(null!=e)}))}),[]),q=l.useCallback((e=>{A.handleWrapActionableFocus(!1,e.tabbableElements,(e=>{h(null!=e)}))}),[]);return l.useEffect((()=>{const l=f.current;f.current=null,y.current=!1;const n=e.current;if(null!=n){const e=I.getActiveElement(n);if(!(null==l||E||e!==I.getBodyElement(n)||A.getElementContainsFunc(n,!0)(l)&&I.isTabbableElement(l,!0)))return void n.focus({preventScroll:!0});if(m.current&&null!=C&&!E&&Ee(C,v.current)){const l=re(n,t,C);if(null!=l)(!S&&e!==l||S&&!A.getElementContainsFunc(l,!0)(e))&&l.focus({preventScroll:!0});else{const e=ce(n,t);null!=e&&x({value:e})}}}})),{focusHandlingProps:{onPointerDown:P,onTouchEnd:D,onFocus:W,onBlur:L,onKeyDown:$,tabIndex:E?-1:0},currentCell:C,onCurrentCellChanged:x,isShowFocusRing:b,isTabbableMode:S,onStartFocusTracking:B,onFocusStartEdge:M,onFocusEndEdge:q}}({outerTableRef:e,tableId:t,columnsArray:r,sizingInfoRef:a,selectionExtensionElementRef:k,isRtl:o,cellSupportsTabbable:d,fullColumnWidths:y,currentCellOverride:S,onPersistCurrentCell:h}),W=function({outerTableRef:e,tableId:t,data:n,isRtl:o,isTabbableMode:r,columnsArray:i,sizingInfoRef:a,selectionExtensionElementRef:s,fullColumnWidths:c,currentCell:u,onCurrentCellChanged:d,selectionMode:y,selected:f,onTableSelectionChange:m,onRowAction:S,sortCriterion:h,onSortCriterionChange:b}){const g=l.useCallback((l=>{const g=F.getClientHints().platform,p={" ":function(o){null!=e.current&&null!=u&&(r||(null!=m&&Pe(e.current,t,i,re(o,t,u),!0,m,y,f),l.preventDefault()),null!=S&&null!=n&&ze(e.current,t,n,S,l.target,u)&&l.stopPropagation())},Enter:function(){null!=e.current&&null!=u&&(null!=S&&null!=n&&"data"===u.type&&ze(e.current,t,n,S,l.target,u)||!r&&null!=b&&"header"===u.type&&function(e,t,l,n){for(const o of e)if(o.key===t){if("enabled"===o.value.sortable){let e;if(null!=n)for(const t of n)if(t.key===o.key){e=t.sortDirection;break}return l([{key:t,sortDirection:"ascending"===e?"descending":"ascending"}]),!0}break}return!1}(i,u.columnKey,b,h))&&l.stopPropagation()},ArrowUp:function(n){null!=e.current&&(r||null==u||("data"===u.type&&l.shiftKey&&null!=m&&"multiple"===y?.row?We(e.current,t,i,a,n,!0,u,s,m,o,c,y,f):Ke(n,t,i,u,d,!0),l.preventDefault()))},ArrowDown:function(n){null!=e.current&&(r||null==u||("data"===u.type&&l.shiftKey&&null!=m&&"multiple"===y?.row?We(e.current,t,i,a,n,!1,u,s,m,o,c,y,f):Ke(n,t,i,u,d,!1),l.preventDefault()))},ArrowLeft:function(n){null!=e.current&&(r||null==u||("header"!==u.type&&"footer"!==u.type||!l.shiftKey||null==m||"multiple"!==y?.column?Te(i,u,d,!o):We(e.current,t,i,a,n,!0,u,s,m,o,c,y,f),l.preventDefault()))},ArrowRight:function(n){null!=e.current&&(r||null==u||("header"!==u.type&&"footer"!==u.type||!l.shiftKey||null==m||"multiple"!==y?.column?Te(i,u,d,o):We(e.current,t,i,a,n,!1,u,s,m,o,c,y,f),l.preventDefault()))},PageUp:function(e){r||null==u||(xe(e,t,i,a,u,d,!0,o,c),l.preventDefault())},PageDown:function(e){r||null==u||(xe(e,t,i,a,u,d,!1,o,c),l.preventDefault())},Home:function(e){r||null==u||(Ae(e,t,i,u,d,!0,"mac"===g?l.metaKey:l.ctrlKey),l.preventDefault())},End:function(e){r||null==u||(Ae(e,t,i,u,d,!1,"mac"===g?l.metaKey:l.ctrlKey),l.preventDefault())}};Object.keys(p).includes(l.key)&&null!=e.current&&p[l.key](e.current)}),[e,t,n,o,r,i,a,s,c,u,d,y,f,m,S,h,b]);return{onKeyDown:g}}({outerTableRef:e,tableId:t,data:n,isRtl:o,isTabbableMode:H,columnsArray:r,sizingInfoRef:a,selectionExtensionElementRef:k,fullColumnWidths:y,currentCell:K,onCurrentCellChanged:x,selectionMode:b,selected:g,onTableSelectionChange:v,onRowAction:R,sortCriterion:w,onSortCriterionChange:C}),L=Be({outerTableRef:e,tableId:t,data:n,isRtl:o,columnsArray:r,appliedColumnWidths:i,resizeInfoRef:s,selectionExtensionElementRef:k,fullColumnWidths:y,onColumnResizing:f,onColumnResize:m,currentCell:K,selectionMode:b,selected:g,onTableSelectionChange:v,onRowAction:R}),$=function({outerTableRef:e,columnsArray:t,stickyEdgesState:n,setStickyEdgesState:o,fullColumnWidths:r}){return{onScroll:l.useCallback((()=>{null!=e.current&&null!=r&&ke(e.current,t,r,n,o,e.current.scrollLeft)}),[e,t,n,o,r])}}({outerTableRef:e,columnsArray:r,stickyEdgesState:c,setStickyEdgesState:u,fullColumnWidths:y});return{interactionManagerProps:j.mergeProps(E,W,L,$),onTableSelectionChange:v,isShowFocusRing:T,isTabbableMode:H,currentCell:K,onStartFocusTracking:z,onFocusStartEdge:P,onFocusEndEdge:D}}function qe(e,t,l,n,o,r,i,a){if(n)return function(e,t,l){const n=1,o=100,r=void 0;let i=!1,a=0,s=0,c=0;const u=[],d=[],y=[],f=[],m=[];for(let e=0;e<t.length;e++){const S=t[e];let h=S.value.minWidth;(null==h||h<=0)&&(h=o);let b=S.value.maxWidth;(null==b||b<h)&&(b=r),u.push(b);let g=S.value.weight;(null==g||g<1)&&(g=n),d.push(g);const p=null!=l?l[S.key]:void 0;null!=p?(s+=p,c+=p,y.push(p),f.push(p),m.push(p)):(i=!0,c+=h,a+=g,y.push(void 0),f.push(h),m.push(h))}i&&c<e&&function(e,t,l,n,o,r,i,a,s){let c=!0;for(;c;){c=!1,Ne(e,t,l,n,o,r,a,s);let u=0;for(let t=0;t<e.length;t++){if(null==o[t]){const e=i[t];null!=e&&a[t]>e&&(c=!0,o[t]=e,n+=e,l-=r[t],a[t]=e,s[t]=e)}u+=a[t]}c=c&&u<t}}(t,e,a,s,y,d,u,f,m);return Xe(t,f)}(r,i,a);let s=Ve(e,l,o,r,i,a);if(-1===r){let n=0;const c=[];for(let e=0;e<i.length;e++){const t=s[i[e].key];c.push(t),n+=t}!function(e,t,l,n){const o=e.querySelectorAll(`[data-oj-table-col='${t}']`);for(let e=0;e<o.length;e++){o[e].style.width=`${l[e]}px`}const r=e.querySelectorAll(`[data-oj-table-inner-table='${t}']`)[0];r.style.width=`${n}px`,r.style.tableLayout="fixed"}(e,l,c,n),r=e.getBoundingClientRect().width-t,Math.abs(n-r)>.005&&(s=Ve(e,l,o,r,i,a))}return s}function Ve(e,t,l,n,o,r){let i=!1;const a=[],s=[],c=[],u=[];for(let e=0;e<o.length;e++){const t=o[e];let l=t.value.minWidth;(null==l||l<=0)&&(l=undefined),a.push(l);let n=t.value.maxWidth;(null==n||n<(null!=l?l:0))&&(n=undefined),s.push(n);const d=null!=r?r[t.key]:void 0;null!=d?(c.push(d),u[e]=d):(i=!0,c.push(void 0))}if(i){let r=0,i=0,d=0,y=0,f=0;const m=l.current,S=[],h=[],b=[];if(null!=m)for(let e=0;e<o.length;e++)S.push(m.minWidths[o[e].key]),h.push(m.weightWidths[o[e].key]);else{l.current={minWidths:{},weightWidths:{}};const n=e.querySelectorAll(`[data-oj-table-header-cell='${t}']`);for(let e=0;e<n.length;e++){const t=n[e].getBoundingClientRect().width;h.push(t),l.current.weightWidths[o[e].key]=t}e.classList.remove(z.tableStyles.disableWrapping);for(let e=0;e<n.length;e++){const t=n[e].getBoundingClientRect().width;S.push(t),l.current.minWidths[o[e].key]=t}}for(let e=0;e<S.length;e++){const t=c[e];if(null==t){let t;const l=S[e],n=a[e],o=s[e];t=null!=n&&n>=l?n:null!=o&&l>=o?o:l,i+=t;const r=null!=n&&n>=h[e]?n:h[e];h[e]=r,d+=null!=o&&o<=r?o:r,y+=r,f+=r-t,u[e]=t,b.push(t)}else r+=t,i+=t,d+=t,b.push(t)}-1===n&&(n=d),i<n&&function(e,t,l,n,o,r,i,a,s,c,u,d){let y=!0;for(;y;){y=!1,l>t?Ge(e,t-r,n,s,a,u,d):Ne(e,t,o,i,a,s,u,d);let f=0;for(let t=0;t<e.length;t++){if(null==a[t]){const e=c[t];null!=e&&u[t]>e&&(y=!0,a[t]=e,i+=e,r+=e-d[t],o-=s[t],u[t]=e,d[t]=e)}f+=u[t]}y=y&&f<t}}(o,n,d,f,y,i,r,c,h,s,u,b)}return Xe(o,u)}function Ge(e,t,l,n,o,r,i){if(t>0){let a=t,s=l;for(let t=0;t<e.length;t++)if(s>0&&null==o[t]){const e=n[t]-i[t],l=e/s*a;r[t]=l+i[t],a-=l,s-=e}}}function Ne(e,t,l,n,o,r,i,a){const s=[];let c=!0;for(;c;){c=!1;let u=l,d=t-n;if(d>0)for(let t=0;t<e.length;t++)if(u>0&&null==o[t]&&null==s[t]){const e=r[t],o=e/u*d,y=a[t];if(o<y){s[t]=y,n+=y,i[t]=y,c=!0,l-=e;break}i[t]=o,d-=o,u-=e}}}function Xe(e,t){const l={};for(let n=0;n<e.length;n++)l[e[n].key]=t[n];return l}const Oe={row:{all:!1,keys:new Set},column:{all:!1,keys:new Set}},_e=n.forwardRef((function({"aria-label":e,"aria-labelledby":n,getAccessibleRowHeaders:s,columns:u,columnOrder:d,columnWidths:y,layout:f="contents",data:m,getRowKey:h,hasMore:b=!1,onLoadMore:g=(()=>{}),currentCellOverride:p,onPersistCurrentCell:R,currentRowVariant:w,gridlines:C,selectionMode:k,selected:v=Oe,onSelectionChange:E,onRowAction:K,sortCriterion:x,onSortCriterionChange:j,horizontalScrollPositionOverride:A,verticalScrollPositionOverride:I,columnResizingIndicator:F,onColumnResizing:H,onColumnResize:$,noDataRenderer:B,testId:M},q){const V=r.useId(),G=l.useRef(null),X=l.useRef({isInitialRender:!0}),[_,U]=l.useState(),[Q,Z]=l.useState(),ee=l.useRef(!1),te=l.useRef(),le=l.useRef(),ne=l.useRef(),[oe,re]=l.useState({start:void 0,end:void 0}),ie=l.useRef({isResizing:!1,isResizeHover:!1,ignoreClick:!1}),{direction:ae}=a.useUser(),se="rtl"===ae,ce=W.useTestId(M),ue=l.useMemo((()=>{const e=[];if(null!=d)for(const t of d)null!=u[t]&&e.push({key:t,value:u[t]});else for(const[t,l]of Object.entries(u))e.push({key:t,value:l});return e}),[d,u]);let de=!1;const ye=[];if(null!=_)for(let e=0;e<ue.length;e++){const t=ue[e].key,l=_[t],n=null!=y?y[t]:void 0;if(null==l||null!=n&&n!==l){de=!0;break}ye.push(l)}else de=!0;const fe={isLayoutRequired:de,columnWidthsArray:de?void 0:ye};l.useImperativeHandle(q,(()=>({getHorizontalScrollPosition:()=>fe.isLayoutRequired?{}:ge(G.current,ue,fe.columnWidthsArray),getVerticalScrollPosition:()=>fe.isLayoutRequired?{}:pe(G.current,V)})),[V,ue,fe.isLayoutRequired,fe.columnWidthsArray]);const me=l.useCallback((e=>{let t=!1;if("noData"===e.type)t=null!=B;else for(const l of ue)if(l.key===e.columnKey){"data"===e.type?t=null!=l.value.renderer:"header"===e.type?t=null!=l.value.headerRenderer:"footer"===e.type&&(t=null!=l.value.footerRenderer);break}return t}),[ue,B]),{interactionManagerProps:Se,onTableSelectionChange:Re,isShowFocusRing:Ee,isTabbableMode:Ke,currentCell:xe,onStartFocusTracking:Te,onFocusStartEdge:je,onFocusEndEdge:Ae}=Me({outerTableRef:G,tableId:V,data:m,isRtl:se,columnsArray:ue,appliedColumnWidths:_,sizingInfoRef:X,resizeInfoRef:ie,stickyEdgesState:oe,setStickyEdgesState:re,cellHasRenderer:me,fullColumnWidths:fe.isLayoutRequired?void 0:fe.columnWidthsArray,onColumnResizing:H,onColumnResize:$,currentCellOverride:p,onPersistCurrentCell:R,selectionMode:k,selected:v,onSelectionChange:E,onRowAction:K,sortCriterion:x,onSortCriterionChange:j});l.useLayoutEffect((()=>{te.current=void 0,U(void 0)}),[u]),l.useLayoutEffect((()=>{const e=G.current;if(null!=e&&!X.current.isInitialRender&&fe.isLayoutRequired&&null!=X.current.defaultScrollbarWidth){const t="fixed"===f?X.current.boxWidth-X.current.defaultScrollbarWidth:-1,l=qe(e,X.current.defaultScrollbarWidth,V,"fixed"===f,te,t,ue,y);U(l)}}),[V,ue,y,f,fe.isLayoutRequired]);const Ie=l.useRef();Ie.current=e=>{if(null!=G.current){let t,l;const n=e.contentBoxSize[0].inlineSize,o=e.contentBoxSize[0].blockSize,r=e.borderBoxSize[0].inlineSize,i=e.borderBoxSize[0].blockSize;if(0!==n||0!==r){X.current.isInitialRender?(l=r-n,t="fixed"===f?n:-1,X.current={isInitialRender:!1,contentWidth:n,boxWidth:r,contentHeight:o,boxHeight:i,defaultScrollbarWidth:l,defaultScrollbarHeight:i-o}):(l=X.current.defaultScrollbarWidth,t=ee.current?n:r-l,X.current.contentWidth=n,X.current.boxWidth=r,X.current.contentHeight=o,X.current.boxHeight=i);const e=qe(G.current,l,V,"fixed"===f,te,t,ue,y);U(e),Q!==o&&Z(o)}}};const Fe=l.useCallback((e=>{Ie.current(e)}),[]);D.useResizeObserver(G,Fe),l.useLayoutEffect((()=>{const e=X.current.defaultScrollbarWidth;if(null!=G.current&&!X.current.isInitialRender&&null!=Q&&null!=e){const t=G.current.querySelector(`[data-oj-table-inner-table='${V}']`);if(null!=t){const l=Q<t.getBoundingClientRect().height;ee.current=l,l?(G.current.classList.remove(z.tableStyles.noVerticalScroll),G.current.classList.add(z.tableStyles.verticalScroll),G.current.style.paddingInlineEnd=""):(G.current.classList.remove(z.tableStyles.verticalScroll),G.current.classList.add(z.tableStyles.noVerticalScroll),G.current.style.paddingInlineEnd=`${e}px`)}}}),[V,Q,m,B,_]),l.useLayoutEffect((()=>{le.current===A||fe.isLayoutRequired||(he(G.current,ue,fe.columnWidthsArray,se,A),le.current=A)}),[V,ue,fe.isLayoutRequired,fe.columnWidthsArray,A,se]),l.useLayoutEffect((()=>{ne.current===I||fe.isLayoutRequired||(be(G.current,V,I),ne.current=I)}),[V,fe.isLayoutRequired,I]),l.useLayoutEffect((()=>{null==G.current||fe.isLayoutRequired||function(e,t,l,n,o,r,i){let a,s=0,c=0;const u=we(n,!0);for(let n=0;n<u.length;n++)a=u[n],Ce(e,t,l,a,s,!0),s+=o[a];const d=we(n,!1);for(let n=d.length-1;n>-1;n--)a=d[n],Ce(e,t,l,a,c,!1),c+=o[a];ke(e,n,o,r,i)}(G.current,V,se,ue,fe.columnWidthsArray,oe,re)}),[V,ue,fe.isLayoutRequired,fe.columnWidthsArray,se,oe]);const{classes:He}=S.useComponentTheme(P.TableRedwoodTheme,{forceScroll:X.current.isInitialRender?"isForceScroll":"notForceScroll",verticalScroll:ee.current?"isVerticalScroll":"notVerticalScroll",disableWrapping:"contents"===f&&void 0===te.current?"isDisableWrapping":"notDisableWrapping"}),ze=o.classNames([He]),Pe=o.classNames([c.innerTableStyles.base]),De=o.classNames([c.focusTrackerStyles.base]),We=ue.some((e=>null!=e.value.footerRenderer||null!=e.value.footerText)),Le=null==m?void 0:b?-1:m.length+(We?2:1),$e=oe.start,Be=oe.end,Ve="visible"===C?.vertical,Ge="hidden"!==C?.horizontal,Ne="single"===k?.row||"multiple"===k?.row,Xe="single"===k?.column||"multiple"===k?.column;return t.jsx("div",{...ce,ref:G,"aria-colcount":ue.length,"aria-label":e,"aria-labelledby":n,"aria-rowcount":Le,..."multiple"===k?.column||"multiple"===k?.row?{"aria-multiselectable":!0}:{},class:ze,role:"grid",...Se,children:t.jsxs(T.FocusTracker,{styleClass:De,isDisabled:!Ke,onFocusStartEdge:je,onFocusEndEdge:Ae,onStartTracking:Te,children:[t.jsx(i.TabbableModeContext.Provider,{value:{isTabbable:Ke},children:t.jsxs("table",{class:Pe,role:"presentation",style:(()=>{let e="",t="";if(fe.isLayoutRequired)e="contents"!==f?"width: 100%;":"width: 1px";else{let t=0;for(let e=0;e<fe.columnWidthsArray.length;e++)t+=fe.columnWidthsArray[e];e=`width: ${t}px; table-layout: fixed;`}return null!=Q&&(t=null==m||0===m.length?`min-height: ${Q}px;`:""),`${e}${t}`})(),"data-oj-table-inner-table":V,children:[t.jsx(L,{...(()=>{let e;if(fe.isLayoutRequired){e=[];for(let t=0;t<ue.length;t++)e[t]=void 0}else e=fe.columnWidthsArray;return{tableId:V,columnWidthsArray:e}})()}),t.jsx(O,{tableId:V,columnsArray:ue,hasVerticalGridlines:Ve,focusedKey:"header"===xe?.type?xe.columnKey:void 0,selectedColumnKeys:v.column,selectedRowKeys:v.row,isColumnSelectionEnabled:Xe,isRowSelectionEnabled:Ne,onSelectionChange:Re,sortCriterion:x,onSortCriterionChange:j,isShowFocusRing:Ee,startStickyEdge:$e,endStickyEdge:Be,isResizeHover:ie.current.isResizeHover,isRtl:se}),t.jsx(N,{tableId:V,data:m,columnsArray:ue,getAccessibleRowHeaders:s,hasVerticalGridlines:Ve,hasHorizontalGridlines:Ge,selected:v,isRowSelectionEnabled:Ne,isSingleRowSelectionEnabled:"single"===k?.row,currentCell:xe,currentRowVariant:w,isShowFocusRing:Ee,getRowKey:h,hasMore:b,onLoadMore:g,noDataRenderer:B,viewportConfig:ve(G),onSelectionChange:Re,startStickyEdge:$e,endStickyEdge:Be,isRtl:se}),t.jsx(Y,{tableId:V,isRendered:We,columnsArray:ue,hasVerticalGridlines:Ve,focusedKey:"footer"===xe?.type?xe.columnKey:void 0,selectedKeys:v.column,isColumnSelectionEnabled:Xe,isShowFocusRing:Ee,startStickyEdge:$e,endStickyEdge:Be,isRtl:se})]})}),(()=>{if(null!=F&&!fe.isLayoutRequired){let e=0;for(let t=0;t<ue.length;t++)if(e+=fe.columnWidthsArray[t],ue[t].key===F.key){null!=F.delta&&(e+=F.delta);break}return t.jsx(J,{position:e,isRtl:se})}})()]})})}));e.Table=_e}));
//# sourceMappingURL=Table-fda0ad21.js.map
