/**
 * @license
 * Copyright (c) 2014, 2024, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports"],function(e){"use strict";
/**
   * @license
   * Copyright (c) 2019 2024, Oracle and/or its affiliates.
   * Licensed under The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   *
   * Portions of this code are based on on JSEP Parser
   * @license
   * JavaScript Expression Parser (JSEP) 1.3.8
   * https://github.com/EricSmekens/jsep
   */const n=function(e){return e.type===t?e.name:e.value},r="Compound",t="Identifier",i="MemberExpression",d="Literal",a="CallExpression",o="UnaryExpression",x="BinaryExpression",c="LogicalExpression",p="ConditionalExpression",s="ArrayExpression",u="ObjectExpression",h="FunctionExpression",f="NewExpression",l="Property",A="TemplateLiteral",C="TemplateElement";e.ARRAY_EXP=s,e.BINARY_EXP=x,e.CALL_EXP=a,e.COMPOUND=r,e.CONDITIONAL_EXP=p,e.ExpParser=function(){function e(e,n){const r=e.expr,t=r.length,i=[];for(;e.index<t;){E(e);const d=r.charCodeAt(e.index);if(d===n)break;if(d===R||d===_)e.index++;else{const n=v(e);n?i.push(n):e.index<t&&Z('Unexpected "'+r.charAt(e.index)+'"',e.index)}}return i}function E(e){for(var n=e.expr,r=n.charCodeAt(e.index);32===r||9===r||10===r||13===r;)r=n.charCodeAt(++e.index)}function v(e){var n,r,t=e.expr,i=function(e){var n,r,t,i,d,a,o,x,c,p;if(a=g(e),r=y(e),!r)return a;d={value:r,prec:J(r)},o=g(e),o||Z("Expected expression after "+r,e.index);i=[a,d,o],c=r,p=d.prec;for(;(r=y(e))&&0!==(t=J(r,c,p));){for(d={value:r,prec:t},c=r,p=t;i.length>2&&t<=i[i.length-2].prec;)o=i.pop(),n=K(r=i.pop().value,a=i.pop(),o,e),i.push(n);(n=g(e))||Z("Expected expression after "+c,e.index),i.push(d,n)}x=i.length-1,n=i[x];for(;x>1;)n=K(i[x-1].value,i[x-2],n,e),x-=2;return n}(e);return E(e),t.charCodeAt(e.index)!==M?i:(e.index++,(n=v(e))||Z("Expected expression",e.index),E(e),t.charCodeAt(e.index)===X?(e.index++,(r=v(e))||Z("Expected expression",e.index),{type:p,test:i,consequent:n,alternate:r}):void Z("Expected :",e.index))}function y(e){var n=e.expr;E(e);for(var r=n.substr(e.index,$),t=r.length;t>0;){if(D[r]&&(!H(n.charCodeAt(e.index))||e.index+r.length<n.length&&!Q(n.charCodeAt(e.index+r.length))))return e.index+=t,r;r=r.substr(0,--t)}return!1}function g(r){var i,a,x,c=r.expr;if(E(r),z(i=c.charCodeAt(r.index))||i===w)return function(e){var n,r,t=e.expr,i="";for(;z(t.charCodeAt(e.index));)i+=t.charAt(e.index++);if(t.charCodeAt(e.index)===w)for(i+=t.charAt(e.index++);z(t.charCodeAt(e.index));)i+=t.charAt(e.index++);if(n=t.charAt(e.index),"e"===n||"E"===n){for(i+=t.charAt(e.index++),"+"!==(n=t.charAt(e.index))&&"-"!==n||(i+=t.charAt(e.index++));z(t.charCodeAt(e.index));)i+=t.charAt(e.index++);z(t.charCodeAt(e.index-1))||Z("Expected exponent ("+i+t.charAt(e.index)+")",e.index)}r=t.charCodeAt(e.index),H(r)?Z("Variable names cannot start with a number ("+i+t.charAt(e.index)+")",e.index):r===w&&Z("Unexpected period",e.index);return{type:d,value:parseFloat(i),raw:i}}(r);if(i===U||i===L||i===N)return P(r);if(i===S)return function(e){var r=e.expr;e.index++;var i,d=[],a=0,o=r.length;for(;e.index<o&&!i;){E(e);var x=r.charCodeAt(e.index);if(x===F)i=!0,e.index++;else if(x===_)e.index++,++a!==d.length&&Z("Unexpected token ,",e.index);else{var c=x===U||x===L?b(e):m(e);if(E(e),x=r.charCodeAt(e.index),c.type!==t||x!==_&&x!==F)if(x===X){e.index++;var p=e.writer;"_ko_property_writers"===n(c)&&(e.writer=1);try{d.push({type:l,key:c,value:v(e),shorthand:!1})}finally{e.writer=p}}else Z("Expected ':'. Found "+String.fromCharCode(x),e.index);else d.push({type:l,key:c,value:c,shorthand:!0})}}i||Z("Expected "+String.fromCharCode(F),e.index);return{type:u,properties:d}}(r);if(i===j)return function(n){const r=n.expr;let t=r.charCodeAt(n.index);if(t===j){const i={type:A,quasis:[],expressions:[]};let d="",a="",o=!1;const x=r.length,c=()=>i.quasis.push({type:C,value:{raw:a,cooked:d},tail:o});for(;n.index<x;){let x=r.charAt(++n.index);if("`"===x)return n.index+=1,o=!0,c(),i;if("$"===x&&"{"===r.charAt(n.index+1)){n.index+=2,c(),a="",d="";try{i.expressions.push(...e(n,F))}finally{t=r.charCodeAt(n.index),t!==F&&Z("Unclosed ${ in template literal",r)}}else if("\\"===x)switch(a+=x,x=r.charAt(++n.index),a+=x,x){case"n":d+="\n";break;case"r":d+="\r";break;case"t":d+="\t";break;case"b":d+="\b";break;case"f":d+="\f";break;case"v":d+="\v";break;default:d+=x}else d+=x,a+=x}n.index===x&&Z("Unclosed backtick ` in template literal",r)}return!1}(r);for(x=(a=c.substr(r.index,V)).length;x>0;){if(a in Y&&(!H(c.charCodeAt(r.index))||r.index+a.length<c.length&&!Q(c.charCodeAt(r.index+a.length))))return r.index+=x,{type:o,operator:a,argument:g(r),prefix:!0};a=a.substr(0,--x)}var p=r.index,s=r.index+8;return"function"!==c.substring(p,s)||Q(c.charCodeAt(s))?!(!H(i)&&i!==T)&&P(r):(r.index=s,function(e){var n=e.expr;E(e);var r=n.charCodeAt(e.index);r!==T&&Z("Expected (,",e.index);e.index++;var t=k(e,I,!0);E(e),r=n.charCodeAt(e.index),r!==S&&Z("Expected {,",e.index);e.index++,E(e);var i,d=e.index,a=e.index;"return"===n.substring(a,a+6)&&(i=!0,e.index+=6);E(e);var o=v(e);E(e),r=n.charCodeAt(e.index),r===R&&(e.index++,E(e));r=n.charCodeAt(e.index),r!==F&&Z("Expected },",e.index);return e.index++,{type:h,arguments:t,body:o,expr:n.substring(d,e.index-1),return:i}}(r))}function b(e){for(var n,r=e.expr,t="",i=r.charAt(e.index++),a=!1,o=r.length;e.index<o;){if((n=r.charAt(e.index++))===i){a=!0;break}if("\\"===n)switch(n=r.charAt(e.index++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=n}else t+=n}return a||Z('Unclosed quote after "'+t+'"',e.index),{type:d,value:t,raw:i+t+i}}function m(e,n){var r,i=e.expr,o=i.charCodeAt(e.index),x=e.index;H(o)?e.index++:Z("Unexpected "+i.charAt(e.index),e.index);for(var c=i.length;e.index<c&&Q(o=i.charCodeAt(e.index));)e.index++;if("new"===(r=i.slice(x,e.index))&&!n){E(e);var p=P(e,a);return p.type!==a&&Z("Expression of type: "+p.type+" not supported for constructor expression"),{type:f,callee:p.callee,arguments:p.arguments}}return G.has(r)?{type:d,value:G.get(r),raw:r}:{type:t,name:r}}function k(e,n,r){for(var t,i,d=e.expr,a=d.length,o=[],x=!1,c=0;e.index<a;){if(E(e),(t=d.charCodeAt(e.index))===n){x=!0,e.index++,n===I&&c&&c>=o.length&&Z("Unexpected token "+String.fromCharCode(n),e.index);break}if(t===_){if(e.index++,++c!==o.length)if(n===I)Z("Unexpected token ,",e.index);else if(n===O)for(var p=o.length;p<c;p++)o.push(null)}else(!(i=r?m(e):v(e))||o.length>c)&&Z("Expected comma",e.index),o.push(i)}return x||Z("Expected "+String.fromCharCode(n),e.index),o}function P(e,n){var r,t,d=e.expr;for(t=(r=d.charCodeAt(e.index))===T?function(e){e.index++;var n=v(e);if(E(e),e.expr.charCodeAt(e.index)===I)return e.index++,n;Z("Unclosed (",e.index)}(e):r===U||r===L?b(e):r===N?function(e){return e.index++,{type:s,elements:k(e,O)}}(e):m(e),E(e),r=d.charCodeAt(e.index);r===w||r===N||r===T||W(e);){if(e.index++,r===w?(E(e),t={type:i,computed:!1,object:t,property:m(e,!0)}):r===M?(e.index++,E(e),t={type:i,computed:!1,optional:!0,object:t,property:m(e,!0)}):r===N?(t={type:i,computed:!0,object:t,property:v(e)},E(e),(r=d.charCodeAt(e.index))!==O&&Z("Unclosed [",e.index),e.index++):r===T&&(t={type:a,arguments:k(e,I),callee:t}),n===t.type)return t;E(e),r=d.charCodeAt(e.index)}return t}this.parse=function(n){var t=e({index:0,expr:n});return 1===t.length?t[0]:{type:r,body:t}};var w=46,_=44,U=39,L=34,T=40,I=41,N=91,O=93,M=63,R=59,X=58,j=96,S=123,F=125;function q(e){return Object.keys(e).reduce(function(e,n){return Math.max(e,n.length)},0)}var B=!0,Y={"-":B,"!":B,"~":B,"+":B,typeof:B},D={"=":1,"||":2,"??":2,"&&":3,"|":4,"^":5,"&":6,"==":7,"!=":7,"===":7,"!==":7,"<":8,">":8,"<=":8,">=":8,instanceof:8,"<<":9,">>":9,">>>":9,"+":10,"-":10,"*":11,"/":11,"%":11,"**":12},V=q(Y),$=q(D),G=new Map;function J(e,n,r){const t=D[e]||0;return 12!==t||void 0===n||e!==n?t:.5*(r+13)}function K(e,n,r,t){return"="!==e||t.writer||Z("Unexpected operator '='",t.index),{type:"||"===e||"&&"===e||"??"===e?c:x,operator:e,left:n,right:r}}function W(e){var n=e.expr;return n.charCodeAt(e.index)===M&&n.charCodeAt(e.index+1)===w&&!z(n.charCodeAt(e.index+2))}function z(e){return e>=48&&e<=57}function H(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!D[String.fromCharCode(e)]}function Q(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!D[String.fromCharCode(e)]}function Z(e,n){var r=new Error(e+" at character "+n);throw r.index=n,r.description=e,r}G.set("true",!0),G.set("false",!1),G.set("null",null),G.set("undefined",void 0)},e.FUNCTION_EXP=h,e.IDENTIFIER=t,e.LITERAL=d,e.LOGICAL_EXP=c,e.MEMBER_EXP=i,e.NEW_EXP=f,e.OBJECT_EXP=u,e.PROPERTY=l,e.TEMPLATE_ELEMENT=C,e.TEMPLATE_LITERAL=A,e.UNARY_EXP=o,e.getKeyValue=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojexpparser.js.map