!function(e,t,l){"use strict";var n=function(e){return l.stripHTML(t.getMessage(e))},a=[{label:"num, number",insertText:"num",detail:"NUMBER"},{label:"int, integer",insertText:"int",detail:"INTEGER"},{label:"d, date",insertText:"date",detail:"DATE"},{label:"ts, timestamp",insertText:"timestamp",detail:"TIMESTAMP"},{label:"tstz, tswtz, timestamp with local time zone",insertText:"tstz",detail:"TIMESTAMP WITH LOCAL TIMEZONE"},{label:"char, vc, varchar, varchar2, string",insertText:"vc",detail:"VARCHAR2(4000)"},{label:"vcNNN, vc(NNN)",insertText:"vc${0:NNN}",detail:n("QUICKSQL.HELP.NNN")},{label:"vc32k",detail:"VARCHAR2(32767)"},{label:"clob",detail:"CLOB"},{label:"blob",detail:"BLOB"},{label:"json",detail:"CLOB CHECK (<"+n("QUICKSQL.HELP.COLUMN_NAME")+"> IS JSON)"},{label:"file",detail:n("QUICKSQL.HELP.FILE_DATATYPE")}],i=[{label:"/api",detail:n("QUICKSQL.HELP.API")},{label:"/audit",detail:n("QUICKSQL.HELP.AUDIT")},{label:"/auditcols",detail:n("QUICKSQL.HELP.AUDITCOLS")},{label:"/cascade",insertText:"/cascade",detail:n("QUICKSQL.HELP.CASCADE")},{label:"/colprefix",insertText:"/colprefix ${0:prefix}",detail:n("QUICKSQL.HELP.COLPREFIX")},{label:"/compress",detail:n("QUICKSQL.HELP.COMPRESSED")},{label:"/history",detail:n("QUICKSQL.HELP.HISTORY")},{label:"/insert",insertText:"/insert ${0:NNN}",detail:n("QUICKSQL.HELP.INSERT")},{label:"/rest",detail:n("QUICKSQL.HELP.REST")},{label:"/select",detail:n("QUICKSQL.HELP.SELECT")},{label:"/unique",detail:n("QUICKSQL.HELP.TABLE_UNIQUE")}],s=[{label:"/index /idx /indexed",insertText:"/index",detail:n("QUICKSQL.HELP.INDEX")},{label:"/unique",detail:n("QUICKSQL.HELP.UNIQUE")},{label:"/cascade",insertText:"/cascade",detail:n("QUICKSQL.HELP.CASCADE")},{label:"/check",insertText:"/check ${0:val1,val2,...}",detail:n("QUICKSQL.HELP.CHECK")},{label:"/constant",insertText:"/constant ${0:value}",detail:n("QUICKSQL.HELP.CONSTANT")},{label:"/default",insertText:"/default ${0:value}",detail:n("QUICKSQL.HELP.DEFAULT")},{label:"/values",insertText:"/values ${0:dummy1,dummy2,...}",detail:n("QUICKSQL.HELP.VALUES")},{label:"/upper",detail:n("QUICKSQL.HELP.UPPER")},{label:"/lower",detail:n("QUICKSQL.HELP.LOWER")},{label:"/nn /not null",insertText:"/nn",detail:n("QUICKSQL.HELP.NOTNULL")},{label:"/between",insertText:"/between ${0:min and max}",detail:n("QUICKSQL.HELP.BETWEEN")},{label:"/invisible /hidden",insertText:"/invisible",detail:n("QUICKSQL.HELP.HIDDEN")},{label:"/fk /reference /references",insertText:"/fk ${0:table name}",detail:n("QUICKSQL.HELP.FK")},{label:"/pk",detail:n("QUICKSQL.HELP.PK")}];function r(e,t){var l,n=e.getLineContent(t).toLowerCase(),a=/\w/.test(n),i=n.search(/\S|$/),s=t<e.getLineCount(),r=t>1;if(0===n.length)l="blank";else if(n.startsWith("#"))l="comment";else if(n.startsWith("view"))l="view";else if(a&&0===i)l="table";else if(a&&s){l=e.getLineContent(t+1).search(/\S|$/)>i?"table":"column"}else if(a&&r){l=e.getLineContent(t-1).search(/\S|$/)<=i?"column":"unknown"}return l||"unknown"}monaco.languages.register({id:"quicksql"}),monaco.languages.setMonarchTokensProvider("quicksql",{keywords:["/api","/audit","/auditcols","/audit columns","/between","/cascade","/check","/constant","cols","columns","/colprefix","/compress","/compressed","drop","/default","/fk","genpk","/invisible","/hidden","/history","/idx","/index","/indexed","/insert","/lower","pk","prefix","/pk","/references","/reference","/rest","schema","/select","/unique","/upper","verbose","view","/values","/nn","/not null","and"],atoms:[],types:["d","date","ts","time","timestamp","tstz","tswtz","local","with","blob","char","clob","file","int","integer","json","num","number","string","varchar","varchar2","vc","vc32k"],dates:[],ignoreCase:!0,tokenizer:{root:[[/(view)(\s+)([^\s]+)(\s+)(.+)/,["keywords","whitespace","view","whitespace","table"]],[/^\w+/,"table"],[/(\/fk|\/reference|\/references)(\s+)(\w+)/,["keywords","whitepace","table"]],[/\s{1}/,"whitespace"],[/[0-9]/,"number"],[/(vc\d*k?)/,"types"],[/(\/values|\/check)(\s+)(.+)(\s+)(\[[a-zA-Z 0-9:]+\])/,["keywords","whitespace","list","whitespace","comment"]],[/(\/values|\/check)(\s+)(.+)/,["keywords","whitespace","list"]],[/(#.*)/,"comment"],[/--.*$/,"comment"],[/\[[a-zA-Z 0-9:]+\]/,"comment"],[/[\/a-z_$][\w$]*/,{cases:{"@keywords":"keywords","@types":"types","@default":"default"}}]]}}),monaco.languages.registerCompletionItemProvider("quicksql",{triggerCharacters:["/"],provideCompletionItems:function(e,t){var l,n,o,c,d,u=e.getLineContent(t.lineNumber),L=u.slice(0,t.column-1),m=e.getWordAtPosition(t),b=[],C=r(e,t.lineNumber);if(m||(m={word:"",startColumn:t.column,endColumn:t.column}),","===(o=u.charAt(m.startColumn-2)))return[];if(c="/"===o?m.startColumn-1:m.startColumn,d=m.endColumn,n=(l=L.split(/\s+/))[l.length-2],["/fk","/references","/reference"].includes(n)||"view"===C&&l.length>=3)b=function(e){for(var t=[],l=1;l<=e.getLineCount();l++){var n=e.getLineContent(l);"table"===r(e,l)&&t.push(n.trim().split(" ")[0])}return t}(e).map((function(e){return{label:e}}));else{if(["/values","/check","/between","/default","/constant","/colprefix","/insert"].includes(n))return;["table","column"].includes(C)&&(/\w+\s/.test(L)?"table"===C?b=i:"column"===C&&(b=s.concat(a)):b=[])}for(var p=[],E=0;E<b.length;E++)p.push({label:b[E].label,insertText:b[E].insertText||b[E].label,detail:b[E].detail,insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:monaco.languages.CompletionItemKind.Keyword,range:{startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:c,endColumn:d}});return{suggestions:p}}}),e.apex.codeEditor.performExtraQuicksqlHighlight=function(t){function n(t,l,n){"table"===r(t,l)&&n.children().filter((function(){return e(this).text().trim()})).first().addClass("quicksql-table")}var a=l.debounce((function(){!function(t){var l,a=e("div.view-line",t.getDomNode()),i=Math.max(t._modelData.viewModel.viewportStartLine,1),s=[];a.each((function(){var t=(l=e(this)).get(0).style.top.replace("px","");s.push({top:parseInt(t),line$:l.children().first()})})),s.sort((function(e,t){return e.top>t.top?1:e.top<t.top?-1:0}));for(var r=0;r<s.length;r++)n(t.getModel(),i+r,s[r].line$)}(t)}),100);t.onDidChangeModelContent((function(){a()})),t.onDidScrollChange((function(){a()})),a()}}(apex.jQuery,apex.lang,apex.util);