function com_oracle_apex_html5_bar_chart(pRegionId,pOptions){function _clear(){gChartContainer$.empty()}function _draw(pData){function emptyStringIfUndefinedOrNullValue(value){var result=value;return(null===value||"undefined"==typeof value)&&(result=""),result}var percent,itemColorIndex,itemColor,chartJqueryElement,itemJqueryElement,valueBlockJqueryElement,labelBlockJqueryElement,barBlockJqueryElement,mediaBlockJqueryElement,initialsBlockJqueryElement,barValue,maximumValue=0,CL_HIDDEN="u-VisuallyHidden";if(pData.items.length>0){switch(pData.bar_width_calculation){case"ABSOLUTE":for(var i=0;i<pData.items.length;i++)pData.items[i].value>maximumValue&&(maximumValue=parseFloat(pData.items[i].value));break;case"RELATIVE":for(var i=0;i<pData.items.length;i++)maximumValue+=parseFloat(pData.items[i].value)}switch(chartJqueryElement=jQuery(document.createElement("ul")).addClass("a-BarChart"),pData.chart_type){case"TEXT":chartJqueryElement.addClass("a-BarChart--"+("AROUND"===pData.text_position?"classic":"modern"));break;case"ICON":chartJqueryElement.addClass("a-BarChart--modern")}chartJqueryElement.addClass(emptyStringIfUndefinedOrNullValue(pData.chart_css_class_names)),itemColorIndex=0;for(var i=0;i<pData.items.length;i++){if(itemJqueryElement=jQuery(document.createElement("li")).addClass("a-BarChart-item"),percent=(100*pData.items[i].value/maximumValue).toFixed(2),"string"==typeof pData.color_scheme?"MODERN"===pData.color_scheme?chartJqueryElement.addClass("u-colors"):Array.isArray(gColorSchemes[pData.color_scheme])&&gColorSchemes[pData.color_scheme].length>0?(itemColorIndex>=gColorSchemes[pData.color_scheme].length&&(itemColorIndex=0),itemColor=gColorSchemes[pData.color_scheme][itemColorIndex++]):itemColor="COLUMN"===pData.color_scheme?pData.items[i].color:void 0:Array.isArray(pData.color_scheme)&&pData.color_scheme.length>0&&(itemColorIndex>=pData.color_scheme.length&&(itemColorIndex=0),itemColor=pData.color_scheme[itemColorIndex++]),containerBlockJqueryElement=jQuery(document.createElement("div")).addClass("a-BarChart-labelContainer"),barValue=emptyStringIfUndefinedOrNullValue(pData.prefix_for_value)+("BAR_WIDTH"===pData.display?percent+"%":pData.items[i].display_value)+emptyStringIfUndefinedOrNullValue(pData.postfix_for_value),valueBlockJqueryElement=jQuery(document.createElement("span")).addClass("a-BarChart-value").append(barValue).append(jQuery(document.createElement("span")).addClass("u-VisuallyHidden").append("BAR_WIDTH"===pData.display?pData.items[i].display_value:percent+"%")),"undefined"!=typeof pData.items[i].value_link&&valueBlockJqueryElement.wrapInner(jQuery(document.createElement("a")).attr("href",pData.items[i].value_link)),labelBlockJqueryElement=jQuery(document.createElement("h3")).addClass("a-BarChart-label").append(pData.items[i].label),"undefined"!=typeof pData.items[i].label_link&&labelBlockJqueryElement.wrapInner(jQuery(document.createElement("a")).attr("href",pData.items[i].label_link)),"ICON"===pData.chart_type||"TEXT"===pData.chart_type&&"ABOVE"===pData.text_position?(containerBlockJqueryElement.append(labelBlockJqueryElement),containerBlockJqueryElement.append(valueBlockJqueryElement),itemJqueryElement.append(containerBlockJqueryElement)):itemJqueryElement.append(labelBlockJqueryElement),barBlockJqueryElement=jQuery(document.createElement("div")).addClass("a-BarChart-bar").append(jQuery(document.createElement("div")).addClass("a-BarChart-filled").append(jQuery(document.createElement("span")).addClass(CL_HIDDEN).text(barValue))),"MODERN"===pData.color_scheme?barBlockJqueryElement.find(".a-BarChart-filled").addClass("u-color").css({width:percent+"%"}):barBlockJqueryElement.find(".a-BarChart-filled").css({width:percent+"%","background-color":"TEXT"===pData.chart_type?itemColor:void 0}),barBlockJqueryElement="undefined"!=typeof pData.items[i].value_link?barBlockJqueryElement.wrap(jQuery(document.createElement("a")).attr("href",pData.items[i].value_link).addClass("a-BarChart-barLink")).parent():barBlockJqueryElement.wrap(jQuery(document.createElement("span")).addClass("a-BarChart-barLink")).parent(),itemJqueryElement.append(barBlockJqueryElement),"TEXT"===pData.chart_type&&"ABOVE"!==pData.text_position&&itemJqueryElement.append(valueBlockJqueryElement),"ICON"===pData.chart_type){switch(itemJqueryElement.wrapInner(jQuery(document.createElement("div")).addClass("a-MediaBlock-content")),mediaBlockJqueryElement=jQuery(document.createElement("div")).addClass("a-MediaBlock-graphic"),pData.icon_type){case"IMAGE":mediaBlockJqueryElement.append(jQuery(document.createElement("img")).attr({src:pData.items[i].image_url,alt:pData.items[i].label}));break;case"ICON":mediaBlockJqueryElement.append(jQuery(document.createElement("span")).addClass(pData.items[i].icon_css_class_name).addClass("u-color"));break;case"INITIALS":initialsBlockJqueryElement=jQuery(document.createElement("span")).addClass("a-BarChart-initials").text(pData.items[i].initials),"MODERN"===pData.color_scheme?initialsBlockJqueryElement.addClass("u-color"):initialsBlockJqueryElement.css({"background-color":"#fff","border-color":itemColor,color:itemColor}),"undefined"!=typeof pData.items[i].initials_color_css_class_name&&initialsBlockJqueryElement.addClass(pData.items[i].initials_color_css_class_name),mediaBlockJqueryElement.append(initialsBlockJqueryElement)}itemJqueryElement.prepend(jQuery(document.createElement("div")).addClass("a-MediaBlock").append(mediaBlockJqueryElement))}chartJqueryElement.append(itemJqueryElement)}}else chartJqueryElement=jQuery(jQuery.parseHTML(pData.message_when_no_data_found));gChartContainer$.append(chartJqueryElement)}function _render(){apex.server.plugin(gOptions.ajaxIdentifier,{pageItems:gOptions.pageItems},{dataType:"json",accept:"application/json",refreshObject:gRegion$,clear:_clear,success:_draw})}var gColorSchemes={MODERN:["#309FDB","#13B6CF","#2EBFBC","#3CAF85","#81BB5F","#DDDE53","#FBCE4A","#ED813E","#E95B54","#E85D88","#CA589D","#854E9B","#5A68AD","#AFBAC5","#6E8598"],MODERN_2:["#1ABC9C","#2ECC71","#4AA3DF","#9B59B6","#3D566E","#F1C40F","#E67E22","#E74C3C"],SOLAR:["#B58900","#CB4B16","#DC322F","#D33682","#6C71C4","#268BD2","#2AA198","#859900"],METRO:["#E61400","#19A2DE","#319A31","#EF9608","#8CBE29","#A500FF","#00AAAD","#FF0094","#9C5100","#E671B5"]},gOptions=pOptions,gRegion$=jQuery("#"+apex.util.escapeCSS(pRegionId),apex.gPageContext$),gChartContainer$=jQuery("#"+apex.util.escapeCSS(pRegionId+"_chart"),apex.gPageContext$);_render(),gRegion$.on("apexrefresh",_render)}