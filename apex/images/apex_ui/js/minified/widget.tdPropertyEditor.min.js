/*!
 * Copyright (c) 2021, 2023, Oracle and/or its affiliates.
 */
!function(e,t,r,a,o,i){"use strict";const p="table-mode",l="column-mode",n="data-source-mode",s="blueprint-name",u="blueprint-display-name",d="blueprint-description",E="blueprint-schema",m="blueprint-created",c="blueprint-created-by",P="blueprint-updated",y="blueprint-updated-by",T="table-name",D="table-display_name",h="table-sequence",O="table-num-rows",g="column-name",v="column-display-name",L="column-sequence",f="column-lang",_="column-data-source-group",R="column-data-source",N="column-data-source-built-ins",S="column-data-source-blueprint-selector",x="column-data-source-blueprint-table",C="column-data-source-blueprint-column",A="column-data-source-min-date",b="column-data-source-max-date",I="column-data-source-format-mask",V="column-data-source-min-value",G="column-data-source-max-value",U="column-data-source-value-precision",w="column-custom-data-source-selector",M="column-custom-data-source",k="column-custom-data-source-column",B="column-data-source-inline",q="column-data-source-sequence-start-with",Y="column-data-source-sequence-increment",H="column-data-source-multivalue-switch",X="column-multivalue-group",Q="column-mv-format",W="column-mv-delimiter",F="column-mv-unique",j="column-mv-min-entries",K="column-mv-max-entries",z="column-mv-partition-by",J="column-formula",Z="column-required-field",$="column-percent-blank",ee="column-advanced-group",te="column-advanced-max-length",re="data-source-name",ae="data-source-type",oe="data-source-table-name",ie="data-source-sql-query",pe="data-source-where-clause",le="BLUEPRINT",ne="BUILTIN",se="DATA_SOURCE",ue="TABLE",de="SQL_QUERY",Ee="INLINE",me="SEQUENCE",ce="FORMULA",Pe="DATE",ye="NUMBER",Te="Y",De="N",he=255,Oe="none",ge="DELIMITED",ve="BUILT_IN_POPUP",Le="INLINE_LOV",fe="STATIC_LOV_VALUES",_e="TABLE",Re="SQL_EDITOR",Ne="CUSTOM_DATA_SOURCE",Se="BLUEPRINT_SOURCE",xe="data-property-id",Ce="a-Property",Ae=Ce+"-field",be=Ae+"--text",Ie=Ce+"-fieldContainer",Ve="a-Button",Ge="a-Property-button",Ue=Ve+"--hot",we=Ve+"--forceWrap",Me="div.a-Property",ke="div.a-PropertyEditor-propertyGroup",Be="[data-property-id='%1']",qe="[data-group-id='%1']",Ye="ui-dialog-flushBody",He=Ce+"-setItemsTable",Xe=He+"-removeCol",Qe=Ce+"-setItemsHeader-header",We="u-vh",Fe="linkDlgItemName",je="linkDlgItemValue",Ke="linkDlgSetItemsRowData",ze="a-Icon",Je=ze+" icon-remove",Ze=ze+" icon-shuttle-up",$e=ze+" icon-shuttle-down",et=new Map,tt="CODE_EDITOR_SETTINGS",rt=a.hasOwnProperty,at="ODG.PE.BLUEPRINT",ot="ODG.PE.NAME",it="ODG.PE.SEQUENCE",pt="ODG.PE.DATA_SOURCE",lt="ODG.PE.BUILT_IN",nt="ODG.PE.BLUEPRINT_TBL",st="ODG.PE.BLUEPRINT_COL",ut="ODG.PE.CUSTOM_DATA_SOURCE",dt="ODG.PE.COLUMN",Et="ODG.PE.INLINE",mt="ODG.PE.PARTITION_BY",ct="ODG.PE.FORMULA",Pt="ODG.PE.ADVANCED",yt="ODG.PE.SQL_QUERY",Tt="ODG.PE.NO_PARTITION",Dt="ODG.PE.COL.DS.BLUEPRINT.HELP",ht="ODG.PE.COL.DS.CUSTOM.HELP",Ot=[{d:"en",r:"en"}],gt=[{d:"none",r:Oe}],vt=[T,D,h,O],Lt=[R,N,H,Q,Z],ft=[ae],_t={VALUES:"staticLovValues",SORT:"staticLovSort"},Rt={VALUES:"VALUES"};var Nt,St,xt,Ct,At=!1,bt=!1,It=[],Vt=[],Gt=-1;function Ut(e){return t.getMessage(e)}function wt(e){var r=[Ut(e)].concat(Array.prototype.slice.call(arguments,1));return t.format.apply(this,r)}et.set(s,"label"),et.set(u,"display"),et.set(d,"description"),et.set(E,"schema"),et.set(P,"updated"),et.set(m,"created"),et.set(y,"updatedBy"),et.set(c,"createdBy"),et.set(g,"label"),et.set(v,"display"),et.set(T,"label"),et.set(D,"display"),et.set(h,"seq"),et.set(O,"rows"),et.set(g,"label"),et.set(v,"display"),et.set(L,"seq"),et.set(f,"lang"),et.set(R,"source"),et.set(N,"builtin"),et.set(A,"minDate"),et.set(b,"maxDate"),et.set(I,"formatMask"),et.set(V,"min"),et.set(G,"max"),et.set(U,"precision"),et.set(w,"dsCustomDataSource"),et.set(B,"inline"),et.set(q,"seqStart"),et.set(Y,"seqIncrement"),et.set(H,"mv"),et.set(Q,"mvFormat"),et.set(W,"mvDelimiter"),et.set(F,"mvUnique"),et.set(j,"mvMin"),et.set(K,"mvMax"),et.set(z,"mvPartition"),et.set(J,"formula"),et.set(Z,"required"),et.set($,"blank"),et.set(te,"maxLength"),et.set(re,"label"),et.set(ae,"dsType"),et.set(oe,"table"),et.set(ie,"sqlQuery"),et.set(pe,"whereClause"),e.widget("apex.tdPropertyEditor",{widgetEventPrefix:"tdpropertyeditor",widgetName:Ut("ODG.PE.BLUEPRINT_DESIGNER"),options:{mode:"",schema:"",langs:[],treeElement:null,treeNode:null},currentNode:null,addCustomProperties:function(){e.apex.propertyEditor.addPropertyType(ve,{render:function(e,t,r){var a=t+"_label";this.renderDivOpen(e,{class:Ie}),e.markup("<button").attr("type","button").attr("id",t).attr("aria-describedby",a).attr("class",Ve+" "+Ge+" "+we).attr(xe,r.propertyName).attr("value",r.value).markup(">").content(r.value).markup("</button>"),this.renderDivClose(e)},init:function(t,o){var p=e(t).attr("id"),l=e("#"+p),n=a.htmlBuilder(),s={filters:[{name:"search",title:Ut("APEXDEV.PE.SEARCH"),type:"search"}],columnDefinitions:[{name:"name",title:Ut(ot),alignment:"left"},{name:"builtin",title:Ut(lt),alignment:"left"},{name:"returnType",title:Ut("ODG.PE.RETURN_TYPE"),alignment:"left"}],filterLov:function(e,t){var a=[];0===Vt.length?r.process("GetBuiltins",{},{success:function(r){r.builtins.forEach((function(e){var t=e.r.split(":");a.push({name:e.d,builtin:t[0],returnType:t[1]})})),a.sort((function(e,t){return e.name.localeCompare(t.name)})),t(Vt=a,e.search)},error:function(e){i(e)}}):t(Vt,e.search)}};l.on("click",(function(){n.clear(),n.markup("<div").attr("id","builtInsLovDlg").attr("title",o.metaData.prompt).markup(">").markup("</div>"),e(n.toString()).lovDialog({modal:!0,minWidth:520,height:500,filters:s.filters,columnDefinitions:s.columnDefinitions,filterLov:s.filterLov,resizable:!1,multiValue:!1,dialogClass:"ui-dialog-flushBody",valueSelected:function(e,r){var a=r.builtin+":"+r.returnType;t.val(a),l.html(r.builtin).trigger("change")}})}))},setValue:function(t,r,a){var o=e(t).attr("id"),i=e("#"+o),p=[];a.length>0&&(p=a.split(":"),t.val(a),i.html(p[0]).trigger("change"))},getValue:function(t){return e("button",t).first().val()},destroy:function(e,t){this.super("destroy",e,t)}}),e.apex.propertyEditor.addPropertyType(fe,{stacked:!0,noLabel:!0,labelVisible:!1,minHeight:122,maxHeight:200,render:function(e,t,r){var a=t+"_label";e.markup("<div").attr("id",t).attr("class",Ie).attr("aria-labelledby",a).attr("role","group").attr(xe,r.propertyName).markup(">"),e.markup("<table").attr("class",He).markup(">").markup("<caption").attr("class",We).markup(">").content(Ut("STATIC_LOV.VALUES")).markup("</caption>").markup("<tr>").markup("<th").attr("scope","col").attr("class",Qe).markup(">").content(Ut("STATIC_LOV.VALUE.DISPLAY")).markup("</th>").markup("<th").attr("scope","col").attr("class",Qe).markup(">").content(Ut("STATIC_LOV.VALUE.FREQUENCY")).markup("</th>").markup("<th").attr("class",We).markup(">").content(Ut("STATIC_LOV.REMOVE")).markup("</th>").markup("<th").attr("class",We).markup(">").content(Ut("STATIC_LOV.MOVE_UP")).markup("</th>").markup("<th").attr("class",We).markup(">").content(Ut("STATIC_LOV.MOVE_DOWN")).markup("</th>").markup("</tr>");for(var o=0;o<r.value.length;o++)this._renderRow(e,{rowId:o+1,idPrefix:t,returnValue:r.value[o].returnValue,displayValue:r.value[o].displayValue,readOnly:r.metaData.isReadOnly,lastRow:!1});r.metaData.isReadOnly||this._renderRow(e,{rowId:r.value.length+1,idPrefix:t,lastRow:!0}),e.markup("</table>"),this.renderDivClose(e)},init:function(t,r){var o=this,i=t.closest("div."+Ce),p=t.attr("id");function l(e,t,r){var a=e.filter("input."+r),o=t.filter("input."+r),i=a.val(),p=o.val();a.val(p),o.val(i)}r.metaData.isReadOnly||i.on("change","input",(function(){var t=e(this).closest("tr").next("tr"),r=a.htmlBuilder(),i=a.htmlBuilder(),l=e(this);if(l.val()&&0===t.length){var n=e("input."+Fe).length;o._renderRow(r,{rowId:n+1,idPrefix:p,lastRow:!0}),o.renderIconButton(i,{id:p+"_rowMoveDown_"+n,icon:$e,text:wt("STATIC_LOV.MOVE_DOWN_VALUE_N",n)}),l.closest("tr").find("td:last").html(i.toString()).end().after(r.toString())}})).on("click","button[id^="+p+"_rowRemove_]",(function(){var t=e(this).closest("tr").next("tr");t.length>0?(e(this).closest("tr").remove(),t.find(":input:first").trigger("change").trigger("focus")):e(this).closest("tr").find("input").val("").filter("input."+Fe).trigger("change").trigger("focus")})).on("click","button[id^="+p+"_rowMoveUp_]",(function(){var t=e(this).closest("tr").find(":input"),r=e(this).closest("tr").prev("tr."+Ke).find(":input");r.length>0&&(l(t,r,Fe),l(t,r,je),r.filter("button[id^="+p+"_rowMove]:first").trigger("focus"),t.trigger("change"))})).on("click","button[id^="+p+"_rowMoveDown_]",(function(){var t=e(this).closest("tr").find(":input"),r=e(this).closest("tr").next("tr."+Ke).find(":input");r.length>0&&(l(t,r,Fe),l(t,r,je),r.trigger("change"),e(this).closest("tr").next("tr."+Ke).find("button[id^="+p+"_rowMoveDown_]").trigger("focus"))})),this.addLabelClickHandler(t,r)},setFocus:function(e){e.find(":input:first").trigger("focus")},getValue:function(t){var r,a,o=[];return t.find("tr."+Ke).each((function(){a=e(this).find(":input."+Fe),r=e(this).find(":input."+je),""===a.val()&&""===r.val()||o.push({displayValue:a.val(),returnValue:r.val()})})),o},_renderRow:function(t,r){var a,o,i=e.extend({rowId:"",idPrefix:"",returnValue:"",displayValue:"",readOnly:!1,lastRow:!1},r);o=i.idPrefix+"_return_"+i.rowId,a=i.idPrefix+"_display_"+i.rowId,t.markup("<tr").attr("class",Ke).markup(">"),t.markup("<td>"),this.renderBaseInput(t,{id:a,value:i.displayValue,inputClass:[Fe,Ae,be],readonly:i.readOnly,attributes:{"aria-label":wt("STATIC_LOV.VALUE_N_DISPLAY",i.rowId)}}),t.markup("</td>"),t.markup("<td>"),this.renderBaseInput(t,{id:o,value:i.returnValue,inputClass:[je,Ae,be],readonly:i.readOnly,attributes:{"aria-label":wt("STATIC_LOV.VALUE_N_FREQUENCY",i.rowId)}}),t.markup("</td>"),t.markup("<td").attr("class",Xe).markup(">"),this.renderIconButton(t,{id:i.idPrefix+"_rowRemove_"+i.rowId,icon:Je,text:wt("STATIC_LOV.REMOVE_VALUE_N",i.rowId),disabled:i.readOnly}),t.markup("</td>"),t.markup("<td").attr("class",Xe).markup(">"),i.rowId>1&&this.renderIconButton(t,{id:i.idPrefix+"_rowMoveUp_"+i.rowId,icon:Ze,text:wt("STATIC_LOV.MOVE_UP_VALUE_N",i.rowId),disabled:i.readOnly}),t.markup("</td>"),t.markup("<td").attr("class",Xe).markup(">"),i.lastRow||this.renderIconButton(t,{id:i.idPrefix+"_rowMoveDown_"+i.rowId,icon:$e,text:wt("STATIC_LOV.MOVE_DOWN_VALUE_N",i.rowId),disabled:i.readOnly}),t.markup("</td>"),t.markup("</tr>")}}),e.apex.propertyEditor.addPropertyType(Le,{_getLov:function(e){for(var t,r=e.split(";"),a=[],o=0;o<r.length;o++)t=r[o].split(","),a.push({displayValue:t[0],returnValue:t[1]?t[1]:""});return a},_getButtonText:function(e){var t=e,r=this._getLov(e);if(r.length>0)for(var a=0;a<r.length;a++)0===a?t="":t+=";",t+=r[a].displayValue+","+r[a].returnValue;return t},_getDisplayGroupValues:function(e){return{displayGroupId:Rt.VALUES,displayGroupTitle:Ut("STATIC_LOV.GROUP.VALUES"),properties:e||[]}},_getPropertyValues:function(t,r){return e.extend(!0,{propertyName:_t.VALUES,value:[],metaData:{type:fe,prompt:Ut("STATIC_LOV.PROP.VALUES"),displayGroupId:Rt.VALUES,originalProperty:r},errors:[],warnings:[]},t)},render:function(e,t,r){var a=t+"_label";this.renderDivOpen(e,{class:Ie}),e.markup("<button").attr("type","button").attr("id",t).attr("aria-describedby",a).attr("class",Ve+" "+Ge+" "+we).attr(xe,r.propertyName).attr("value",r.value).markup(">").content(this._getButtonText(r.value)).markup("</button>"),this.renderDivClose(e)},setValue:function(e,t,r,a){var o;this.super("setValue",e,t,r,a),o=this._getButtonText(r),e.text(o).attr("title",o)},init:function(t,r){var o,i=this,p=e(t).attr("id"),l=t.val(),n=i._getLov(l),s=e("#"+p),u=[],d=a.htmlBuilder();function E(e){var t,r,a;for(t=0;t<u.length;t++)for(r=0;r<u[t].properties.length;r++)if(u[t].properties[r].propertyName===e){a=u[t].properties[r];break}return a}s.on("click",(function(){n=i._getLov(t.val()),(u=[]).push(i._getDisplayGroupValues([i._getPropertyValues({value:n,metaData:{isReadOnly:r.metaData.isReadOnly}},r)])),d.clear(),d.markup("<div").attr("id","inlineStaticLOVDlg").attr("title",r.metaData.prompt).markup(">").markup("<div").attr("id","inlineStaticLOVDlgPE").markup(">").markup("</div>").markup("</div>"),o=e(d.toString()).dialog({title:r.metaData.prompt,dialogClass:Ye,modal:!0,minWidth:400,width:520,create:function(){e(this).closest(".ui-dialog").attr("aria-modal",!0)},close:function(){e("#inlineStaticLOVDlgPE").propertyEditor("destroy"),o.dialog("destroy")},open:function(){e("#inlineStaticLOVDlgPE").propertyEditor({focusPropertyName:_t.VALUES,data:{propertySet:u,multiEdit:!1}})},buttons:[{text:Ut("UTR.COMMON.CANCEL"),class:Ve,click:function(){e(this).dialog("close")}},{text:Ut("OK"),class:Ve+" "+Ue,click:function(){var a,p,l="";if((p=E(_t.VALUES).value).length>0){for(let e=0;e<p.length;e++)l+=p[e].displayValue+","+p[e].returnValue+";";l=l.slice(0,-1),i.setValue(t,r,l),t.trigger("change"),i.setFocus(t),o.dialog("close")}else(a=E(_t.VALUES,Ut("IS_REQUIRED"))).errors.push(Ut("IS_REQUIRED")),e("#inlineStaticLOVDlgPE").propertyEditor("updateProperty",a)}}]})}))}},e.apex.propertyEditor.PROP_TYPE.TEXTAREA),e.apex.propertyEditor.addPropertyType(_e,{init:function(e,t,a){var o={columnDefinitions:[{name:"name",title:Ut("ODG.PE.NAME"),alignment:"left"},{name:"comment",title:Ut("ODG.PE.COMMENT"),alignment:"left"}],filters:[{name:"type",title:Ut("TYPE"),type:"buttonset",defaultValue:"TABLE",lov:[{display:Ut("ODG.PE.TABLES"),value:"TABLE"},{display:Ut("ODG.PE.VIEWS"),value:"VIEW"}]},{name:"search",title:Ut("ODG.PE.SEARCH"),type:"search"}],filterLov:function(e,t){var a=[];r.process("GetDbObjects",{x01:"TABLE",x02:"",x03:"N",x04:""},{success:function(r){(a=[...r]).sort((function(e,t){return e.name.localeCompare(t.name)})),t(a,e.search)},error:function(e){i(e)}})}};this.super("init",e,t,a,o)}},e.apex.propertyEditor.PROP_TYPE.COMBOBOX),e.apex.propertyEditor.addPropertyType(Re,{render:function(e,t,r,a){this.super("render",e,t,r,a,!0)},init:function(i,p,l){var n,s=this,u=e("#"+i.attr("id")+"_modalBtn");this.super("init",i,p,l),u.on("click",(function(){var l,u,d,E,m,c,P=!1,y=[],T=p,D=a.htmlBuilder();function h(){Gt=u.codeEditor("changeGeneration")}y.push({text:Ut("UTR.COMMON.CANCEL"),click:function(){l.dialog("close")}}),c=function(e){o.popup({url:a.makeApplicationUrl({appId:4500,pageId:1002,clearCache:1002,itemNames:["P1002_RETURN_INTO","P1002_POPUP","P1002_SCHEMA"],itemValues:[e.baseId,"1",self.getCurrentSchema()]}),width:950,height:720})},m=function(e,t){t(T.validate(4100,e))},y.push({text:Ut("OK"),class:Ue,click:function(){s.super("setValue",i,p,u.codeEditor("getValue")),i.trigger("change"),h(),s.super("setFocus",i),l.dialog("close")}}),D.clear(),D.markup("<div").attr("id","editorDlg").attr("title",wt("CODE_EDITOR.TITLE",p.metaData.prompt)).markup(">").markup("<div").attr("id","editorDlg-codeEditor").markup(">").markup("</div>").markup("</div>"),d=xt,(E=St)>e(window).width()-40&&(E=e(window).width()-40),d>e(window).height()-40&&(d=e(window).height()-40),l=e(D.toString()).dialog({modal:!0,closeText:t.getMessage("APEX.DIALOG.CLOSE"),width:E,height:d,minWidth:680,minHeight:400,create:function(){e(this).closest(".ui-dialog").attr("aria-modal",!0)},beforeClose:function(e){var t=!0;u.codeEditor("isClean",Gt)||(t=confirm(Ut("EDITOR.UNSAVED_CHANGES"))),t||e.preventDefault()},close:function(){var e=l.closest(".ui-dialog");P&&(Ct=u.codeEditor("getPreferencesString"),window.gPreferences[tt]=Ct,r.process("setPreference",{x01:tt,x02:Ct},{dataType:""})),St!==e.outerWidth()&&(St=e.outerWidth()),xt!==e.outerHeight()&&(xt=e.outerHeight()),l.dialog("destroy").remove()},open:function(){var t=s.super("getValue",n);t=e.isEmptyObject(t)?"":t;let a=apex.aiHook?.aiEnabled?{ajax:{ajaxId:apex.aiHook.ajaxId.codeEditor}}:null;(u=e("#editorDlg-codeEditor").codeEditor(e.extend({language:"sql",autofocus:!0,readOnly:p.metaData.isReadOnly,errors:T.errors,warnings:T.warnings,value:t,ai:a,codeComplete:function(e,t){r.process("getCodeCompleteList",{p_widget_name:e.type,x01:e.search,x02:e.parent,x03:e.grantParent},{success:t})},validateCode:m,queryBuilder:c,preferencesChanged:function(){P=!0},onInitialized:function(){h()}},e.apex.codeEditor.preferencesObjectFromString(Ct)))).height(e(this).height()).width(e(this).closest(".ui-dialog").width()-2)},resizeStop:function(e,t){u.height(l.height()).width(t.size.width-2).trigger("resize")},buttons:y})})),n=i.closest("div."+Ce)}},e.apex.propertyEditor.PROP_TYPE.TEXTAREA),e.apex.propertyEditor.addPropertyType(Ne,{render:function(e,t,r){var a=t+"_label";this.renderDivOpen(e,{class:Ie}),e.markup("<button").attr("type","button").attr("id",t).attr("aria-describedby",a).attr("class",Ve+" "+Ge+" "+we).attr(xe,r.propertyName).attr("value",r.value).markup(">").content(r.metaData.displayLabel).markup("</button>"),this.renderDivClose(e)},init:function(t,o){var p,l,n,s=e(t).attr("id"),u=e("#"+s),d=this,E=a.htmlBuilder(),m=[],c="-"+Array.from(Array(10),(()=>Math.floor(36*Math.random()).toString(36))).join("");u.on("click",(function(){let a,s=gt,u=gt;l=Oe,n=Oe,o.metaData.customDataSources&&o.metaData.customDataSources.length>0&&(s=o.metaData.customDataSources,l=o.metaData.customDataSources[0].r,(async()=>{try{let P={};P=o.metaData.dsName===Oe?{x01:o.metaData.customDataSources[0].type,x02:o.metaData.customDataSources[0].r,x03:o.metaData.customDataSources[0].query}:{x01:o.metaData.dsType,x02:o.metaData.dsName,x03:o.metaData.dsQuery};const y=await r.process("GetColumnNames",P);y.columns&&(u=[{d:Ut("APEXDEV.PE.SELECT"),r:c}],y.columns.forEach((function(e){u.push({d:e,r:e})}))),n=u[0].r,o.value.length>0&&o.value.includes(".")&&(a=o.value.split("."),s.some((e=>e.r===a[0]))&&(l=a[0]),u.some((e=>e.r===a[1]))&&(n=a[1])),(m=[]).push({displayGroupId:_,displayGroupTitle:Ut(pt),collapsed:!1,properties:[{propertyName:M,value:l,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut(ut),helpText:Ut(ht),lovValues:s,isRequired:!0}},{propertyName:k,value:n,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut(dt),helpText:Ut("ODG.PE.COL.DS.CUSTOM_COLUMN.HELP"),lovValues:u,isRequired:!0}}]}),E.clear(),E.markup("<div").attr("id","customDataSourceDlg").attr("title",o.metaData.prompt).markup(">").markup("<div").attr("id","customDataSourceDlgPE").markup(">").markup("</div>").markup("</div>"),p=e(E.toString()).dialog({title:o.metaData.prompt,dialogClass:Ye,modal:!0,minWidth:400,width:520,create:function(){e(this).closest(".ui-dialog").attr("aria-modal",!0)},close:function(){e("#customDataSourceDlgPE").propertyEditor("destroy"),p.dialog("destroy")},open:function(){var t=e("#customDataSourceDlgPE");t.propertyEditor({data:{propertySet:m,multiEdit:!1},change:function(a,p){if(p.propertyName===M){l=p.property.value;let a=o.metaData.customDataSources.find((e=>e.r===l));(async()=>{try{let o,i,p=[];const l=await r.process("GetColumnNames",{x01:a.type,x02:a.r,x03:a.query});l.columns&&(p=[{d:Ut("APEXDEV.PE.SELECT"),r:c}],l.columns.forEach((function(e){p.push({d:e,r:e})})),o=p[0].r,i={propertyName:k,value:o,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut(dt),lovValues:p,isRequired:!0}},t.propertyEditor("updateProperty",i),e("#ChangeCustomDataSource_Btn").prop("disabled",!0))}catch(e){i.error(e)}})()}else p.propertyName===k&&(n=p.property.value,e("#ChangeCustomDataSource_Btn").prop("disabled",n===c))}})},buttons:[{text:Ut("UTR.COMMON.CANCEL"),class:Ve,click:function(){e(this).dialog("close")}},{text:Ut("OK"),class:Ve+" "+Ue,id:"ChangeCustomDataSource_Btn",click:function(){let e=l+"."+n;d.setValue(t,o,e),t.trigger("change"),d.super("setFocus",t),p.dialog("close")}}]}),e("#ChangeCustomDataSource_Btn").prop("disabled",!0)}catch(e){i.error(e)}})())}))},setValue:function(t,r,a){var o=e(t).attr("id"),i=e("#"+o),p=[];a.length>0&&(p=a.split(":"),t.val(a),i.html(p[0]).trigger("change"))},getValue:function(t){return e("button",t).first().val()},destroy:function(e,t){this.super("destroy",e,t)}}),e.apex.propertyEditor.addPropertyType(Se,{render:function(e,t,r){var a=t+"_label";this.renderDivOpen(e,{class:Ie}),e.markup("<button").attr("type","button").attr("id",t).attr("aria-describedby",a).attr("class",Ve+" "+Ge+" "+we).attr(xe,r.propertyName).attr("value",r.value).markup(">").content(r.metaData.displayLabel).markup("</button>"),this.renderDivClose(e)},init:function(t,r){var o,i,p,l,n,s=e(t).attr("id"),u=e("#"+s),d=this,E=a.htmlBuilder(),m=[],c="-"+Array.from(Array(10),(()=>Math.floor(36*Math.random()).toString(36))).join("");u.on("click",(function(){let a=gt,s=gt;if(l=Oe,n=Oe,r.metaData.blueprintTables&&r.metaData.blueprintTables.length>0){if(a=r.metaData.blueprintTables,l=r.metaData.blueprintTables[0].r,r.metaData.bpHasPreviousValue){if(o=r.value.split("."),l=o[0],n=o[1],a.some((e=>e.r===l))){let e=r.metaData.blueprintColumns.find((e=>e.table===l));e&&(s=[...e.columns],s.some((e=>e.r===n))||(s.unshift({d:Ut("APEXDEV.PE.SELECT"),r:c}),n=s[0].r))}}else(i=r.metaData.blueprintColumns.find((e=>e.table===l)))&&(s=[...i.columns],s.unshift({d:Ut("APEXDEV.PE.SELECT"),r:c}),n=s[0].r);(m=[]).push({displayGroupId:"column-data-source-bp-group",displayGroupTitle:Ut("ODG.PE.BLUEPRINT_SOURCE"),collapsed:!1,properties:[{propertyName:x,value:l,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut(nt),helpText:Ut(Dt),lovValues:a,isRequired:!0}},{propertyName:C,value:n,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut(st),helpText:Ut(Dt),lovValues:s,isRequired:!0}}]}),E.clear(),E.markup("<div").attr("id","blueprintSourceDlg").attr("title",r.metaData.prompt).markup(">").markup("<div").attr("id","blueprintSourceDlgPE").markup(">").markup("</div>").markup("</div>"),p=e(E.toString()).dialog({title:r.metaData.prompt,dialogClass:Ye,modal:!0,minWidth:400,width:520,create:function(){e(this).closest(".ui-dialog").attr("aria-modal",!0)},close:function(){e("#blueprintSourceDlgPE").propertyEditor("destroy"),p.dialog("destroy")},open:function(){let t=e("#blueprintSourceDlgPE");t.propertyEditor({data:{propertySet:m,multiEdit:!1},change:function(a,o){if(o.propertyName===x){let a;l=o.property.value,s=gt,n=s[0].r;let i=r.metaData.blueprintColumns.find((e=>e.table===l));i&&(s=[...i.columns],s.unshift({d:Ut("APEXDEV.PE.SELECT"),r:c}),n=s[0].r),a={propertyName:C,value:n,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut(st),helpText:Ut(Dt),lovValues:s,isRequired:!0}},t.propertyEditor("updateProperty",a),e("#ChangeBlueprintSource_Btn").prop("disabled",!0)}else o.propertyName===C&&(n=o.property.value,e("#ChangeBlueprintSource_Btn").prop("disabled",n===c))}})},buttons:[{text:Ut("UTR.COMMON.CANCEL"),class:Ve,click:function(){e(this).dialog("close")}},{text:Ut("OK"),class:Ve+" "+Ue,id:"ChangeBlueprintSource_Btn",click:function(){let e=l+"."+n;d.setValue(t,r,e),t.trigger("change"),d.super("setFocus",t),p.dialog("close")}}]}),e("#ChangeBlueprintSource_Btn").prop("disabled",!0)}}))},setValue:function(t,r,a){var o=e(t).attr("id"),i=e("#"+o),p=[];a.length>0&&(p=a.split(":"),t.val(a),i.html(p[0]).trigger("change"))},getValue:function(t){return e("button",t).first().val()},destroy:function(e,t){this.super("destroy",e,t)}})},_create:function(){var t=this,r=this.options;Nt=r.languages?r.languages:Ot,this.element.propertyEditor({searchable:!0,data:{propertySet:[],componentCount:[]},change:function(r,a){t.updateBlueprintObject(a.property),t.toggleDependantProperties(),t.validateProperties(),At=!0,e(window).on("beforeunload",(function(){return!0}))},expand:function(){t._trigger("updateExpandedGroups")},collapse:function(){t._trigger("updateExpandedGroups")}}),this.element.on("propertyeditoractivate",(function(e,r){var a=apex.util.htmlBuilder(),o=r.metaData.helpText;o?("function"==typeof o&&(o=o()),a.markup("<h3>").content(r.metaData.prompt).markup("</h3>"),"<"!==o.charAt(0)&&(o="<p>"+o+"</p>"),a.markup(o),t.setHelpText(a.toString())):t.setHelpText(Ut("ODG.PE.HELP"))})).on("propertyeditordeactivate",(function(){t.setHelpText(Ut("ODG.PE.HELP"))}))},setHelpText(t){e("#help_container").html(t)},toggleDependantProperties:function(){var e=this,t=[];e.options.mode===l?t=Lt:e.options.mode===n&&(t=ft),t.forEach((function(t){var r,a,o=e.element.propertyEditor("getProperty",t),i=o.value,p=i.includes(":")?i.split(":")[1]:i,l=e.element.find(Be.replace(/%1/g,t)).closest(Me).is(":visible");o.metaData&&(o.metaData.childrenProperties&&(r=o.metaData.childrenProperties),o.metaData.childrenGroups&&(a=o.metaData.childrenGroups)),r&&r.forEach((function(t){t.validValues.includes(p)&&l?e.element.find(Be.replace(/%1/g,t.id)).closest(Me).show():e.element.find(Be.replace(/%1/g,t.id)).closest(Me).hide()})),a&&a.forEach((function(t){t.validValues.includes(p)&&l?e.element.find(qe.replace(/%1/g,t.id)).closest(ke).show():e.element.find(qe.replace(/%1/g,t.id)).closest(ke).hide()}))}))},pushError(e,t){-1===e.errors.indexOf(t)&&e.errors.push(t),-1===It.indexOf(t)&&It.push(t)},clearError(e,t){e.errors=e.errors.filter((e=>e!==t)),It=It.filter((e=>e!==t)),bt=It.length>0},validateProperties:function(){let e,t=this,r=[];t.options.mode===p&&(r=vt),r.forEach((function(r){let a,o=t.element.propertyEditor("getProperty",r);e=t.options.treeNode,e.classes="",rt(o.metaData,"validations")&&(a=o.metaData.validations,a.forEach((function(e){rt(e,"restrictWhiteSpace")&&(/\s/g.test(o.value)&&e.restrictWhiteSpace?(t.pushError(o,wt(e.errMsg)),bt=!0):t.clearError(o,wt(e.errMsg))),rt(e,"max")&&(o.value>e.max?(t.pushError(o,wt(e.errMsg)),bt=!0):t.clearError(o,wt(e.errMsg)))})),e.classes=bt?"is-error":"",t.element.propertyEditor("updateProperty",o),t.options.treeElement.treeView("update",t.currentNode))}))},getPropertyGroups(t,a){let o=this,i=gt,x=[],C=[{d:Ut(at),r:le},{d:Ut(ut),r:se},{d:Ut(lt),r:ne},{d:Ut(Et),r:Ee},{d:Ut(it),r:me},{d:Ut(ct),r:ce}],M=[{d:Ut("ODG.PE.EXISTING_TABLE"),r:ue},{d:Ut(yt),r:de}],k=[{d:Ut("ODG.PE.DELIMITED"),r:"DELIMITED"},{d:"JSON",r:"JSON"}],fe=[{d:Ut(Tt),r:"NULL"}];if("blueprint-mode"===t?x.push({displayGroupId:"blueprint-group",displayGroupTitle:Ut(at),collapsed:!1,properties:[{propertyName:s,value:a.label,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.NAME"),helpText:Ut("ODG.PE.BLUEPRINT.NAME.HELP"),isRequired:!0,maxLen:200}},{propertyName:u,value:a.display?a.display:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.DISPLAY_NAME"),helpText:Ut("ODG.PE.BLUEPRINT.DISPLAY_NAME.HELP"),isRequired:!0,maxLen:he}},{propertyName:d,value:a.description?a.description:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.DESCRIPTION"),helpText:Ut("ODG.PE.BLUEPRINT.DESCRIPTION.HELP"),isRequired:!0,maxLen:255}},{propertyName:E,value:a.schema,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.SCHEMA"),helpText:Ut("ODG.PE.BLUEPRINT.SCHEMA.HELP"),isRequired:!0,isReadOnly:!0}},{propertyName:m,value:a.created,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.CREATED_ON"),isRequired:!0,isReadOnly:!0}},{propertyName:c,value:a.createdBy,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.CREATED_BY"),isRequired:!0,isReadOnly:!0}},{propertyName:P,value:a.updated,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.UPDATED_ON"),isRequired:!0,isReadOnly:!0}},{propertyName:y,value:a.updatedBy,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.UPDATED_BY"),isRequired:!0,isReadOnly:!0}}]}):t===p?(x.push({displayGroupId:"table-group",displayGroupTitle:Ut("ODG.PE.TABLE"),collapsed:!1,properties:[{propertyName:T,value:a.label,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut(ot),helpText:Ut("ODG.PE.TABLE.NAME.HELP"),isRequired:!0,validations:[{restrictWhiteSpace:!0,errMsg:"ODG.PE.TABLE.NAME.ERROR"}],maxLen:128}}]}),x.push({displayGroupId:ee,displayGroupTitle:Ut(Pt),collapsed:!1,properties:[{propertyName:D,value:a.display?a.display:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.DISPLAY_NAME"),helpText:Ut("ODG.PE.TABLE.DISPLAY_NAME.HELP"),isRequired:!0,maxLen:255}},{propertyName:h,value:a.seq,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.SEQUENCE"),helpText:Ut("ODG.PE.TABLE.SEQ.HELP"),isRequired:!0}},{propertyName:O,value:a.rows,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.NUM_ROWS"),helpText:Ut("ODG.PE.TABLE.NUM_ROWS.HELP"),isRequired:!0,validations:[{max:5e5,errMsg:"ODG.PE.TABLE.NUM_ROWS.ERROR"}]}}]})):t===l?(x.push({displayGroupId:"column-group",displayGroupTitle:Ut("ODG.PE.COLUMN"),collapsed:!1,properties:[{propertyName:g,value:a.label,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.NAME"),helpText:Ut("ODG.PE.COL.NAME.HELP"),isRequired:!0,maxLen:128}}]}),o.blueprintTables&&o.blueprintTables.length>=0&&(o.blueprintTables.length<=1?C=C.filter((e=>e.r!==le)):(i=[],i.push({d:Ut("APEXDEV.PE.SELECT"),r:Oe}),i=o.blueprintTables.filter((function(e,t){return e.r!==a.parentTable&&e.seq<a._parent.seq&&o.blueprintColumns[t].columns.length>0})))),o.customDataSources.length<1&&(C=C.filter((e=>e.r!==se))),x.push({displayGroupId:_,displayGroupTitle:Ut(pt),collapsed:!1,properties:[{propertyName:R,value:a.source,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut("ODG.PE.DATA_SOURCE"),helpText:Ut("ODG.PE.COL.DS.HELP"),lovValues:C,isRequired:!0,childrenProperties:[{id:S,validValues:[le]},{id:N,validValues:[ne]},{id:w,validValues:[se]},{id:z,validValues:[ne]},{id:B,validValues:[Ee]},{id:H,validValues:[Ee,ne]},{id:q,validValues:[me]},{id:Y,validValues:[me]}]}},{propertyName:S,value:a.source===le?a.ds:"",errors:[],warnings:[],metaData:{type:Se,prompt:Ut(nt),helpText:Ut(Dt),isRequired:!0,displayLabel:a.source===le?a.ds:Ut("ODG.PE.CLICK_TO_SELECT_BLUEPRINT_DS"),bpHasPreviousValue:a.source===le,blueprintTables:i,blueprintColumns:o.blueprintColumns}},{propertyName:N,value:a.builtin?a.builtin:"latin_text.text32:VARCHAR2",errors:[],warnings:[],metaData:{type:ve,prompt:Ut(lt),helpText:Ut("ODG.PE.COL.DS.BUILTIN.HELP"),isRequired:!0,childrenProperties:[{id:A,validValues:[Pe]},{id:b,validValues:[Pe]},{id:I,validValues:[Pe]},{id:V,validValues:[ye]},{id:G,validValues:[ye]},{id:U,validValues:[ye]},{id:te,validValues:["VARCHAR2"]}]}},{propertyName:A,value:a.minDate?a.minDate:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.MIN_DATE"),helpText:Ut("ODG.PE.COL.DS.BUILTIN.MIN_DATE.HELP"),isRequired:!0}},{propertyName:b,value:a.maxDate?a.maxDate:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.MAX_DATE"),helpText:Ut("ODG.PE.COL.DS.BUILTIN.MAX_DATE.HELP"),isRequired:!0}},{propertyName:I,value:a.formatMask?a.formatMask:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.FORMAT_MASK"),helpText:Ut("ODG.PE.COL.DS.BUILTIN.FORMAT_MASK.HELP"),isRequired:!0}},{propertyName:V,value:a.min??"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.MIN_VALUE"),helpText:Ut("ODG.PE.COL.DS.BUILTIN.MIN_VAL.HELP"),isRequired:!0}},{propertyName:G,value:a.max??"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.MAX_VALUE"),helpText:Ut("ODG.PE.COL.DS.BUILTIN.MAX_VAL.HELP"),isRequired:!0}},{propertyName:U,value:a.precision??"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.VALUE_PRECISION"),helpText:Ut("ODG.PE.COL.DS.BUILTIN.PRECISION.HELP"),isRequired:!0}},{propertyName:w,value:a.dsCustomDataSource?a.dsCustomDataSource:"",errors:[],warnings:[],metaData:{type:Ne,prompt:Ut(ut),helpText:Ut(ht),isRequired:!0,customDataSources:o.customDataSources,displayLabel:a.dsCustomDataSource?a.dsCustomDataSource:Ut("ODG.PE.CLICK_TO_SELECT_CUSTOM_DS"),dsType:a.dsType,dsName:a.dsCustomDataSource?a.dsCustomDataSource.split(".")[0]:Oe,dsQuery:a.dsQuery}},{propertyName:B,value:a.inline?a.inline:"VALUE1,1;VALUE2,1",errors:[],warnings:[],metaData:{type:Le,prompt:Ut(Et),helpText:Ut("ODG.PE.COL.DS.INLINE.HELP"),isRequired:!0}},{propertyName:q,value:rt(a,"seqStart")?a.seqStart:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.START_WITH"),helpText:Ut("ODG.PE.COL.DS.SEQUENCE.START_WITH.HELP"),isRequired:!0}},{propertyName:Y,value:rt(a,"seqIncrement")?a.seqIncrement:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.INCREMENT"),helpText:Ut("ODG.PE.COL.DS.SEQUENCE.INCREMENT.HELP"),isRequired:!0}},{propertyName:H,value:a.mv,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.YES_NO,prompt:Ut("ODG.PE.MULTI_VALUE"),helpText:Ut("ODG.PE.COL.MULTI_VALUE.HELP"),noValue:De,yesValue:Te,isRequired:!0,childrenGroups:[{id:X,validValues:[Te]}]}},{propertyName:J,value:a.formula?a.formula:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXTAREA,prompt:Ut(ct),helpText:Ut("ODG.PE.COL.FORMULA.HELP"),isRequired:!0}},{propertyName:Z,value:a.required,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.YES_NO,prompt:Ut("ODG.PE.REQUIRED"),helpText:Ut("ODG.PE.COL.REQUIRED.HELP"),noValue:De,yesValue:Te,isRequired:!0,childrenProperties:[{id:$,validValues:[De]}]}},{propertyName:$,value:rt(a,"blank")?a.blank:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.PERCENT_BLANK"),helpText:Ut("ODG.PE.COL.PERCENT_BLANK.HELP"),isRequired:!0}}]}),x.push({displayGroupId:X,displayGroupTitle:Ut("ODG.PE.MULTI_VALUE_OPTIONS"),collapsed:!1,properties:[{propertyName:Q,value:a.mvFormat?a.mvFormat:ge,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut("ODG.PE.FORMAT"),helpText:Ut("ODG.PE.COL.MULTI_VALUE.FORMAT.HELP"),lovValues:k,isRequired:!0,childrenProperties:[{id:W,validValues:[ge]}]}},{propertyName:W,value:a.mvDelimiter?a.mvDelimiter:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.DELIMITER"),helpText:Ut("ODG.PE.COL.MULTI_VALUE.DELIMITER.HELP"),isRequired:!0}},{propertyName:F,value:a.mvUnique?a.mvUnique:Te,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.YES_NO,prompt:Ut("ODG.PE.UNIQUE"),helpText:Ut("ODG.PE.COL.MULTI_VALUE.UNIQUE.HELP"),noValue:De,yesValue:Te,isRequired:!0}},{propertyName:j,value:a.mvMin?a.mvMin:"1",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.MIN_ENTRIES"),helpText:Ut("ODG.PE.COL.MULTI_VALUE.MIN_ENTRIES.HELP"),isRequired:!0}},{propertyName:K,value:a.mvMax?a.mvMax:"2",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.MAX_ENTRIES"),helpText:Ut("ODG.PE.COL.MULTI_VALUE.MAX_ENTRIES.HELP"),isRequired:!0}},{propertyName:z,value:"NULL",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut(mt),helpText:Ut("ODG.PE.COL.MULTI_VALUE.PARTITION_BY.HELP"),lovValues:fe,isRequired:!0}}]}),x.push({displayGroupId:ee,displayGroupTitle:Ut(Pt),collapsed:!1,properties:[{propertyName:v,value:a.display?a.display:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.DISPLAY_NAME"),helpText:Ut("ODG.PE.COL.DISPLAY_NAME.HELP"),isRequired:!0,maxLen:255}},{propertyName:L,value:a.seq,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut(it),helpText:Ut("ODG.PE.COL.SEQ.HELP"),isRequired:!0}},{propertyName:f,value:"en",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut("ODG.PE.LANGUAGE"),helpText:Ut("ODG.PE.COL.LANG.HELP"),lovValues:Nt,isRequired:!0}},{propertyName:te,value:a.maxLength?a.maxLength:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.NUMBER,prompt:Ut("ODG.PE.MAX_LENGTH"),helpText:Ut("ODG.PE.COL.MAX_LENGTH.HELP"),isRequired:!0}}]})):t===n&&x.push({displayGroupId:"data-source-group",displayGroupTitle:Ut("ODG.PE.CUSTOM_DATA_SOURCE"),collapsed:!1,properties:[{propertyName:re,value:a.label,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXT,prompt:Ut("ODG.PE.DATA_SOURCE_NAME"),helpText:Ut("ODG.PE.DATA_SOURCE.NAME.HELP"),isRequired:!0,maxLen:26}},{propertyName:ae,value:a.dsType,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut("ODG.PE.TYPE"),lovValues:M,helpText:Ut("ODG.PE.DATA_SOURCE.TYPE.HELP"),isRequired:!0,childrenProperties:[{id:oe,validValues:[ue]},{id:pe,validValues:[ue]},{id:ie,validValues:[de]}]}},{propertyName:oe,value:a.table?a.table:"",errors:[],warnings:[],metaData:{type:_e,prompt:Ut("ODG.PE.TABLE_NAME"),helpText:Ut("ODG.PE.DATA_SOURCE.TABLE.HELP"),isRequired:!0}},{propertyName:ie,value:a.sqlQuery?a.sqlQuery:"",errors:[],warnings:[],metaData:{type:Re,prompt:Ut(yt),helpText:Ut("ODG.PE.DATA_SOURCE.SQL_QUERY.HELP"),isRequired:!0},validate:async function(t,a){let o={errors:[],columns:[]};await r.process("ValidateProperty",{x01:"SQL",x02:a,x03:"LOCAL",x04:"SQL",x05:a,x06:"N"},{success:function(t){return t.success||e("#editorDlg-codeEditor").codeEditor("option","errors",[t.message]),o}})}},{propertyName:pe,value:a.whereClause?a.whereClause:"",errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.TEXTAREA,prompt:Ut("ODG.PE.WHERE_CLAUSE"),helpText:Ut("ODG.PE.DATA_SOURCE.WHERE_CLAUSE.HELP"),isRequired:!0}}]}),a.ds&&a.source===ne&&a.mv===Te){let e=[{d:Ut(Tt),r:"NULL"}];o.getRelatedBuiltIns(a.ds,a.mvPartition,e)}return x},updateBlueprintObject(e){let t=this,r=et.get(e.propertyName),a=this.options.treeNode;if(e.propertyName===s){let e=t.element.propertyEditor("getProperty",s).value;t.updateFriendlyName(e,u,a),a.children.forEach((function(t){t.children.forEach((function(t){t.blueprintName=e,t.children&&t.children.forEach((function(t){t.blueprintName=e}))}))}))}if(e.propertyName===T){let e=t.element.propertyEditor("getProperty",T).value;t.updateFriendlyName(e,D,a),a.children.forEach((function(t){t.parentTable=e})),t.blueprintTables.forEach((function(t){t.r===a.oldLabel&&(t.r=e,t.d=e)}),t.blueprintTables),t.blueprintColumns.forEach((function(t){t.table===a.oldLabel&&(t.table=e)}),t.blueprintColumns)}if(e.propertyName===g){let e=t.element.propertyEditor("getProperty",g).value;t.updateFriendlyName(e,v,a),t.blueprintColumns.forEach((function(t){t.table===a.parentTable&&t.columns.forEach((function(t){t.r===a.oldLabel&&(t.r=e,t.d=e)}),t.columns)}),t.blueprintColumns)}if(e.propertyName===H||e.propertyName===N){var o=t.element.propertyEditor("getProperty",H).value,i=t.element.propertyEditor("getProperty",N).value,p=t.element.propertyEditor("getProperty",z).value,l=[{d:Ut(Tt),r:"NULL"}];"Y"===o&&i&&t.getRelatedBuiltIns(i,p,l)}if("none"===a.nodeAction&&(["column","column-builtin","column-blueprint","column-inline","column-data_source","column-formula","column-sequence"].includes(a.type)?a.nodeAction="updateColumn":"table"===a.type?a.nodeAction="updateTable":"blueprint"===a.type?a.nodeAction="updateBlueprint":"datasource"===a.type&&(a.nodeAction="updateDataSource")),[R,w,S,N,B].includes(e.propertyName)){let e;switch(t.element.propertyEditor("getProperty",R).value){case le:e=t.element.propertyEditor("getProperty",S).value,e.length>0?(a.ds=e,a.nodeReady="Y"):a.nodeReady="N";break;case ne:e=t.element.propertyEditor("getProperty",N).value,e&&(e=e.split(":")[0],a.ds=e);break;case se:e=t.element.propertyEditor("getProperty",w).value,e.length>0?(a.ds=e,a.nodeReady="Y"):a.nodeReady="N";break;case Ee:e=t.element.propertyEditor("getProperty",B).value,e&&(a.ds=e);break;case me:case ce:a.ds=""}}let n=t.element.propertyEditor("getProperty",Z).value;n&&n===Te?(t.element.propertyEditor("updatePropertyValue",$,"0",!1),a.blank=0):(t.element.propertyEditor("updatePropertyValue",$,"1",!1),a.blank=1),a[r]=e.value,this.options.treeElement.treeView("update",this.currentNode)},getMode(){return this.options.mode},setMode(e,t){var r=this;r.options.mode=e,r.element.propertyEditor("option","data",{propertySet:r.getPropertyGroups(e,t),componentCount:[]}),r.toggleDependantProperties(),r.validateProperties()},refreshUI(){var e=this;e.setMode(e.options.mode,e.options.treeNode)},updateFriendlyName(e,t,r){var a,o=e.split("_");for(let e=0;e<o.length;e++)o[e]=o[e].charAt(0).toUpperCase()+o[e].slice(1).toLowerCase();a=o.join(" "),this.element.propertyEditor("updatePropertyValue",t,a,!1),r.display=a},setTreeElement(e){this.options.treeElement=e},setCurrentSchema(e){this.options.schema=e},getCurrentSchema(){return this.options.schema},setCustomDataSources(e){this.customDataSources=e},setBlueprintTablesAndColumns(e,t){this.setBlueprintTables(e),this.setBlueprintColumns(t)},setBlueprintTables(e){this.blueprintTables=e},setBlueprintColumns(e){this.blueprintColumns=e},setSelectedNode(e,t){this.options.treeNode=e,this.currentNode=t},getTreeNode(){return this.options.treeNode},getCurrentNode(){return this.currentNode},getRelatedBuiltIns(t,a,o){var p=this;r.process("GetRelatedBuiltIns",{x01:t.split(".")[0],x02:t.split(":")[0]},{success:function(t){let r;t.builtins.forEach((function(e){o.push({d:e.d,r:e.r})})),r={propertyName:z,value:a||o[0].r,errors:[],warnings:[],metaData:{type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:Ut(mt),lovValues:o,isRequired:!0}},p.element.propertyEditor("updateProperty",r)},error:function(e){i(e)}})},isBlueprintChanged:()=>At,setBlueprintChanges(e){At=e},hasBlueprintErrors:()=>bt,getBlueprintErrorList:()=>It.join(", ")})}(apex.jQuery,apex.lang,apex.server,apex.util,apex.navigation,apex.debug);