/*!
 * Copyright (c) 2013, 2024, Oracle and/or its affiliates.
 */
window.componentGallery={},function(e,t,n,a,i){"use strict";const o="region",s="item",l="button",r="GAL_SHOW_LEGACY",u="GAL_CUR_TAB";var p=!1,c={region:"regions",item:"items",button:"buttons"},g={regions:[],items:[],buttons:[]},d={region:"a-Gallery-region",item:"a-Gallery-pageItem",button:"a-Gallery-button"};const m=a.hasOwnProperty;function f(e){var t,n=e.split(":"),a=g[c[n[0]]];if(a&&(t=a[n[1]]),!t)throw new Error("Invalid component data key");return t}function T(e,n,a){var i,o=t.isPageReadOnly();i=d[a.type],o||(i+=" is-draggable"),e.markup("<li").attr("class",i).optionalAttr("aria-grabbed",o?null:"false").attr("data-component",a.type+":"+n).markup("><span class='a-Icon ").attr(a.iconClass).markup("'></span><span class='a-Gallery-componentName'>").content(a.title).markup("</span></li>")}function y(e,t){var n=a.htmlBuilder();return/^\s</.test(t=t||"")||(t="<p>"+t+"</p>"),n.markup("<span class='tt-title'>").content(e).markup("</span>").markup(t),n.toString()}function P(){!function(){const e=t.getComponentType(t.COMP_TYPE.REGION).pluginType.plugins;for(let n in e)if(m(e,n)){const a=e[n];let i=[{id:t.PROP.REGION_TYPE,value:n}];if(a.isDeprecated||"NATIVE_DATA_UPLOAD_COLUMN_MAPPING"===a.name)continue;const s=t.getTheme().defaultTemplates["NATIVE_IR"===n?"ir":"region"];let l;a.features.includes("REGION_TEMPLATE")&&i.push({id:t.PROP.REGION_TEMPLATE,value:s}),n.startsWith("TMPL")&&(l=a.templateTypes.includes("REPORT")?"REPORT":a.templateTypes.includes("PARTIAL")?"PARTIAL":"REGION_ONLY");const r={type:o,iconClass:window.pageDesigner.getComponentIconClass(o,n,l),title:a.title,isSupported:!0,isLegacy:a.isLegacy,tooltip:y(a.title,a.helpText),values:i};g.regions.push(r)}}(),function(){var e,a,o,l,r=t.getComponentType(t.COMP_TYPE.PAGE_ITEM).pluginType.plugins;for(e in r)if(m(r,e)){if((a=r[e]).isDeprecated)continue;l=!a.componentTypes||-1!==n.inArray(t.COMP_TYPE.PAGE_ITEM,a.componentTypes),o={type:s,iconClass:window.pageDesigner.getComponentIconClass(s,e),title:l?a.title:i.formatMessage("PD.UNSUPPORTED",a.title),isSupported:l,isLegacy:a.isLegacy,tooltip:y(a.title,a.helpText),values:[{id:t.PROP.ITEM_TYPE,value:e}]},g.items.push(o)}}(),function(){var e,n,a,o=t.getButtonTemplates();function s(e,n,i){a={type:l,iconClass:window.pageDesigner.getComponentIconClass(l,"Y"===i?"hot":"normal"),title:e,isSupported:!0,isLegacy:!1,tooltip:y(e,""),values:[{id:t.PROP.BUTTON_TEMPLATE,value:n},{id:t.PROP.BUTTON_IS_HOT,value:i}]},g.buttons.push(a)}for(e in o)m(o,e)&&(s((n=o[e]).name,e,"N"),n.hasHotTemplate&&s(i.formatMessage("PD.GAL.HOT_BTN",n.name),e,"Y"))}(),["regions","items","buttons"].forEach((function(e){g[e].sort((function(e,t){return e.title.localeCompare(t.title)}))})),v()}function v(){var e=n("#glv"),i=t.isPageReadOnly(),o=a.htmlBuilder();["regions","items","buttons"].forEach((function(a){var s,l,r=g[a],u=n("#cg-"+a+" ul").first();for(o.clear(),s=0;s<r.length;s++)!(l=r[s]).isSupported||l.isLegacy&&!p||T(o,s,l);u.html(o.toString()).iconList("refresh"),i||n("#cg-"+a+" li").draggable({addClasses:!1,appendTo:"#glv-viewport",cursor2:"default",cursorAt:{left:2,top:2},delay:10,distance:5,opacity:.9,revert:!1,helper:function(){var a=n(this).attr("data-component"),i=f(a);let o,s;for(const e of i.values)e.id===t.PROP.REGION_TYPE?o=e.value:e.id===t.PROP.ITEM_TYPE&&(s=e.value);return e.gridlayout("makeHelper",i.type,i.iconClass,i.title,a,o,s)},connectToGridlayout:"#glv",containment:"document",zIndex:1e3,start:function(){apex.tooltipManager.disableTooltips()},stop:function(){apex.tooltipManager.enableTooltips()}})}))}e.getComponentData=f,n((function(){var e,a=!1;p="Y"===window.pageDesigner.getPreference(r);var i={menubar:!1,items:[{id:"addTo",type:"subMenu",disabled:!0,labelKey:"PD.GAL.MI.ADD2",menu:{items:[]}},{type:"toggle",labelKey:"PD.GAL.MI.SHOW_LEGACY",get:function(){return p},set:function(e){p=e,v(),window.pageDesigner.savePreference(r,p?"Y":"N")}}],beforeOpen:function(e,a){var i,o,s,l,r=n("#glv"),u=a.menuElement.menu("find","addTo"),p=a.selection;1!==p.length||t.isPageReadOnly()?u.menu.items=[]:(i=p.eq(0),o=f(l=i.attr("data-component")),s=function(){window.pageDesigner.glvMenuAddAction.call(this,l)},u.menu.items=window.pageDesigner.glvMakeTargetMenu(r.gridlayout("getDropTargets",o.type,"add"),s)),u.disabled=0===u.menu.items.length}};n("#cg-regions ul, #cg-items ul, #cg-buttons ul").addClass("a-Gallery").each((function(){n(this).iconList({multiple:!1,contextMenu:i,contextMenuId:"galleryMenu-"+n(this).parent().parent()[0].id})})).tooltip({items:"li",show:apex.tooltipManager.defaultShowOption(),position:{my:"left-20 top-20",at:"right bottom",collision:"flipfit"},content:function(){return f(n(this).attr("data-component")).tooltip}}),n("#gallery-tabs").on("tabsactivate",(function(e,t){n("#galleryMenuBtn").attr("data-menu","galleryMenu-"+t.newPanel[0].id),a||window.pageDesigner.savePreference(u,t.newTab.parent().children().index(t.newTab[0])),a=!1})),n("#galleryMenuBtn").attr("data-menu","galleryMenu-cg-regions"),e=parseInt(window.pageDesigner.getPreference(u),10),!isNaN(e)&&e>0&&setTimeout((function(){a=!0,n("#gallery-tabs").tabs("option","active",e)}),10),n("#gallery-tabs .u-ScrollingViewport.resize").resize((function(){n(this).children(".a-IconList").resize()}))})),n(document).on("modelReady",(function(){P()})),n(document).on("modelCleared",(function(){["regions","items","buttons"].forEach((function(e){var t=n("#cg-"+e+" ul").first();g[e]=[],t.empty().iconList("refresh")}))}))}(window.componentGallery,pe,apex.jQuery,apex.util,apex.lang);