/*!
 * Copyright (c) 2023, Oracle and/or its affiliates.
 */
!function(e,a){"use strict";window.workingCopyDiff={init:()=>{let t,s,r,i,o,n,l,v,d=0,p=0,c=!1;function u(e){let a,t;for(a=0;a<e.length;a++)t=e[a],$s(t.id,t.value,null,!0)}let m=a.process("doDiff",{pageItems:["P5300_REVERSE"]});e("body").append('<div class="a-PWWait-overlay" id="progress_overlay" role="progressbar" aria-busy="true" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" tabindex="-1">   <div class="a-PWWait-body">      <div class="a-PWWait-progress">         <span class="a-PWWait-bar" id="pct_complete"></span>     </div>   <div class="a-PWWait-label" id="progress_messages"></div></div>'),o=e("#progress_overlay"),n=e("#progress_messages",o),l=e("#pct_complete",o),o.focus(),m.done((e=>{e&&e.items&&u(e.items),v=$v("P5300_STATUS"),["DONE","ERROR"].includes(v)&&setTimeout((()=>{o.remove(),apex.event.trigger("body","working-copy-diff-completed")}),2e3)})).fail((()=>{o.remove()})),function v(){setTimeout((function(){p+=1,d+=1,a.process("getCurrentStatus").done((function(a){let p;a&&a.items&&u(a.items),r=t,i=s,p=$v("P5300_STATUS"),t=$v("P5300_CURRENT_STATUS"),s=parseInt($v("P5300_PCT_COMPLETE"),10),55===s&&d>1&&!c&&(d=1,c=!0),"DONE"!==p?(s+=Math.min(d,44),"ERROR"===p?(o.remove(),apex.message.showErrors([{type:"error",location:"page",message:t,unsafe:!1}]),e("#NEXT_BTN").attr("disabled",!0)):(v(),r!==t&&(n.text(t),o.attr("aria-valuetext",t)),i!==s&&(l.css("width",s+"%"),o.attr("aria-valuenow",s)))):"DONE"===p&&(n.text($v("P5300_CURRENT_STATUS")),l.css("width","100%"),o.attr("aria-valuenow",$v("P5300_PCT_COMPLETE")).attr("aria-valuetext","100"),setTimeout((()=>{o.remove(),apex.event.trigger("body","working-copy-diff-completed")}),1e3))}))}),1500+p/5*1e3)}()}}}(apex.jQuery,apex.server);