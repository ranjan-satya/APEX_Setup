/*!
 * Copyright (c) 2003, 2024, Oracle and/or its affiliates.
 */
apex.builder={},function(e,t,i,n,a){"use strict";const s="click",E="change";var o,r,l,_,u,p,d,c,T,S,A,N,I;e.searchBox=function(e,i,n){var a=t("#"+e);function E(e){""!==e&&e!==n&&("function"==typeof i?i(e):apex.navigation.redirect(i+encodeURIComponent(e)))}a.keypress((function(e){13===e.keyCode&&(E(a.val()),e.preventDefault())})).focus((function(){this.value===n&&(this.value="")})).blur((function(){""===this.value&&(this.value=n)})).next().on(s,(function(e){E(a.val()),e.preventDefault()}))},o=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)"),r="dark",l="dark-auto",_="standard",u="standard-auto",p="apex-theme-dark",d="apex-theme-dark-auto",c="apex-theme-standard",T="apex-theme-standard-auto",N='link[href*="/apex_ui/css/'+(S="Theme-Standard")+'"]',I='link[href*="/apex_ui/css/'+(A="Theme-Dark")+'"]',e.changeUIMode=function(a){var s,E,S=t("body"),A=t("body iframe"),N=a;S.hasClass(c)?E=_:S.hasClass(T)?E=u:S.hasClass(p)?E=r:S.hasClass(d)&&(E=l),e.setThemeCSSFile(t("html"),a),A.length>0&&e.setThemeCSSFile(A.contents(),a),a===r?(s=p,o.removeEventListener("change",e.autoDarkMode)):a===_?(s=c,o.removeEventListener("change",e.autoDarkMode)):a!==l&&a!==u||(e.isOSDarkMode()?(s=d,N=l):(s=T,N=u),o.addEventListener("change",e.autoDarkMode)),S.removeClass(c+" "+p+" "+T+" "+d).addClass(s),A.length>0&&A.contents().find("body").removeClass(c+" "+p+" "+T+" "+d).addClass(s),E!==N&&function(e){if("nobody"===i.APP_USER)n.info("Skip ajax_set_ui_mode, logging in");else{let t="4050"!==i.APP_ID?"4500":i.APP_ID;apex.server.process("ajax_set_ui_mode",{p_flow_id:t,p_flow_step_id:0,x01:e},{success:function(){},error:function(){}})}}(N),S.trigger("apex-builder-theme-changed")},e.setThemeCSSFile=function(e,t){var i,n=e.find(N),a=e.find(I);(t===r||t===l)&&n.length>0?(i=n.attr("href"),n.attr("href",i.replace(S,A))):(t===_||t===u)&&a.length>0&&(i=a.attr("href"),a.attr("href",i.replace(A,S)))},e.isOSDarkMode=function(){return o&&o.matches},e.isBuilderDarkMode=function(){return(t("body iframe").length>0?t("body iframe").contents():t("html")).find(I).length>0},e.autoDarkMode=function(){let t=e.isOSDarkMode()?l:u;e.changeUIMode(t)},e.initUIAppearance=function(){let i=t("body");(i.hasClass(T)||i.hasClass(d))&&e.autoDarkMode(),i.hasClass(p)&&t('button[aria-label="Light Mode"]').hasClass("is-on")&&e.changeUIMode(_)},e.getHeadingLevel=function(e){let t=e.className;return t.includes("js-headingLevel-1")?"h1":t.includes("js-headingLevel-2")?"h2":t.includes("js-headingLevel-3")?"h3":t.includes("js-headingLevel-4")?"h4":t.includes("js-headingLevel-5")?"h5":t.includes("js-headingLevel-6")?"h6":"h1"},e.replaceTag=function(e,t){let i=t.innerHTML,n=document.createElement(e);if(n.innerHTML=i,t.hasAttributes())for(const e of t.attributes)n.setAttribute(e.name,e.value);t.replaceWith(n)},t((function(){e.initUIAppearance(),t("button.js-ui-mode-btn").on("click",(function(){t("button.js-ui-mode-btn").removeClass("is-on is-off").addClass("is-off").attr("aria-current","false");let i=t(this),n=i.data("mode");i.removeClass("is-off").addClass("is-on").attr("aria-current","true"),"auto"===n?e.autoDarkMode():n===_?e.changeUIMode(_):n===r&&e.changeUIMode(r)})),"function"==typeof a.passwordMask&&a.passwordMask({hideIcon:"icon-password-hide",showIcon:"icon-password-show",button:["a-Button","a-Button--icon","a-Button--passwordVisibility"],icon:["a-Icon"]},((e,t,i)=>{const n=e.closest(".a-Form-inputContainer");if(n){const a=n.querySelector(".a-Login-iconValidation");n.querySelector(".a-Form-error")?e.previousElementSibling?e.previousElementSibling.after(t):n.prepend(t):n.append(t),t.append(e),a&&t.append(a),t.append(i)}})),t("[class*=js-headingLevel]").each((function(i,n){let a=t(n).find("[data-apex-heading]")[0];if(void 0!==a){let t=e.getHeadingLevel(n);e.replaceTag(t,a)}}))}));try{var h=!1,O=!1,L=!1;window.uR=function(){h&&(h.className="htmldbButtonList",h===$x("ALL")&&(h=$x("ALL")))},window.uF=function(){var e=$x("BB")?$x("BB"):$x("ContentArea");e=e||$x("ContentBody");try{for(var t=$x_ByClass("rc-title",e,"DIV"),i=0,n=t.length;i<n;i++)$x_Show($x_UpTill(t[i],"","rounded-corner-region"));window.uR(),scroll(0,0)}catch(e){scroll(0,0)}},window.qF=function(e,t){var i=$x("BB")?$x("BB"):$x("ContentArea");i=i||$x("ContentBody");var n="ORA_WWV_ATTRIBUTE_PAGE",a="htmldbButtonListCurrent";try{var s=t.substr(1);if("ALL"===s||"DEFAULTALL"===s)e.className=a,"DEFAULTALL"!==s&&apex.storage.setCookie(n,$x("pFlowStepId").value+","+t),window.uF(),$x_Show(["BB","ContentArea","ContentBody"]);else{$x("ALL")&&($x("ALL").className="htmldbButtonList2"),window.uR(),e.className=a,h=e,L=$x_ByClass("rc-title",i,"DIV");for(var E=0;E<L.length;E++)if($x_Hide($x_UpTill(L[E],"","rounded-corner-region")),L[E].getElementsByTagName("A")){var o=L[E].getElementsByTagName("A")[0];o&&o.name&&o.name===s&&(O=o)}O&&$x_Show($x_UpTill(O,"","rounded-corner-region")),apex.storage.setCookie(n,$x("pFlowStepId").value+","+t),$x_Show(["BB","ContentArea","ContentBody"])}}catch(e){window.uF(),$x_Show(["BB","ContentArea","ContentBody"])}}}catch(e){}e.dynamicAttributes={gCurrentSelection:{pluginType:null,pluginName:null},gAjaxIdentifier:null,getAttributeSelector:function(e,t,i){return"#"+e+"ATTRIBUTE_"+(t<10?"0":"")+t+i},getAttributesSelector:function(t,i){for(var n="",a=1;a<=25;a++)a>1&&(n+=","),n+=e.dynamicAttributes.getAttributeSelector(t,a,i);return n},hide:function(i){t(e.dynamicAttributes.getAttributesSelector(i,"_CONTAINER")).hide(),t("#"+i+"FORMAT_MASK_DATE,#"+i+"FORMAT_MASK_NUMBER,#"+i+"IS_REQUIRED").each((function(){apex.item(this).hide()}))},show:function(n,a,o,r,l,_,u,p,d){var c=t(e.dynamicAttributes.getAttributesSelector(o,"")),T=t(e.dynamicAttributes.getAttributesSelector(o,"_CONTAINER")),S=T.filter(":last").next(),A=T.filter(":last").parent(),N=function(e,t,i){return'<table class="lov" cellspacing="0" cellpadding="0" border="0" role="presentation"><tr><td><input id="#ID#" name="#NAME#" type="text" maxlength="#MAX_LEN#" size="'+t+'" /></td><td><a class="a-Button a-Button--popupLOV" href="'+i+'"><span class="a-Icon icon-popup-lov"><span class="visuallyhidden">'+u+e.label+"</span></span></a></td></tr></table>"};if(e.dynamicAttributes.hide(o),r[a]&&r[a].attributeList.length>0&&r[a].attributeSortList.forEach((function(i){var n=t(e.dynamicAttributes.getAttributeSelector(o,i,"_CONTAINER"));0===S.length?A.append(n):S.before(n)})),l||c.each((function(){t(this).closest("a-Form-inputContainer").empty().html('<input type="hidden" id="'+this.id+'" name="'+this.name+'" value="">')})),r[a]&&(r[a].attributeList.length>0||/FORMAT_MASK/.test(r[a].standardAttributes)||/SESSION_STATE/.test(r[a].standardAttributes))){e.dynamicAttributes.gCurrentSelection={pluginType:n,pluginName:a};for(let n=0;n<r[a].attributeList.length;n++){let _=r[a].attributeList[n];var I;const u=function(e,t,i,n){var a="",s=!1;return e.forEach((function(e,E){a+=t.replace(/#SEQ#/g,E).replace(/#R#/g,e.r).replace(/#D#/g,e.d),e.r===i?(s=!0,a=a.replace(/#SELECTED#/g,n)):a=a.replace(/#SELECTED#/g,"")})),i&&!s&&(a+=t.replace(/#SEQ#/g,9999).replace(/#R#/g,f).replace(/#D#/g,f+"*")),a};if(_){var h,O=t(e.dynamicAttributes.getAttributeSelector(o,n+1,"")),L=O.attr("id"),R=O.attr("name"),f=O.val(),g=t("#"+L+"_CONTAINER .a-Form-labelContainer"),C=g.find("label"),P=g.find(".a-Form-required"),m=g.find(".u-VisuallyHidden"),x=t("#"+L+"_CONTAINER .a-Form-inputContainer").find(".a-Button--helpButton");C.text(_.label).append(m),x.attr("title",p+_.label).attr("aria-label",p+_.label),_.isRequired&&"SELECT LIST"!==_.type&&"CHECKBOX"!==_.type?(C.removeClass("aOptional").addClass("aRequired"),P.show(),m.show()):(C.removeClass("aRequired").addClass("aOptional"),P.hide(),m.hide()),l?!f&&_.defaultValue&&(f=_.defaultValue):f=_.defaultValue,"TEXTAREA"===_.type||"SQL"===_.type||"PLSQL"===_.type||"PLSQL EXPRESSION"===_.type||"PLSQL EXPRESSION BOOLEAN"===_.type||"PLSQL FUNCTION BODY"===_.type||"PLSQL FUNCTION BODY BOOLEAN"===_.type||"HTML"===_.type||"XML"===_.type||"JAVASCRIPT"===_.type?h='<div class="apex-item-group apex-item-group--textarea"><textarea id="#ID#" name="#NAME#" class="textarea apex-item-textarea" data-resizable="true" cols="#DISPLAY_LEN#" maxlength="#MAX_LEN#" rows="'+("TEXTAREA"===_.type?"4":"8")+'"></textarea></div>':"PAGE NUMBER"===_.type||"PAGE NUMBERS"===_.type||"AUTHORIZATION GROUPS"===_.type?h=N(_,(I=/S$/.test(_.type))?"50":"30","javascript:apex.navigation.popup({url:'wwv_flow.show?p_flow_id=#APP_ID#&p_flow_step_id=#APP_PAGE_ID#&p_instance=#APP_SESSION#&p_request=NATIVE%253D#AJAX_IDENTIFIER#&x11="+encodeURIComponent(_.type)+"&x12=#ID#&"+apex.util.getContextString()+("AUTHORIZATION GROUPS"===_.type?"&x13=' + $v('"+o+"ATTRIBUTE_02')":"'")+",name:'winLovList',width:400,height:450}); void(0);"):"PAGE ITEM"===_.type||"PAGE ITEMS"===_.type?h=N(_,(I=/S$/.test(_.type))?"50":"30","javascript:popUp('f?p=4000:246:#APP_SESSION#::NO:RP,246:F4000_P246_CALLING_FIELD,P246_APPEND:#ID#,"+(I?"Y":"N")+"');"):"CHECKBOX"===_.type||"SELECT LIST"===_.type?(_.isRequired&&!f&&_.valueList.length>0&&(f=_.valueList[0].r),h='<select id="#ID#" name="#NAME#" class="selectlist" size="1">'+u(_.valueList,'<option value="#R#" #SELECTED#>#D#</option>',f,' selected="selected"')+"</select>"):h="CHECKBOXES"===_.type?'<fieldset id="#ID#_fieldset" class="apex-item-group apex-item-group--rc apex-item-checkbox" tabindex="-1"><input id="#ID#" name="#NAME#" type="hidden">'+u(_.valueList,'<div class="apex-item-option"><input id="#ID#_#SEQ#" type="checkbox" value="#R#"><label class="u-checkbox" for="#ID#_#SEQ#">#D#</label></div>')+"</fieldset>":"COLOR"===_.type?'<input id="#ID#" name="#NAME#" type="text" maxlength="30" size="10" />':"ICON"===_.type?'<input id="#ID#" name="#NAME#" type="text" maxlength="255" size="30" />':'<input id="#ID#" name="#NAME#" type="text" maxlength="#MAX_LEN#" size="#DISPLAY_LEN#" />',O.val(null).closest("#"+L+"_wrapper").html(h.replace(/#ID#/g,L).replace(/#NAME#/g,R).replace(/#DISPLAY_LEN#/g,_.displayLen).replace(/#MAX_LEN#/g,_.maxLen).replace(/#APP_ID#/g,i.APP_ID).replace(/#APP_PAGE_ID#/g,i.APP_PAGE_ID).replace(/#APP_SESSION#/g,i.APP_SESSION).replace(/#IMAGE_PREFIX#/g,i.APEX_FILES).replace(/#AJAX_IDENTIFIER#/g,e.dynamicAttributes.gAjaxIdentifier)),"TEXTAREA"===_.type||"SQL"===_.type||"PLSQL"===_.type||"PLSQL EXPRESSION"===_.type||"PLSQL FUNCTION BODY"===_.type||"JAVASCRIPT"===_.type?apex.item.attach(t("#"+L+"_CONTAINER")):"CHECKBOXES"===_.type&&t("#"+L).parent().find("input[type=checkbox]").on(s,(function(){var e=t(this).parent().siblings("input[type=hidden]"),i=""===e.val()?[]:e.val().split(":");this.checked?i.push(this.value):i.splice(i.indexOf(this.value),1),e.val(i.join(":")).trigger(E)})),t("#"+L).val(f),"CHECKBOXES"===_.type&&f.split(":").forEach((function(e){t("#"+L).parent().find('input[type=checkbox][value="'+e+'"]').attr("checked",!0)}))}}for(let i=0;i<r[a].attributeList.length;i++){let n=r[a].attributeList[i];n&&(e.dynamicAttributes.showHideAttribute(o,i,r[a].attributeList,d),n.dependingOnAttrSeq&&n.dependingOnCondType&&t("#"+o+"ATTRIBUTE_"+n.dependingOnAttrSeq).on(E,(function(){e.dynamicAttributes.showHideAttribute(o,i,r[a].attributeList,d)})))}/FORMAT_MASK_DATE/.test(r[a].standardAttributes)?(apex.item(o+"FORMAT_MASK_DATE").show(),apex.item(o+"FORMAT_MASK").hide()):/FORMAT_MASK_NUMBER/.test(r[a].standardAttributes)?(apex.item(o+"FORMAT_MASK_NUMBER").show(),apex.item(o+"FORMAT_MASK").hide()):apex.item(o+"FORMAT_MASK").show(),/SESSION_STATE/.test(r[a].standardAttributes)&&apex.item(o+"IS_REQUIRED").show(),_&&(r[a].attributeList.length>0||/FORMAT_MASK/.test(r[a].standardAttributes)||/SESSION_STATE/.test(r[a].standardAttributes)?$x_Show(_):$x_Hide(_))}else e.dynamicAttributes.gCurrentSelection={pluginType:null,pluginName:null},"ITEM TYPE"===n&&apex.item(o+"FORMAT_MASK").show(),_&&$x_Hide(_);var D=[],v=null,U=null,b=[],M=[];if("4446"!==i.APP_PAGE_ID)switch(n){case"ITEM TYPE":["LIST_OF_VALUES","LABEL_ALIGNMENT","PLACEHOLDER","FIELD_TEMPLATE","CSIZE","CHEIGHT","TAG_ATTRIBUTES2","LOV_DISPLAY_NULL","LOV_NULL_TEXT","LOV_CASCADE_PARENT_ITEMS","AJAX_ITEMS_TO_SUBMIT","AJAX_OPTIMIZE_REFRESH","STATIC_LOV_POPUP","DYNAMIC_LOV_POPUP","ENCRYPT_SESSION_STATE_YN","ESCAPE_ON_HTTP_OUTPUT"].forEach((function(e){apex.item(o+e).hide()})),t("#GRID,#LABEL,#ELEMENT,#VALIDATION,#DEFAULT,#SOURCE,#LOV,#QP,#READONLY,#READONLY,#HELP,#HELP").hide(),r[a]?(D=r[a].standardAttributes.split(":"),v=r[a].sqlMinColumnCount,U=r[a].sqlMaxColumnCount):(D=["VISIBLE","SOURCE","SESSION_STATE","ELEMENT","WIDTH","HEIGHT","ELEMENT_OPTION","QUICKPICK","READONLY","ENCRYPT","LOV","LOV_DISPLAY_NULL"],v=2,U=2),D.includes("VISIBLE")&&(M.push("#GRID"),b.push("FIELD_TEMPLATE"),D.includes("WIDTH")&&b.push("CSIZE"),D.includes("HEIGHT")&&b.push("CHEIGHT"),M.push("#LABEL"),M.push("#HELP"),b.push("LABEL_ALIGNMENT"),D.includes("PLACEHOLDER")&&b.push("PLACEHOLDER"),D.includes("ELEMENT_OPTION")&&b.push("TAG_ATTRIBUTES2"),D.includes("LOV")&&(b.push("LIST_OF_VALUES"),M.push("#LOV"),v<=2&&U>=2&&(b.push("STATIC_LOV_POPUP"),b.push("DYNAMIC_LOV_POPUP")),e.dynamicAttributes.setSqlExamples(n,a),D.includes("LOV_DISPLAY_NULL")&&(b.push("LOV_DISPLAY_NULL"),"YES"===$v(o+"LOV_DISPLAY_NULL")&&b.push("LOV_NULL_TEXT")),D.includes("CASCADING_LOV")&&(b.push("LOV_CASCADE_PARENT_ITEMS"),apex.item(o+"LOV_CASCADE_PARENT_ITEMS").isEmpty()||(b.push("AJAX_ITEMS_TO_SUBMIT"),b.push("AJAX_OPTIMIZE_REFRESH")))),D.includes("QUICKPICK")&&M.push("#QP"),D.includes("READONLY")&&M.push("#READONLY"),D.includes("ESCAPE_OUTPUT")&&b.push("ESCAPE_ON_HTTP_OUTPUT")),D.includes("ELEMENT")&&M.push("#ELEMENT"),D.includes("SOURCE")&&(M.push("#SOURCE"),M.push("#DEFAULT")),D.includes("ENCRYPT")&&b.push("ENCRYPT_SESSION_STATE_YN"),"NATIVE_STOP_AND_START_HTML_TABLE"===a&&(M.push("#LABEL"),M.push("#HELP")),b.forEach((function(e){apex.item(o+e).show()})),t(M.join()).show();break;case"REGION TYPE":["AJAX_ITEMS_TO_SUBMIT","ESCAPE_ON_HTTP_OUTPUT"].forEach((function(e){apex.item(o+e).hide()})),t("#SOURCE,#SQL_EXAMPLES").hide(),((D=r[a]?r[a].standardAttributes.split(":"):["SOURCE_PLAIN"]).includes("SOURCE_PLAIN")||D.includes("SOURCE_SQL"))&&(M.push("#SOURCE"),D.includes("SOURCE_SQL")&&(e.dynamicAttributes.setSqlExamples(n,a),M.push("#SQL_EXAMPLES"))),(D.includes("AJAX_ITEMS_TO_SUBMIT")||["NATIVE_IR","NATIVE_SQL_REPORT","NATIVE_FNC_REPORT","NATIVE_TABFORM"].includes(a))&&b.push("AJAX_ITEMS_TO_SUBMIT"),D.includes("ESCAPE_OUTPUT")&&b.push("ESCAPE_ON_HTTP_OUTPUT"),b.forEach((function(e){apex.item(o+e).show()})),M.length>0&&t(M.join()).show();break;case"DYNAMIC ACTION":if(apex.item(o+"STOP_EXECUTION_ON_ERROR").hide(),apex.item(o+"WAIT_FOR_RESULT").hide(),$x_Hide("AFFECTED_ELEMENTS"),!a)return;(D=r[a].standardAttributes.split(":")).includes("STOP_EXECUTION_ON_ERROR")&&apex.item(o+"STOP_EXECUTION_ON_ERROR").show(),D.includes("WAIT_FOR_RESULT")&&apex.item(o+"WAIT_FOR_RESULT").show(),l||(D.includes("ONLOAD")?$s(o+"EXECUTE_ON_PAGE_INIT","Y"):$s(o+"EXECUTE_ON_PAGE_INIT",null));var w=$v(o+"AFFECTED_ELEMENTS_TYPE");t("#"+o+'AFFECTED_ELEMENTS_TYPE option[value!=""]').remove();var y=[];D.includes("ITEM")&&y.push("ITEM"),D.includes("BUTTON")&&y.push("BUTTON"),D.includes("REGION")&&y.push("REGION"),D.includes("JQUERY_SELECTOR")&&y.push("JQUERY_SELECTOR"),D.includes("TRIGGERING_ELEMENT")&&y.push("TRIGGERING_ELEMENT"),D.includes("EVENT_SOURCE")&&y.push("EVENT_SOURCE"),D.includes("JAVASCRIPT_EXPRESSION")&&(y.push("DOM_OBJECT"),y.push("JAVASCRIPT_EXPRESSION")),0===y.length?($x_Hide("AFFECTED_ELEMENTS"),apex.item(o+"AFFECTED_ELEMENTS_TYPE").hide(),$s(o+"AFFECTED_ELEMENTS_TYPE","")):($x_Show("AFFECTED_ELEMENTS"),apex.item(o+"AFFECTED_ELEMENTS_TYPE").show(),y.forEach((function(e){t('#ELEMENTS_TYPE_CLONE option[value="'+e+'"]').clone().appendTo("#"+o+"AFFECTED_ELEMENTS_TYPE")})),$s(o+"AFFECTED_ELEMENTS_TYPE",w));break;case"AUTHENTICATION TYPE":a&&r[a].standardAttributes.split(":").includes("INVALID_SESSION")?t("#INVALID_SESSION_ATTRIBUTES").show():t("#INVALID_SESSION_ATTRIBUTES").hide()}},showHideAttribute:function(e,i,n,a){var s=e+"ATTRIBUTE_",o=s+(i<9?"0":"")+(i+1);!function e(t){var i,E,o,r=!a||n[t].showInWizard;if(r&&!0===n[t].isExcluded&&(r=!1),r&&n[t].dependingOnAttrSeq&&n[t].dependingOnCondType)if(r=e(parseInt(n[t].dependingOnAttrSeq,10)-1))switch(i=$v(s+n[t].dependingOnAttrSeq),E=n[t].dependingOnExpr,(o="CHECKBOXES"===n[parseInt(n[t].dependingOnAttrSeq,10)-1].type)&&(i=""===i?[]:i.split(":")),n[t].dependingOnCondType){case"EQUALS":r=o?i.includes(E):i===E;break;case"NOT_EQUALS":r=o?!i.includes(E):i!==E;break;case"IN_LIST":if(E=E.split(","),o){r=!1;for(let e of i)if(r=E.includes(e))break}else r=E.includes(i);break;case"NOT_IN_LIST":if(E=E.split(","),o){r=i.length>0;for(let e of i)if(!(r=!E.includes(e)))break}else r=!E.includes(i)&&""!==i;break;case"NULL":r=o?0===i.length:!i;break;case"NOT_NULL":r=o?i.length>0:i}else!1===n[t].dependingOnAlwaysEval&&(r=!0);return r}(i)?apex.item(o).hide():apex.item(o).show(),t("#"+o).trigger(E)},help:function(t,n){var a="wwv_flow_item_help.show_plugin_attribute_help?p_application_id="+(t||i.APP_ID)+"&p_builder_page_id="+i.APP_PAGE_ID+"&p_session_id="+i.APP_SESSION+"&p_plugin_type="+e.dynamicAttributes.gCurrentSelection.pluginType+"&p_plugin_name="+e.dynamicAttributes.gCurrentSelection.pluginName+"&p_attribute_scope="+("4446"===i.APP_PAGE_ID?"APPLICATION":"COMPONENT")+"&p_attribute_sequence="+n.substr(n.length-2);apex.theme.popupFieldHelp("","",a)},setSqlExamples:function(e,n){var a={p_request:"APPLICATION_PROCESS=get_plugin_sql_examples",p_flow_id:i.APP_ID,p_flow_step_id:i.APP_PAGE_ID,p_instance:i.APP_SESSION,x01:e,x02:n};t.ajax({mode:"abort",port:"setSqlExamples",type:"post",url:"wwv_flow.show&"+apex.util.getContextString(),data:a,success:function(e){t("#bodySQL_EXAMPLES").html(e)}})}},t((function(){t(document.body).on("click",".js-dynamicItemHelp",(function(){var n=t(this).attr("data-itemname"),a=t(this).attr("data-appid")||i.APP_ID;n&&a&&e.dynamicAttributes.help(a,n)})).on("keydown",(function(n){112===n.which&&n.altKey&&t(n.target).parents().each((function(n){var a,s,E;return!(n>4)&&((a=t(this).find(".js-dynamicItemHelp")).length?(s=a.attr("data-itemname"),E=a.attr("data-appid")||i.APP_ID,s&&E&&e.dynamicAttributes.help(E,s),!1):void 0)}))}))})),e.plugin={initConditionItems:function(e,i,n,a,s,o,r,l){function _(){var E=$v(e),_=["NEVER","ALWAYS","BROWSER_IS_NSCP","BROWSER_IS_MSIE","BROWSER_IS_MSIE_OR_NSCP","BROWSER_IS_OTHER","WHEN_ANY_ITEM_IN_CURRENT_PAGE_HAS_CHANGED","WHEN_THIS_PAGE_SUBMITTED","WHEN_THIS_PAGE_NOT_SUBMITTED","PAGE_IS_IN_PRINTER_FRIENDLY_MODE","PAGE_IS_NOT_IN_PRINTER_FRIENDLY_MODE","USER_IS_NOT_PUBLIC_USER","USER_IS_PUBLIC_USER","DISPLAYING_INLINE_VALIDATION_ERRORS","NOT_DISPLAYING_INLINE_VALIDATION_ERRORS","MAX_ROWS_LT_ROWS_FETCHED","MIN_ROW_GT_THAN_ONE","IS_READ_ONLY","IS_NOT_READ_ONLY"];_.includes(E)||E===r||""===E||"%null%"===E?(apex.item(i).hide(),apex.item(n).hide(),apex.item(a).hide()):["EXISTS","NOT_EXISTS","EXPRESSION","PLSQL_ERROR","FUNCTION_BODY","FUNC_BODY_RETURNING_BOOLEAN","FUNC_BODY_RETURNING_ERR_TEXT","ITEM_IS_NULL","ITEM_IS_NOT_NULL","ITEM_NOT_NULL","ITEM_IS_ZERO","ITEM_IS_NOT_ZERO","ITEM_IS_NULL_OR_ZERO","ITEM_NOT_NULL_OR_ZERO","ITEM_CONTAINS_NO_SPACES","ITEM_IS_NUMERIC","ITEM_IS_NOT_NUMERIC","ITEM_IS_ALPHANUMERIC","REQUEST_EQUALS_CONDITION","REQUEST_NOT_EQUAL_CONDITION","REQUEST_IN_CONDITION","REQUEST_NOT_IN_CONDITION","CURRENT_PAGE_EQUALS_CONDITION","CURRENT_PAGE_NOT_EQUAL_CONDITION","CURRENT_PAGE_IN_CONDITION","CURRENT_PAGE_NOT_IN_CONDITION","CURRENT_LANG_IN_COND1","CURRENT_LANG_NOT_IN_COND1","CURRENT_LANG_NOT_EQ_COND1","CURRENT_LANG_EQ_COND1","DAD_NAME_EQ_CONDITION","DAD_NAME_NOT_EQ_CONDITION","SERVER_NAME_EQ_CONDITION","SERVER_NAME_NOT_EQ_CONDITION","HTTP_HOST_EQ_CONDITION","HTTP_HOST_NOT_EQ_CONDITION","TO_UPPER_CASE","TO_LOWER_CASE","TRIM","LTRIM","RTRIM","SINGLE_WHITESPACES","REGULAR_EXPRESSION","SQL_QUERY_SINGLE_VALUE","SQL_QUERY_SEMI_COLON","ANY_AI_USER_PROMPT_CONTAINS","LAST_AI_USER_PROMPT_CONTAINS"].includes(E)?(["EXPRESSION","FUNCTION_BODY","FUNC_BODY_RETURNING_BOOLEAN","FUNC_BODY_RETURNING_ERR_TEXT"].includes(E)?(apex.item(i).show(),"EXPRESSION"===E?t("#"+i+" option[value=SQL]").show():("SQL"===apex.item(i).getValue()&&apex.item(i).setValue("PLSQL"),t("#"+i+" option[value=SQL]").hide())):apex.item(i).hide(),apex.item(n).show(),apex.item(a).hide()):(apex.item(n).show(),apex.item(a).show(),apex.item(i).hide()),""!==s&&(["EXISTS","NOT_EXISTS","EXPRESSION","PLSQL_ERROR","FUNCTION_BODY","FUNC_BODY_RETURNING_BOOLEAN","FUNC_BODY_RETURNING_ERR_TEXT"].includes(E)?apex.item(s).show():apex.item(s).hide()),""!==o&&(""===E||E===r||"%null%"===E||"NEVER"===E?apex.item(o).hide():apex.item(o).show()),""!==l&&(_.includes(E)||E===r||""===E||"%null%"===E?apex.item(l).hide():apex.item(l).show())}t("#"+e).on(E,(function(){_()})),setTimeout((function(){_()}),1)},initCodeLanguageItem:function(e,i){function n(){var n=$v(i);["EXPRESSION","FUNCTION_BODY","FUNC_BODY_RETURNING_BOOLEAN","FUNC_BODY_RETURNING_ERR_TEXT"].includes(n)?(apex.item(e).show(),"EXPRESSION"===n?t("#"+e+" option[value=SQL]").show():("SQL"===apex.item(e).getValue()&&apex.item(e).setValue("PLSQL"),t("#"+e+" option[value=SQL]").hide())):apex.item(e).hide()}t("#"+i).on(E,(function(){n()})),setTimeout((function(){n()}),1)},getData:function(){var e,n=this.action.attribute01,a=new window.htmldb_Get(null,i.APP_ID,"PLUGIN="+this.action.ajaxIdentifier,i.APP_PAGE_ID);n.split(",").forEach((function(e){var i=t("#"+e)[0];i&&a.add(e,$v(i))})),(e=a.get())&&this.affectedElements.each((function(){$s(this,e)}))},groupSelectList:function(e,i){var n=t.extend({nullValue:""},i);t(e).each((function(){apex.item.create(this.id,{nullValue:n.nullValue})}))},uiComponentsSelectList:function(e,i){var n=t.extend({nullValue:""},i),a=t("#"+e),s=a.html();apex.item.create(e,{nullValue:n.nullValue}),a.find("[data-supported=false]:not([value='"+$v(e)+"'])").remove(),a.on(E,(function(){"$UNSUPPORTED$"===$v(e)&&(a.empty().append(s),a.find("option[value='$UNSUPPORTED$']").remove())}))},wizardSelection:function(e,i){var n=t("#"+e+"_SELECTION",apex.gPageContext$),a=t("#"+e,apex.gPageContext$);function s(e){e&&n.iconList("setSelection",t("[data-value="+e+"]"))}function o(){n.empty()}function r(e){var t;n.append(e.entries),n.iconList("refresh"),n.iconList("setSelection",n.children().first()),t=n.iconList("getSelectionValues"),a.val(t[0]).trigger("change")}function l(){apex.widget.util.cascadingLov(n,i.ajaxIdentifier,{pageItems:t(i.pageItemsToSubmit,apex.gPageContext$)},{optimizeRefresh:i.optimizeRefresh,dependingOn:t(i.dependingOnSelector,apex.gPageContext$),success:r,clear:o})}n.iconList({navigation:!0,label:".a-IconList-iconName",activate:function(e,t){a.val(t.values[0]).trigger("change"),i.submitPage&&apex.submit("NEXT"),e.preventDefault()},selectionChange:function(){var e=t(this).iconList("getSelectionValues");e[0]&&a.val(e[0]).trigger("change")}}),apex.widget.util.onVisibilityChange(n,(function(e){e&&s(a[0].value)})),apex.item.create(e,{setValue:s,nullValue:"",setFocusTo:function(){return n.iconList("focus"),{focus:function(){}}}}),i.dependingOnSelector&&t(i.dependingOnSelector,apex.gPageContext$).on("apexbeforerefresh",o).on(E,l),n.on("apexrefresh",l)},templateOptions:function(e){var i=t("#"+e),n=t("#"+e+"_HIDDEN"),a=t("#"+e+"_DEFAULT"),s=t("#"+e+"_CONTAINER select, #"+e+"_CONTAINER input[type=checkbox]"),o=[];function r(){var i="",E=!1;a=t("#"+e+"_DEFAULT"),o=a.val().split(":"),t("div#"+e+"_CONTAINER input[type=checkbox]").each((function(e){0===e&&(E="#DEFAULT#"===$v(this.id)),o.includes(t("#"+this.id).val())&&(t(this).prop("disabled",E),E?(t(this).prop("checked",!0),t(this).parent().addClass("is-disabled")):t(this).parent().removeClass("is-disabled"))})),s.each((function(){t(this).is(":enabled")&&(i+=$v(this.id).length>0?":"+$v(this.id):"")})),n.val(i.substring(1))}apex.item.create(e,{setFocusTo:t("input,select",i).first()}),i.on(E,r),t(document).on("apexbeforepagesubmit",r),t("#"+e+"_ADVANCED").collapsible({collapsed:!1}),i.on("apexafterrefresh",(function(){s=t("#"+e+"_CONTAINER select, #"+e+"_CONTAINER input[type=checkbox]"),t("#"+e+"_ADVANCED").collapsible({collapsed:!1})}))}},e.filePreview={trim:function(e,t){var i,n=e;return n.substr(0,1)===t&&(n=n.substring(1)),i=n.length,n.substr(i-1,1)===t&&(n=n.substring(0,i-1)),n},showPreview:function(e,t,i,n){if(e.data("previewLines")){var a,s,E=this.getLines(e.data("previewLines"),t,"\n",n),o=[],r=[],l="",_="";for(a=0;a<25;a++)_+=" ";for(a=0;a<E.length;a++){for(;E[a].charCodeAt(E[a].length-1)<32;)E[a]=E[a].substr(0,E[a].length-1);o.push(this.getFields(E[a],i,n))}for(a=0;a<o.length;a++)for(s=0;s<o[a].length;s++)(!r[s]||o[a][s].length>r[s])&&(r[s]=o[a][s].length,r[s]>25&&(r[s]=25));for(a=0;a<o.length;a++){for(s=0;s<o[a].length;s++)i&&""!==i?o[a][s].length>25?l=l+(o[a][s]+_).substring(0,r[s]-3)+"...":l+=(o[a][s]+_).substring(0,r[s]):l+=o[a][s],s<o[a].length-1&&(l+="|");l+="\n"}return l}},getFields:function(e,t,i){var n,a=this.getLines(e,9999,"\\t"===t?String.fromCharCode(9):t,i);for(n=0;n<a.length;n++)a[n]=a[n].replace(/^\s+|\s+$/g,""),i&&(a[n]=this.trim(a[n],i));return a},getLines:function(e,t,i,n){for(var a=0,s=0,E=t,o=[];E>0;){if(i&&""!==i?a=e.indexOf(i,s):(E=0,a=e.length),-1===a)E=0,a=e.length;else{for(;n&&(e.substring(s,a).match(new RegExp(n,"g"))||[]).length%2==1;)a=e.indexOf(i,a+1);-1===a&&(a=e.length,E=0)}o.push(e.substring(s,a)),E-=1,s=a+=1}return o},getAsciiLines:function(e,i,n,a,s,E){var o=e.files[0],r=new FileReader,l=o.slice(0,5120),_=this;r.onloadend=function(n){n.target.readyState===FileReader.DONE&&(t(e).data("previewLines",n.target.result),i.val(_.showPreview(t(e),5,a,s)))};try{r.readAsText(l,E||"utf-8")}catch(e){i.val(apex.lang.formatMessage("DATA_LOAD.NO_PREVIEW"))}}},e.treeUtil={find:function(e,t,i){var n=e.treeView("find",{depth:-1,findAll:!0,match:function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>=0}});n.addClass(i),n.length>0&&e.treeView("expandAll"),e.treeView("focus")},search:function(e,i,n){t("."+apex.util.escapeCSS(n),"#"+apex.util.escapeCSS(i)).removeClass(n),""!==e&&this.find(apex.region(i).widget(),e,n)},focus:function(e){apex.region(e).widget().treeView("focus")},selectRoot:function(e){apex.region(e).widget().treeView("setSelection",t("[aria-level='1']",t("#"+apex.util.escapeCSS(e))).parent()),this.focus(e)},traverse:function(e){var t;if(e.children)for(t=0;t<e.children.length;t++)this.traverse(e.children[t]);else e.children=[]}},e.breadcrumb={showParentTree:function(e,t,i){var n,a=[];e.length>0&&(e.forEach((function(e){a.push(e.id)})),n=a.join(":"),$s(t,n),apex.region(i).refresh(),apex.theme.openRegion(i))},moveNodes:function(i,n){apex.theme.closeRegion(i);var a=apex.region(i).widget().treeView("getSelectedNodes")[0].id,s=t(".id-"+a,t("#"+apex.util.escapeCSS(n))).parent(),E=apex.region(n).widget(),o=E.treeView("getSelection");E.treeView("moveNodes",s,0,o),e.treeUtil.focus(n)},validateMove:function(e,i,n,a){var s=[],E={},o=[];i.forEach((function(e){s.push(e.id)})),E.parentId=e.id,E.children=s,o.push(JSON.stringify(E));var r,l=apex.util.showSpinner(t("#bcEntries"));(r=apex.server.process("SAVE_CHANGES",{f01:o})).done((function(e){apex.message.showPageSuccess(e.msg)})),r.always((function(){l.remove()})),a(!0)}},e.sql={buildSelectStmt:function(e,t,i){var n=apex.item(e).getValue(),a=apex.item(t).getValue(),s=apex.item(i).getValue();return""!==a?"select * from "+(""!==n?n+".":"")+a+(""!==s?" where "+s:""):""}},e.launchAppOrPage=function(t){let i;i=t.includes("?p=")?t.substring(t.indexOf("?p=")+3).split(":")[0]:new URL(t).pathname.split("/").slice(0,-1).join("/"),e.launchAppUnderTest(t,i,{favorTabbedBrowsing:!0})},e.getUpdateData=function(e){t.ajax("https://apex.oracle.com/pls/apex/APEX_REPOSITORY.remote.get_update_data?callback=?",{dataType:"jsonp",cache:!0,data:e,success:function(e){t("#updates").html(e.data.replace("%SESSION%",apex.env.APP_SESSION))}})}}(apex.builder,apex.jQuery,apex.env,apex.debug,apex.widget);
!function(n,e,i,t,o){"use strict";const a="APEX_BUILDER";e.getAppUnderTestWindowName=function(n){let e="APEX_AUT_";return"Y"===$v("P0_WINDOW_MGMT_SHARE_WINDOW")||(e+=n),e},e.launchAppUnderTest=function(n,i,o){let a="",s=apex.navigation.openInNewWindow("",e.getAppUnderTestWindowName(i),o);return s&&s.$v&&(a=s.$v("pdebug")||""),n.includes("f?p")&&n.includes(":")&&("BRANCH_TO_PAGE_ACCEPT"===(n=n.split(":"))[3]?(n[6]=n[6]+",P1000_DEBUG",n[7]=n[7]+","+a):n[4]=a,n=n.join(":")),t.openInNewWindow(n,e.getAppUnderTestWindowName(i),o)},e.nameBuilderWindow=function(){window.name&&0!==window.name.indexOf(a)||(window.name=a+"_"+apex.env.APP_SESSION)},e.initWizardModal=function(){const e=".a-Dialog-body",i=".a-Dialog-wizardSteps",t=".a-Dialog-footer";let a=function(){let o=n(i).height(),a=n(t).height();n(e).css({top:o,bottom:a})};n(window).on("apexwindowresized",(function(){a()})),a(),o.modalAutoSize({observeClass:e,sections:[e,i,t]})},e.initStickyHeader=function(e){const i=n("#"+e);if(i[0]){const e=i.outerHeight(),t=i.parent(),o=i.offset().top;n(window).on("scroll",(function(){n(window).scrollTop()>o?(i.addClass("is-fixed"),t.css("margin-top",e)):(i.removeClass("is-fixed"),t.css("margin-top","0"))}))}},e.initWizardProgressBar=function(){o.initWizardProgressBar("a-WizardSteps")},n((function(){function i(){t.openInNewWindow(this.href,"_blank",{favorTabbedBrowsing:!0})}n(".a-Header-tabsContainer").menu({menubar:!0,behaveLikeTabs:!0}).show(),function(){let e,i,t,o,a=n("#a_Header_menu");if(a.length)for(t=a.children("ul").children("li"),o=a.menu("option").items,e=0;e<o.length;e++)i=o[e].id,i&&t.eq(e).addClass(i)}(),n("#helpMenu_menu").on("menucreate",(function(){const e=this;["helpLinkNewWindow","helpLinkForum","helpLinkOTN","helpLinkDocLib"].forEach((function(t){const o=n(e).menu("find",t);o&&(o.action=i)}))})),n(".a-Region--hideShow").each((function(){n(this).collapsible({content:n(this).find(".a-Region-body").first(),collapsed:n(this).hasClass("is-collapsed")})})),n("body").on("click","button.launch-aut",(function(){const i=n(this).attr("data-link"),o={},a=$v("P0_WINDOW_MGMT_MODE")||"FOCUS";let s;if(i.includes("?p=")){const n=i.substring(i.indexOf("?p=")+3).split(":");if(n.length>=8&&"BRANCH_TO_PAGE_ACCEPT"===n[3]){const e=n[6].split(","),i=n[7].split(",");for(let n=0;n<e.length&&n<i.length;n++)if("FB_FLOW_ID"===e[n]){s=i[n];break}}else s=n[0]}if(!s)try{s=new URL(window.location.origin+i).searchParams.get("fb_flow_id")}catch(n){}if(!s)try{s=new URL(window.location.href).searchParams.get("fb_flow_id")}catch(n){}if(!s)try{s=new URL(i).pathname.split("/").slice(0,-1).join("/")}catch(n){}s&&("NONE"===a||/^4\d\d\d$/.test(s)?t.redirect(i):("BROWSER"===a&&(o.favorTabbedBrowsing=!0),e.launchAppUnderTest(i,s,o)))})),n("button.launch-aut").each((function(){let e,i=n(this),t=i.attr("data-link");t||(e=/['"]((ws|f)\?p=.*)['"]/.exec(i.attr("onclick")),e||(e=/[apex.navigation.redirect(]'(.*)'/.exec(i.attr("onclick"))),e&&e.length>1&&(t=JSON.parse(`"${e[1]}"`),i.removeAttr("onclick"),i.attr("data-link",t)))})),n("#accountMenu_menu").menu({customContent:!0,tabBehavior:"NEXT"}),n(document.body).on("dialogopen dialogresizestop",".a-DialogRegion",(function(){!function(n){const e=n.find(".a-DialogRegion-buttons").height();n.find(".a-DialogRegion-body").css("bottom",e)}(n(this))}))}))}(apex.jQuery,apex.builder,apex.util,apex.navigation,apex.theme);
!function(t,e,s,i,a,l,o,n,r,c){"use strict";let h,p,d=0;const{formatMessage:g,getMessage:u}=o,_=r.APP_SESSION,f=$v("F4000_P1_FLOW")||$v("P4500_CURRENT_APP")||$v("P0_FLOWPAGE").split(";")[0]||null,y="search-page",S="search-app",$="search-all-apps",m="search-workspace";class b{#t;#e;#s;static typeOf={function:"function",object:"object",string:"string"};constructor(t=[],e={}){this.#s={isCaseSensitive:!1,ignoreLocation:!1,includeScore:!1,includeMatches:!1,shouldSort:!0,keys:[],location:0,threshold:.6,distance:100,maxScore:.8,sortFn:this.#i},Object.freeze(this.#s),this.list=t,this.options=e}#a(t=""){if(this.options.keys.length){const e=1,s=[],i={};this.options.keys.forEach((a=>{let l,o;const n=new Set;if(typeof a===b.typeOf.object?Array.isArray(a)||void 0===a.name||(l={name:typeof a.name===b.typeOf.string?a.name:JSON.stringify(a.name),list:[]},o=a.weight??e):typeof a!==b.typeOf.function&&(l={name:typeof a===b.typeOf.string?a:JSON.stringify(a),list:[]},o=e),void 0!==l){let e;if(Array.isArray(l.name))e=l.name;else if(typeof l.name!==b.typeOf.function){const t=typeof l.name===b.typeOf.string?l.name:JSON.stringify(l.name);e=t.split(".")}void 0!==e&&this.#t.forEach(((t,s)=>{let a=t[e[0]];if(void 0!==a){if(e.length>1)for(let t=1;t<e.length;t++)a=void 0!==a[e[t]]?a[e[t]]:void 0;void 0!==a&&n.add(a);const t={item:a,refIndex:s,score:void 0===a?1:void 0};i[a]?i[a].push(t):i[a]=[t],l.list.push(t)}}));const a=this.#l(t,Array.from(n),o);if(a.length){for(let t=0;t<a.length;t++){const e=a[t],s=i[e.item];e.matches?.forEach((t=>{t.key=l.name})),s?.forEach((t=>{t.score=e.score,e.matches&&(t.matches=e.matches)}))}s.push(l)}}}));const a={};if(!s.length)return[];for(let t=0;t<s.length;t++)s[t].list.forEach((({score:t,refIndex:e,matches:s})=>{if(void 0!==t){let i=a[e];i?(t<i.score&&(i.score=t),i.matches=[...i.matches,s]):(i={item:this.#t[e],refIndex:e,matches:s,score:t},a[e]=i)}}));return Object.values(a)}return[]}#o(t,e){const{ignoreLocation:s,location:i,threshold:a,distance:l}=this.options,o={matches:[],location:-1};let n;if(s?n=e.length-1:(n=a*l+i,n>e.length-i&&(n=e.length-1)),""===t||t.length>e.length)return o;const r=Array.from(new Set(`${t}`)),c=Array.from(t).reverse(),h={},p=Array(t.length).fill(1);let d=p;r.forEach((t=>{const e=[];c.forEach((s=>{e.push(t===s?0:1)})),h[t]=e}));for(let s=0;s<e.length;s++){let a=t.length-1;const l=e.substring(s,e.length);if(l.length<t.length)break;d=p;for(let e=0;e<l.length;e++){const r=l[e],c=h[r]||p,g=d.slice(1,d.length);g.push(0),d=[];for(let t=0;t<g.length;t++)d.push(g[t]||c[t]);if(1===d[a])break;if(0===a&&0===d[a]){s>=i&&s<=n&&-1===o.location&&(o.location=s),o.matches.push([s,s+(t.length-1)]);break}a-=1}}return o}#n(t,e,s){const i=e/s.length,{ignoreLocation:a,location:l,distance:o}=this.options;if(a||t<=-1)return i;const n=Math.abs(l-t);return o?(i+n/o)/100:n?1:i}#r(t="",e=""){if(!t.length)return e.length;if(!e.length)return t.length;const s=[];for(let i=0;i<=e.length;i++){s[i]=[i];for(let a=1;a<=t.length;a++)s[i][a]=0===i?a:Math.min(s[i-1][a]+1,s[i][a-1]+1,s[i-1][a-1]+(t[a-1]===e[i-1]?0:1))}return s[e.length][t.length]}#l(t="",e=this.#t,s=1){const i=[],a=[],l=this.options.isCaseSensitive?t.trim():t.trim().toLowerCase();return e.forEach((t=>{if(typeof t!==b.typeOf.function){const e=typeof t===b.typeOf.string?t:JSON.stringify(t);a.push(e)}})),a.forEach(((t,e)=>{const a=this.options.isCaseSensitive?t.trim():t.trim().toLowerCase();if(a.includes(l)){const{location:o,matches:n}=this.#o(l,a),r=this.#r(l,a),c={item:t,refIndex:e,score:this.#n(o,r,l)/(s||.01),...this.options.includeMatches&&{matches:[{indices:n,value:t}]}};i.push(c)}})),i}#i(t){return(t=t.filter((t=>void 0!==t.score))).sort(((t,e)=>t.score-e.score))}search(t=""){if(!this.#t.length||""===t)return[];const e=typeof this.#t[0];return this.options.sortFn(e===b.typeOf.object?this.#a(t):this.#l(t),t)}get list(){return this.#t}set list(t){this.#t=Array.isArray(t)?t:[t]}get options(){return this.#e}set options(t){const e=Object.keys(this.#s),s={};Object.entries(t).forEach((([t,i])=>{e.includes(t)&&typeof this.#s[t]==typeof i&&(s[t]=i)})),this.#e={...this.#s,...s}}}class v{#c;#h;#p;#d;#g;#u;#_;#f;#y;constructor(){this.#c={},this.#d=[],this.#g=[],this.#u={},this.#_=0,this.#S(),this.#f={includeScore:!0,includeMatches:!0,keys:[{name:"alias",weight:.5},{name:"initials",weight:.9},{name:"name",weight:0},{name:"pageId",weight:0}],sortFn:this.#i},this.#y={includeScore:!0,includeMatches:!0,keys:[{name:"alias",weight:.5},{name:"initials",weight:.9},{name:"appId",weight:.5},{name:"name",weight:0},{name:"pageId",weight:0}],sortFn:this.#i},this.#p=new b([],this.#y)}#i(t,e){let s=t.length;const a=window.pe;if(void 0!==a){const l=((t,e)=>{let l=[];const o=function(t,e){let s=a.displayTitleSearch(t,e),i=a.getComponentType(e);if(i)for(let e=0;e<i.childComponentTypes.length;e++)s=o(t,i.childComponentTypes[e]).concat(s);return s},n=o(t,e);for(let t=0;t<n.length;t++){const e=n[t],o={},r=a.getComponentType(e.typeId);o.name=i.escapeHTML(e.getDisplayTitle()),o.category=i.escapeHTML(r.title.singular),o.icon='<span class="a-Spotlight-icon" aria-hidden="true"><span class="a-Icon icon-page-designer"></span></span>',o.pe="pe",o.typeid=e.typeId,o.componentid=e.id,o.propertyid=r.displayPropertyId,o.context="app",l.push({item:o,refIndex:s+=1,score:.5})}return l})(e,"4000"===r.APP_ID&&"9600"===r.APP_PAGE_ID?a.COMP_TYPE.WORKFLOW:a.COMP_TYPE.PAGE);t=[...t,...l]}const l={};let o=[];return t.forEach((t=>{if(void 0!==t.score){const{item:{category:e}}=t;l[e]?l[e].push(t):l[e]=[t]}})),Object.keys(l).forEach((t=>{let e=l[t].sort(((t,e)=>t.score-e.score)),s=e.reduce(((t,e)=>t+e.score),0)/e.length;o.push({avrgScore:s,category:t,results:e}),o=o.sort(((t,e)=>t.avrgScore-e.avrgScore))})),o}#$(t,e=[]){const s=(t,s)=>{if("initials"===s.key){const i=t.item.name.toLowerCase();let a=i.split(" ");if(a.length>1){let t=Array.from(new Set([...s.value.toLowerCase()]));const l=[],o=[];t.forEach(((t,s)=>{e.includes(t)||l.unshift(s)})),l.forEach((e=>{a.splice(e,1),t.splice(e,1)})),t.forEach((t=>{a.forEach((e=>{if(0===e.indexOf(t)){const t=i.indexOf(e);o.push([t,t])}}))})),s.indices=o}}};let i=JSON.stringify(t);return i=JSON.parse(i),i.forEach((t=>{t.results.forEach((t=>{t.matches?.forEach((e=>{Array.isArray(e)?e.forEach((e=>{s(t,e)})):s(t,e)}))}))})),i}validInput(t){return!0}search(t){let e=this.#p.search(t);if(e.length){if(t.length>1){const s=Array.from(new Set([...`${t}`]));e=this.#$(e,s)}return e}return[]}async#S(t){if(t){if(this.#h!==`app_${t}`){let e=this.#c[t]??[];if(!e||!e.length){this.awaitingIndices=!0,this.#_=this.#_+1;try{const{global:s,pages:i}=await c.process("spotlightIndex",{x01:t,x02:"Y"});i.length&&(e=[...s.filter((t=>"app"===t.context)),...i],this.#c[t]=e)}catch(t){l.warn(JSON.parse(t.responseText)),e=[]}finally{this.#_=this.#_-1,0===this.#_&&(this.awaitingIndices=!1)}}this.#p.list=e,this.#p.options=this.#f,this.#h=`app_${t}`}}else if("static"!==this.#h){if(!this.#d.length&&!this.awaitingIndices){this.awaitingIndices=!0,this.#_=this.#_+1;let e=[];try{const t=await c.process("spotlightIndex",{x01:f,x02:"N"});p=t.shortcuts,e=[...t.global,...t.apps],this.#g=t.global.filter((t=>"app"===t.context)),t.apps.forEach((t=>{null!=t.alias&&(this.#u[t.alias.toUpperCase()]=t.appId)})),f&&t.pages&&(e=[...e,...t.pages],this.#c[f]=[...this.#g,...t.pages])}catch(t){l.warn(JSON.parse(t.responseText))}finally{this.#_=this.#_-1,this.#d=e,0===this.#_&&(this.awaitingIndices=!1)}}this.#p.list=this.#d,this.#p.options=this.#y,this.#h="static"}}updateIndices(t){if(t&&t.is){if(!isNaN(t.app))return void this.#S(t.app);{let e=this.#u[t.app];if(e)return void this.#S(e);{const s=new RegExp("^(?<alias>[\\w@#$%^&*<>{}()!?-]+)[-:]").exec(t.searchInput),i=s?.groups.alias?.toUpperCase();if(e=this.#u[i],e)return t.app=e,t.searchTerm=t.searchInput.substring(s.groups.alias.length+1,t.searchInput.length),void this.#S(e)}}}this.#S()}}class E{constructor(t,e){this.metadata=t,this.HTMLElement=e}}class A{#m;#b;#v;#E;#A;#C;#w;#L;#I;#x;#k;#P;#O;#R;#T;static aliasAllowedChars="\\w@#$%^&*<>{}()!?";static advancedSearchRegex=new RegExp(`^(?<app>[${A.aliasAllowedChars}]+-?)[-:]`);static aria={autocomplete:"aria-autocomplete",expanded:"aria-expanded",haspopup:"aria-haspopup",hidden:"aria-hidden",label:"aria-label",labelledby:"aria-labelledby",owns:"aria-owns",selected:"aria-selected",activedescendant:"aria-activedescendant"};static role={none:"none",region:"region",option:"option",listbox:"listbox"};static selector={class:{is_active:"is-active",spotlight:"a-Spotlight",spotlight_body:"a-Spotlight-body",spotlight_category:"a-Spotlight-category",spotlight_desc:"a-Spotlight-desc",spotlight_field:"a-Spotlight-field",spotlight_icon:"a-Spotlight-icon",spotlight_info:"a-Spotlight-info",spotlight_input:"a-Spotlight-input",spotlight_link:"a-Spotlight-link",spotlight_recent:"a-Spotlight-category--recent",spotlight_result_label:"a-Spotlight-label",spotlight_result:"a-Spotlight-result",spotlight_result_page:"a-Spotlight-result--page",spotlight_results:"a-Spotlight-results",spotlight_no_results:"a-Spotlight-noResults",spotlight_results_list:"a-Spotlight-resultsList",spotlight_search:"a-Spotlight-search",spotlight_shortcut:"a-Spotlight-shortcut",spotlight_shortcuts:"a-Spotlight-category--shortcuts",spotlight_category_title:"a-Spotlight-categoryTitle",spotlight_skeleton:"a-Spotlight-skeleton",spotlight_wrap_skeleton:"a-Spotlight-wrap-skeleton",spotlight_icon_skeleton:"a-Spotlight-icon-skeleton",spotlight_info_skeleton:"a-Spotlight-info-skeleton",spotlight_category_container:"a-Spotlight-categoryContainer",spotlight_clear_button:"a-Button a-Button--noUI",spotlight_clear_all:"a-Spotlight-clearAll"},id:{category_title:"category-title--",spotlight_result_list:"sp-result-list",spotlight_header:"header-spotlightSearch"},attr:{spotlight_is_visible:"is-visible"}};static staticMsg={app:u("SL.APP"),page:u("SL.PAGE"),placeHolder:u("SL.PLACEHOLDER"),oneMatchFound:u("SL.MATCH.FOUND"),noMatchFound:u("SL.NO.MATCH.FOUND"),enterKeywords:u("SL.SEARCH.HELP")};static template={body:`<div class="${A.selector.class.spotlight_body}">\n                          \x3c!-- Search --\x3e\n                          <div class="${A.selector.class.spotlight_search}">\n                              <div class="${A.selector.class.spotlight_icon}">\n                                  <span class="a-Icon icon-search" ${A.aria.hidden}="true"></span>\n                              </div>\n                              <div class="${A.selector.class.spotlight_field}">\n                                  <input type="text" role="combobox" ${A.aria.expanded}="false" ${A.aria.autocomplete}="none" ${A.aria.haspopup}="true" ${A.aria.label}="${u("SL.PLACEHOLDER")}" ${A.aria.owns}="${A.selector.id.spotlight_result_list}" autocomplete="off" autocorrect="off" spellcheck="false" class="${A.selector.class.spotlight_input}" placeholder="${A.staticMsg.placeHolder}">\n                              </div>\n                          </div>\n                          \x3c!-- end Search --\x3e\n\n                          <div class="${A.selector.class.spotlight_results}" aria-label="Search Results">\n\n                              <div class="${A.selector.class.spotlight_category} ${A.selector.class.spotlight_recent}"></div>\n\n                              <div class="${A.selector.class.spotlight_category} ${A.selector.class.spotlight_shortcuts}" role="${A.role.region}" aria-labelledby="${A.selector.id.category_title}shortcuts"></div>\n                          </div>\n                          \x3c!-- <div class="${A.selector.class.spotlight_results} results"></div> --\x3e\n                      </div>`,empty_results:`<div class="${A.selector.class.spotlight_no_results}">${u("APEX.SEARCH.NO_RESULTS_FOUND")}</div>`,category_container:(t="")=>{const e=""!==(t=t.toLowerCase().replace(" ","-"))?` ${A.selector.class.spotlight_category}--${t}`:"";return`<div class="${A.selector.class.spotlight_category}${e}"></div>`},category_title:(t="")=>{const e=""!==t?`${A.selector.id.category_title}${t.toLowerCase().replace(" ","-")}`:"";return"category-title--recently-visited"!==e?`<div class="${A.selector.class.spotlight_category_title}" id="${e}">${t}</div>`:`<div class="${A.selector.class.spotlight_category_container}">\n                                  <div class="${A.selector.class.spotlight_category_title}" id="${e}">${t}</div>\n                                  <button type="button" class="${A.selector.class.spotlight_clear_button} ${A.selector.class.spotlight_clear_all}" title=${u("APEX.SEARCH.CLEAR_ALL")}" aria-label="${u("APEX.SEARCH.CLEAR_ALL")}">${u("APEX.SEARCH.CLEAR_ALL")}</button>\n                              </div>`},result:({alias:t,category:e,highlightText:s,icon:i,name:a,nameNnumber:l,path:o="",shortcut:n,url:r,index:c,pe:h,typeid:p,componentid:d,propertyid:_})=>`<li id="sp-result-${c}" ${A.aria.selected}="false" role="${A.role.option}" class="${A.selector.class.spotlight_result} ${A.selector.class.spotlight_result_page}" data-category=${u(e).toLowerCase().replace(/ /g,"_")} ${A.aria.label}="${g("SL.GOTO",a,l,t||"Without alias",n||"Without shortcut")}">\n                              <span class="${A.selector.class.spotlight_link}"${r?` data-url="${r}"`:""} ${h?` data-type="${h}"`:""} ${p?` data-typeid="${p}"`:""} ${d?` data-componentid="${d}"`:""} ${_?` data-propertyid="${_}"`:""}>\n                                  ${i||""}\n                                  <span class="${A.selector.class.spotlight_info}">\n                                  <span class="${A.selector.class.spotlight_result_label}" ${A.aria.hidden}="true">${s||a}</span>\n                                  <span class="${A.selector.class.spotlight_desc}" ${A.aria.hidden}="true">${o.replace("{APP_ID}",f)}</span>\n                                  </span>\n                              </span>\n                          </li> `,skeleton:`<div class="${A.selector.class.spotlight_wrap_skeleton}">\n                              <ul role="${A.role.listbox}" class="${A.selector.class.spotlight_results_list}">\n                                  <li>\n                                      <span class="${A.selector.class.spotlight_link} ${A.selector.class.spotlight_skeleton}">\n                                          <span class="${A.selector.class.spotlight_icon} ${A.selector.class.spotlight_icon_skeleton}"></span>\n                                          <span class="${A.selector.class.spotlight_info} ${A.selector.class.spotlight_info_skeleton}"></span>\n                                      </span>\n                                  </li>\n                                  <li>\n                                      <span class="${A.selector.class.spotlight_link} ${A.selector.class.spotlight_skeleton}">\n                                          <span class="${A.selector.class.spotlight_icon} ${A.selector.class.spotlight_icon_skeleton}"></span>\n                                          <span class="${A.selector.class.spotlight_info} ${A.selector.class.spotlight_info_skeleton}"></span>\n                                      </span>\n                                  </li>\n                                  <li>\n                                      <span class="${A.selector.class.spotlight_link} ${A.selector.class.spotlight_skeleton}">\n                                          <span class="${A.selector.class.spotlight_icon} ${A.selector.class.spotlight_icon_skeleton}"></span>\n                                          <span class="${A.selector.class.spotlight_info} ${A.selector.class.spotlight_info_skeleton}"></span>\n                                      </span>\n                                  </li>\n                              </ul>\n                          </div>`,results_list:`<ul ${A.aria.activedescendant}="" role="${A.role.listbox}" class="${A.selector.class.spotlight_results_list}"></ul>`,shortcut:{ctrl_1:`<li role="option" class="${A.selector.class.spotlight_result} ${A.selector.class.spotlight_result_page}" ${A.aria.label}="" id="sp-result-sc-1" ${A.aria.selected}="true">\n                    <span class="${A.selector.class.spotlight_link}" data-type="${m}" data-url="">\n                        <span class="${A.selector.class.spotlight_icon}" ${A.aria.hidden}="true">\n                            <span class="a-Icon icon-search"></span>\n                        </span>\n                        <span class="${A.selector.class.spotlight_info}">\n                            <span class="ctrl-label ${A.selector.class.spotlight_result_label}" ${A.aria.hidden}="true"></span>\n                            <span class="${A.selector.class.spotlight_desc}" ${A.aria.hidden}="true"></span>\n                        </span>\n                        <span class="${A.selector.class.spotlight_shortcut}">Ctrl + 1</span>\n                    </span>\n                </li>`,ctrl_2:`<li role="option" class="${A.selector.class.spotlight_result} ${A.selector.class.spotlight_result_page}" ${A.aria.label}="" id="sp-result-sc-2" ${A.aria.selected}="true">\n                    <span class="${A.selector.class.spotlight_link}" data-type="${$}">\n                        <span class="${A.selector.class.spotlight_icon}" ${A.aria.hidden}="true">\n                            <span class="a-Icon icon-search"></span>\n                        </span>\n                        <span class="${A.selector.class.spotlight_info}">\n                            <span class="ctrl-label ${A.selector.class.spotlight_result_label}" ${A.aria.hidden}="true"></span>\n                            <span class="${A.selector.class.spotlight_desc}" ${A.aria.hidden}="true"></span>\n                        </span>\n                        <span class="${A.selector.class.spotlight_shortcut}">Ctrl + 2</span>\n                    </span>\n                </li>`,ctrl_3:`<li role="option" class="${A.selector.class.spotlight_result} ${A.selector.class.spotlight_result_page}" ${A.aria.label}="" id="sp-result-sc-3" ${A.aria.selected}="false">\n                    <span class="${A.selector.class.spotlight_link}" data-type="${S}">\n                        <span class="${A.selector.class.spotlight_icon}" ${A.aria.hidden}="true">\n                            <span class="a-Icon icon-search"></span>\n                        </span>\n                        <span class="${A.selector.class.spotlight_info}">\n                            <span class="ctrl-label ${A.selector.class.spotlight_result_label}" ${A.aria.hidden}="true"></span>\n                            <span class="${A.selector.class.spotlight_desc}" ${A.aria.hidden}="true"></span>\n                        </span>\n                        <span class="${A.selector.class.spotlight_shortcut}">Ctrl + 3</span>\n                    </span>\n                </li>`,ctrl_4:`<li role="option" class="${A.selector.class.spotlight_result} ${A.selector.class.spotlight_result_page}" ${A.aria.label}="" id="sp-result-sc-4" ${A.aria.selected}="false">\n                    <span class="${A.selector.class.spotlight_link}" data-type="${y}">\n                        <span class="${A.selector.class.spotlight_icon}" ${A.aria.hidden}="true">\n                            <span class="a-Icon icon-search"></span>\n                        </span>\n                        <span class="${A.selector.class.spotlight_info}">\n                            <span class="ctrl-label ${A.selector.class.spotlight_result_label}" ${A.aria.hidden}="true"></span>\n                            <span class="${A.selector.class.spotlight_desc}" ${A.aria.hidden}="true"></span>\n                        </span>\n                        <span class="${A.selector.class.spotlight_shortcut}">Ctrl + 4</span>\n                    </span>\n                </li>`}};constructor(t,e){this.#v=(()=>{const t={4e3:()=>{switch(+r.APP_PAGE_ID){case 1500:break;case 4500:e="page";break;default:e="app"}}}[r.APP_ID];return t&&t(),e})(),this.#m={},this.#I=t,this.#C=[],this.#T=[],this.#b=this.#M("body"),this.#k={onScreen:!1,title:this.#M("category_title",{},u("APEX.SEARCH.SC.SHORTCUTS")),ul:this.#N(),container:this.#b.querySelector(`.${A.selector.class.spotlight_category}.${A.selector.class.spotlight_shortcuts}`)},this.#P={};for(let t of this.#k.ul.children)this.#P[t.id]={li:t,span:t.children[0],label:t.querySelector(".ctrl-label")};this.#x=this.#b.querySelector("input"),this.#w=this.#b.querySelector(`.${A.selector.class.spotlight_results}`),this.#R={},this.#E={onScreen:!1,parent:this.#w,span:this.#M("empty_results"),show:function(){!this.onScreen&&this.parent&&(this.parent.insertBefore(this.span,this.parent.firstElementChild),this.onScreen=!0)},hide:function(){this.onScreen&&this.parent&&(this.span.remove(),this.onScreen=!1)}},this.skeleton={onScreen:!1,wrapper:this.#M("skeleton",{}),resultsContainer:this.#w,show(){this.onScreen||(this.resultsContainer.appendChild(this.wrapper),this.onScreen=!0)},hide(){this.onScreen&&(this.wrapper.remove(),this.onScreen=!1)}},this.#O=new IntersectionObserver(this.#H,{threshold:1}),this.#D(this.#x,"input",(t=>{this.#m=this.#U(t.target.value),this.#I(t.target.value,this.#m),this.#q(t.target.value),this.#J(t.target.value),this.#F(d=0)})),document.addEventListener("spotlightDialogClose",(()=>{this.#V()})),this.#D(this.#x,"keyup",i.debounce((t=>{""!==this.#x.value&&(t.ctrlKey&&49===t.which?this.#j(document.querySelectorAll(`[ data-type="${m}" ]`)[0]):t.ctrlKey&&50===t.which?this.#j(document.querySelectorAll(`[ data-type="${$}" ]`)[0]):t.ctrlKey&&51===t.which?this.#j(document.querySelectorAll(`[ data-type="${S}" ]`)[0]):t.ctrlKey&&52===t.which&&this.#j(document.querySelectorAll(`[ data-type="${y}" ]`)[0]))}),50)),this.#D(this.#b,"keydown",i.debounce((t=>{if(38===t.which)t.preventDefault(),this.#G();else if(40===t.which)t.preventDefault(),this.#W();else if(13===t.which){t.preventDefault();const e=document.querySelector(`li.${A.selector.class.spotlight_result}.${A.selector.class.is_active}`),s=e.closest("ul[data-category]");if(s){let t;const i=s.dataset.category;if("recently_visited"===i){const i=Array.from(s.childNodes).indexOf(e);t=this.#C[i]}else"static_shortcuts"!==i&&(t=this.#T[e.dataset.index].metadata.item);this.#j(e.firstElementChild,t)}}}),50)),this.#Y()}async#Y(){this.#A={onScreen:!1,title:this.#M("category_title",{},u("APEX.SEARCH.CATEGORY.RECENTLY_VISITED")),ul:await this.#B()},this.#A.container=this.#b.querySelector(`.${A.selector.class.spotlight_category}.${A.selector.class.spotlight_recent}`),this.#C.length&&this.#X(this.#A)}#K(t){t.onScreen||(this.#w.insertBefore(t.container,this.#k.container),t.onScreen=!0)}#z(t){t.onScreen&&(t.container.remove(),t.onScreen=!1)}#Q(){const t=Object.keys(this.#R);for(let e=0;e<t.length;e++){let s=this.#R[t[e]];for(;s.ul.firstChild;)s.ul.removeChild(s.ul.lastChild);this.#z(s)}}#X(t){t&&!t.onScreen&&(t.container.appendChild(t.title),t.container.appendChild(t.ul),t.onScreen=!0)}#Z(t){t.onScreen&&(t.title.remove(),t.ul.remove(),t.onScreen=!1)}#V(){this.#x.value="",this.#J(this.#x.value),this.#I(this.#x.value,!1)}#tt(t,e){let s="",i=0;return e.forEach((e=>{let a=e[0],l=e[1];a>=i&&(s+=t.substring(i,a),s+='<span class="a-Spotlight-highlight">'+t.substring(a,l+1)+"</span>",i=l+1)})),s+=t.substring(i),s}#et(t){return t.forEach((t=>{t.results.forEach((t=>{const{item:e}=t;let s=e.name;t.matches?.forEach((t=>{s=s.replace(/<\/?span.*?>/g,""),t.length>0?t.forEach((t=>{"name"!==t.key&&"initials"!==t.key||(s=this.#tt(s,t.indices))})):"name"!==t.key&&"initials"!==t.key||(s=this.#tt(s,t.indices))})),e.highlightText=s}))})),t}#U(t){const e={is:!1};if(t=t.trim(),A.advancedSearchRegex.test(t)){const s=t.match(A.advancedSearchRegex),i=t.split(s[0])[1];e.is=!0,e.app=s.groups.app.toUpperCase(),e.searchTerm=i,e.searchInput=t}return e}#H(t){t.forEach((t=>{t.target.setAttribute(A.selector.attr.spotlight_is_visible,t.isIntersecting)}))}#W(){const t=document.querySelectorAll(`.${A.selector.class.spotlight_result}`);d<t.length&&(d+=1,this.#F(d)),t.forEach((e=>{d===t.length&&(d=0,this.#F(d)),e.classList.contains(A.selector.class.is_active)&&"false"===e.getAttribute(A.selector.attr.spotlight_is_visible)&&e.scrollIntoView({block:"end",behavior:"smooth"})}))}#G(){const t=document.querySelectorAll(`.${A.selector.class.spotlight_result}`);d>=0&&(d-=1,this.#F(d)),t.forEach((e=>{-1===d&&(d=t.length-1,this.#F(d)),e.classList.contains(A.selector.class.is_active)&&"false"===e.getAttribute(A.selector.attr.spotlight_is_visible)&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}))}#F(t){document.querySelectorAll(`.${A.selector.class.spotlight_result}`).forEach(((e,s)=>{s===t?(e.scrollIntoView({block:"nearest",behavior:"smooth"}),e.classList.add(A.selector.class.is_active),e.setAttribute(A.aria.selected,!0),this.#x.setAttribute(A.aria.activedescendant,e.id)):(e.classList.remove(A.selector.class.is_active),e.setAttribute(A.aria.selected,!1))}))}#J(t){document.querySelector(`#${A.selector.id.spotlight_header}`).innerHTML=`${i.escapeHTML(t||u("SL.PLACEHOLDER"))} <span class="a-Icon icon-search"></span>`}#q(t){const e=Object.keys(this.#P);e.forEach(((s,i)=>{s=e[i];const a=this.#P[s];switch(s){case"sp-result-sc-1":a.li.setAttribute("aria-label",o.formatMessage("SL.SEARCH.WP",t)+", ,  , Ctrl + 1 "),a.label.innerHTML=o.formatMessage("SL.SEARCH.WP",t);break;case"sp-result-sc-2":a.li.setAttribute("aria-label",o.formatMessage("SL.SEARCH.ALLAPPS",t)+", ,  , Ctrl + 2 "),a.label.innerHTML=o.formatMessage("SL.SEARCH.ALLAPPS",t);break;case"sp-result-sc-3":a.li.setAttribute("aria-label",o.formatMessage("SL.SEARCH.APP",t)+", ,  , Ctrl + 3 "),a.label.innerHTML=o.formatMessage("SL.SEARCH.APP",t);break;case"sp-result-sc-4":a.li.setAttribute("aria-label",o.formatMessage("SL.SEARCH.PAGE",t)+", ,  , Ctrl + 4 "),a.label.innerHTML=o.formatMessage("SL.SEARCH.PAGE",t)}}))}#M(t,e={}){if(null!=t){let s=A.template[t];if(s){"function"==typeof s&&(s=s(arguments[2]||""));const t=document.createElement("div");t.innerHTML=s;const i=t.firstChild;return Object.keys(e).forEach((t=>{i.setAttribute(t,e[t])})),i}}}async#B(){let t=this.#M("results_list");const e=document.createElement("div");return t.length=this.#C.length,this.#C.forEach((s=>{let i=s.path?.replace("{APP_ID}",s.appId||"");i=i?.replace("&#92;","&#8212;"),s.path=i,e.innerHTML=i,i=e.textContent,e.textContent="",t.setAttribute("data-category",u("APEX.SEARCH.CATEGORY.RECENTLY_VISITED").toLowerCase().replace(/ /g,"_")),s.highlightText=s.highlightText?.replace(/<\/?span.*?>/g,"")||s.name,s.recentlyVisited="Y",t.appendChild(this.#st(s))})),t}async#it(t){let e=JSON.stringify(t);e=JSON.parse(e),delete e.highlightText,delete e.recentlyVisited;const s=JSON.stringify(e);let i=-1,a=[];for(let t=0;t<this.#C.length;t++){let e=JSON.stringify(this.#C[t]);e=JSON.parse(e),delete e.highlightText,delete e.recentlyVisited,s===JSON.stringify(e)?i=t:a.push(this.#C[t])}if(t.appId||(t.appId=f),i>-1)0!==i&&(this.#C=[e,...a]);else if(this.#C.length>=3){const t=this.#C.slice(0,2);this.#C=[e,...t]}else this.#C=[e,...this.#C];try{await c.process("spotlightRecentlyVisited",{x01:r.APP_USER,x02:"SET",x03:JSON.stringify(this.#C)})}catch(t){l.warn(t.responseText)}}#st(t,e){let s="";t.path&&"string"==typeof t.path&&(s=t.path?.replace("{APP_ID}",t.appId)||"",s=s.replace("&#92;","&#8212;"),t.path=s);const i=document.createElement("div");i.innerHTML=A.template.result({...t,nameNnumber:s,index:e});const a=i.firstChild;void 0!==e&&(a.dataset.index=e),this.#D(a,"mouseenter",this.#at),a.setAttribute(A.aria.selected,!1),this.#x.setAttribute(A.aria.selected,a.getAttribute("data-index"));const l=a.querySelector(`.${A.selector.class.spotlight_link}`);return this.#D(l,"click",(()=>{this.#j(l,t)})),a}async#lt(){this.#C=[];try{await c.process("spotlightRecentlyVisited",{x01:r.APP_USER,x02:"SET",x03:JSON.stringify(this.#C)})}catch(t){l.warn(t.responseText)}if(0===this.#C.length){const t=document.querySelector(`.${A.selector.class.spotlight_recent}`);t.parentNode.removeChild(t),this.#x.focus()}}#N(){const t=this.#M("results_list",{"data-category":"static_shortcuts"}),e={app:A.template.shortcut.ctrl_3,page:A.template.shortcut.ctrl_4+A.template.shortcut.ctrl_3};t.innerHTML=`${e[this.#v]||""} ${A.template.shortcut.ctrl_2} ${A.template.shortcut.ctrl_1}`;for(let e of t.children)this.#D(e,"mouseenter",this.#at),this.#D(e,"click",(()=>{this.#j(e.firstElementChild)}));return t}#ot(t,e){if(t){if(t.indexOf("&DEBUG.")>0){let e="::::";t=t.substring(0,t.indexOf("&DEBUG.")+7).concat(e)}t=t.replace("%SESSION%",_).replace("%25SESSION%25",_).replace("&DEBUG.","NO").replace("&APP_SESSION.",_),e&&(e.url=t),s.redirect(t)}}#D(t,e,s){t.addEventListener(e,s)}async#j(e,i){const a=e?.dataset.url,l=e?.dataset.type,o=this.#x.value;switch(l){case"pe":window.pageDesigner.goToComponent(e.getAttribute("data-typeid"),e.getAttribute("data-componentid"),e.getAttribute("data-propertyid"));break;case y:window.pageDesigner.activateTab("search"),t("#P4500_LOCAL_SEARCH").val(o).trigger("change").trigger("focus"),C.close(h);break;case S:s.popup({url:p[0].url.replace("SEARCH_TERMS",encodeURIComponent(o)).replace("%SESSION%",_),name:"SEARCH_RESULTS",width:1e3,height:800});break;case $:s.popup({url:p[1].url.replace("SEARCH_TERMS",encodeURIComponent(o)).replace("%SESSION%",_),name:"SEARCH_RESULTS",width:1e3,height:800});break;case m:this.#ot(p[2].url.replace("SEARCH_TERMS",encodeURIComponent(o)).replace("%SESSION%",_),i);break;default:this.#ot(a,i)}}#at(t){const e=document.querySelectorAll(`.${A.selector.class.spotlight_result}`),s=document.querySelector(`li.${A.selector.class.spotlight_result}.${A.selector.class.is_active}`),i=document.querySelector(`.${A.selector.class.spotlight_input}`);s.classList.remove(A.selector.class.is_active),s.setAttribute(A.aria.selected,!1),t.target.classList.add(A.selector.class.is_active),t.target.setAttribute(A.aria.selected,!0),i.setAttribute(A.aria.activedescendant,t.target.id),e.forEach(((e,s)=>{t.target===e&&(d=s)}))}#nt(t,e){let s=this.#R[e];const i=u(e);s||(s={onScreen:!1,container:this.#M("category_container",{role:A.role.region,[A.aria.labelledby]:`${A.selector.id.category_title}${i.toLowerCase().replace(" ","-")}`},i),title:this.#M("category_title",{},i),ul:this.#M("results_list",{"data-category":i.toLowerCase().replace(" ","_")})},s.container.appendChild(s.title),s.container.appendChild(s.ul),this.#R[e]=s),s.ul.appendChild(t),this.#K(s)}initView(t){t.appendChild(this.#b),t.classList.add(A.selector.class.spotlight),this.#I()}clearView(){this.#E.hide(),this.#Z(this.#A),this.#Z(this.#k),this.#Q()}render(t=[]){this.#L=this.#et(t),this.#T=[],this.#L.forEach((t=>{t.results.forEach((t=>{const e=t.item.context;(this.#m.is||"global"===this.#v&&"global"===e||"app"===this.#v&&("global"===e||"app"===e)||"page"===this.#v&&("global"===e||"app"===e||"page"===e))&&(this.#m.is&&e&&"app"===e?t.item.appId=this.#m.app:t.item.path&&t.item.path.indexOf("{APP_ID}")>-1&&(t.item.appId=f),this.#T.push(new E(t,this.#st(t.item,this.#T.length))))}))})),this.#Q(),this.#T.forEach((t=>{const e=t.metadata.item.category;this.#nt(t.HTMLElement,e)})),this.#k.onScreen&&this.#Z(this.#k),0===this.#w.querySelectorAll(`.${A.selector.class.spotlight_category}:not(.${A.selector.class.spotlight_recent}, .${A.selector.class.spotlight_shortcuts} )`).length?(""!==this.#x.value?this.#E.show():this.#E.hide(),0===this.#A?.ul.length||this.#A?.onScreen||this.#X(this.#A)):(this.#A?.onScreen&&this.#Z(this.#A),this.#E.onScreen&&this.#E.hide()),""===this.#x.value||this.#k.onScreen||this.#X(this.#k);const e=document.querySelectorAll(`.${A.selector.class.spotlight_result}`);e[0]?.classList.add(A.selector.class.is_active),e[0]?.setAttribute(A.aria.selected,!0),this.#x.setAttribute(A.aria.activedescendant,e[0]?.id),e.forEach((t=>{this.#O.observe(t)}))}}const C={init:()=>{h=document.createElement(x.webComponentName)},open:e=>{const i=t(e),a=window.scrollY||window.pageYOffset;i.hasClass("ui-dialog-content")&&i.dialog("isOpen")||i.dialog({width:650,resizable:!1,height:"auto",modal:!0,position:{my:"center top",at:"center top+"+(a+64),of:t("body")},dialogClass:"ui-dialog--apexspotlight",open:function(){i.css("min-height","auto").prev(".ui-dialog-titlebar").remove(),s.beginFreezeScroll(),t(".ui-widget-overlay").on("click",(()=>{C.close(e)})),this.addEventListener("keydown",(t=>{9===t.which&&C.close(e)}))},close:function(){const t=new Event("spotlightDialogClose");document.dispatchEvent(t),s.endFreezeScroll()}})},close:e=>{t(e).dialog("close")}},w={context:{type:n.dataTypes.string,sync:!0,defaultValue:"global"}},L=[];e.ItemComponent._addCommonAttributes(L,w),n._addHyphenCaseAttrNames(w);const I=n._configObservedAttributes(w,L);class x extends e.ItemComponent{#rt={};#ct;#ht;#pt;#dt;static webComponentName="a-spotlight-search";constructor(){super(),this._configPrivateState(this.#rt),this.#ct="",this.#ht=new v,this.#pt=new A(this.search.bind(this),this.#rt.context)}async search(t="",e){let s;this.#ht.updateIndices(e),s=e&&e.is?e.searchTerm:t,this.#ht.validInput(s)&&(this.#ct=s,this.#ht.awaitingIndices?(this.#pt.skeleton.onScreen?""===s&&this.#pt.skeleton.hide():(""!==s||e?.is)&&(e?.is&&this.#pt.clearView(),this.#pt.skeleton.show()),void 0===this.#dt&&(this.#dt=setInterval((()=>{this.#ht.awaitingIndices||(clearInterval(this.#dt),this.#dt=void 0,this.#pt.skeleton.hide(),this.#pt.render(this.#ht.search(this.#ct)))}),50))):this.#pt.render(this.#ht.search(this.#ct)))}_render(t){this.rendered||this.#pt.initView(this)}static get observedAttributes(){return I}static get delegatedAttributes(){return L}static get componentMetaData(){return w}}let k;customElements.define(x.webComponentName,x),window.addEventListener("DOMContentLoaded",(()=>{k=document.querySelector("#header-spotlightSearch"),k&&k.removeAttribute("data-action")}),!1),window.addEventListener("load",(()=>{let t=0;const e="spotlight-search",s=setInterval((()=>{a.add?(clearInterval(s),a.add({name:e,label:null,title:null,shortcut:"Ctrl+Quote",action:()=>(h||C.init(),C.open(h),!0)}),k&&k.setAttribute("data-action",e)):t>=5e3?(l.warn("apex.actions.add could not be loaded"),clearInterval(s)):t+=100}),100)}))}(apex.jQuery,apex.item,apex.navigation,apex.util,apex.actions,apex.debug,apex.lang,apex.WebComponent,apex.env,apex.server);