/*!
 * Copyright (c) 2024, Oracle and/or its affiliates.
 */
!function(){"use strict";const{item:e,lang:s,page:t,debug:n}=apex,i="Create Data Model APEX Assistant:";window.aiChatWidgetInit=function(A){const a=s.getMessage("AI.PROMPT.CANNOT_PROCESS"),g=s.getMessage("AI.DISCLAIMER"),o=[{title:s.getMessage("AI.DATA_MODEL.SAMPLE_1_TITLE"),message:s.getMessage("AI.DATA_MODEL.SAMPLE_1_MSG")},{title:s.getMessage("AI.DATA_MODEL.SAMPLE_2_TITLE"),message:s.getMessage("AI.DATA_MODEL.SAMPLE_2_MSG")}];return A.viewOptions.quickActions=o,A.viewOptions.disclaimer=g,A.chatOptions.processMessage=(A,g)=>{const{content:o,user:M}=g;if(M!==A.getAiUser()||!A.getModel().getMessages().length)return;const _={};if(o&&"string"==typeof o){const A=/```sql\s*([\s\S]*?)\s*```/g,g=[];let M,l;for(;null!==(M=A.exec(o));)g.push(M[1].trim());if(g.length>0){const n=e("P1600_FORMAT_VAL").getValue();l=g.join("\n"),_.quickActions="CREATE_DATA_MODEL"===n?[{label:s.getMessage("AI.DATA_MODEL.SQL_SCRIPT"),action:()=>{e("P1600_AI_SCRIPT_OUTPUT").setValue(l),t.submit(n)}}]:[{label:s.getMessage("AI.DATA_MODEL.QUICK_SQL"),action:()=>{e("P1600_AI_QS_OUTPUT").setValue(l),t.submit(n)}}],_.message=o}else _.message=a,n.info(i,"No SQL found in the response.")}else _.message=a,n.info(i,"Invalid or no content in the response, displaying default message.");return _},A}}();