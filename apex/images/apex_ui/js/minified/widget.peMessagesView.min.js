/*!
 * Copyright (c) 2013, 2023, Oracle and/or its affiliates.
 */
!function(e,t,n){"use strict";var i="messages_",o="error",a="warning",s="icon-remove-sign",r="icon-warning-sign";const p=n.hasOwnProperty;t.widget("apex.peMessagesView",{options:{},_create:function(){var n,o=this;this.element.empty(),n=t("<div>",{class:"a-AlertMessages"}).appendTo(this.element),this._container$=t("<ul></ul>",{class:"a-AlertMessages-list"}).appendTo(n).on("click","a",this._goToComponent),t(document).on("modelReady",(function(){e.observer(i+this.uuid,{events:[e.EVENT.ERRORS,e.EVENT.NO_ERRORS,e.EVENT.WARNINGS,e.EVENT.NO_WARNINGS,e.EVENT.DELETE,e.EVENT.REMOVE_PROP,e.EVENT.VALIDATE_COMPONENT]},(function(e){o._update(e)})),t(document).one("modelCleared",(function(){o._container$.empty(),"function"==typeof o.options.badge?o.options.badge(""):t(o.options.badge).text("")}))}))},_init:function(){},_destroy:function(){this.element.empty(),t(document).off("modelReady"),t(document).off("modelCleared"),e.unobserver(i+this.uuid)},_update:function(i){function l(t,i,o,a,s){function r(e){e&&(p+=` ${p.length?"&rarr;":""} ${n.escapeHTML(e)}`)}let p="",l="";const d='\n                    <li class="a-AlertMessages-item" data-typeid="#TYPEID#" data-componentid="#COMPONENTID#" data-propertyid="#PROPERTYID#">\n                        <a href="#" class="a-MediaBlock a-AlertMessages-message is-#CSS_CLASS#">\n                            <div class="a-MediaBlock-graphic">\n                                <span class="a-FAIcon a-FAIcon--medium a-FAIcon--#CSS_CLASS# #ICON_CLASS#"></span>\n                            </div>\n                            <div class="a-MediaBlock-content">\n                                <h5 class="a-AlertMessages-propertyTitle">#PATH#</h5>\n                                <p class="a-AlertMessages-messageDescription">#MESSAGE#</p>\n                            </div>\n                        </a>\n                    </li>\n                ';for(var c=0;c<o.length;c++)r(e.getComponentType(t.typeId).title.singular),r(t.getDisplayTitle()),l+=d.replace(/#CSS_CLASS#/g,a).replace(/#ICON_CLASS#/g,s).replace("#TYPEID#",t.typeId).replace("#COMPONENTID#",t.id).replace("#MESSAGE#",o[c]),i&&(r(e.getDisplayGroup(i.getMetaData().displayGroupId).title),r(i.getMetaData().prompt),l=l.replace("#PROPERTYID#",i.id)),l=l.replace("#PATH#",p);this._container$.append(l)}function d(){this._container$.find(h+"[data-propertyid='#PROPERTYID#']").remove(),i.errors?.length&&l.call(this,u,null,i.errors,o,s)}var c,g,E,u=i.component,h="li[data-typeid='"+u.typeId+"'][data-componentid='"+u.id+"']",m=this.options.badge,T=this.options.button,f=this.options.noMsgHandler;if(t.inArray(e.EVENT.DELETE,i.events)>=0)this._container$.find(h).remove();else if(Object.keys(i.properties).length){for(var y in i.properties)p(i.properties,y)&&(this._container$.find(h+"[data-propertyid='"+y+"']").remove(),-1===t.inArray(e.EVENT.REMOVE_PROP,i.properties[y])&&(c=u.getProperty(y),l.call(this,u,c,c.errors,o,s),l.call(this,u,c,c.warnings,a,r)));i.events.includes(e.EVENT.ERRORS)&&i.errors?.length&&d.call(this)}else d.call(this);E=(g=this._container$.find("li").length)>0,T.toggle(E&&T.length>0),"function"==typeof m?m(g):t(m).text(E?g:""),E||"function"!=typeof f||f()},_goToComponent:function(){var n=t(this).closest("li"),i=e.getComponents(n.data("typeid"),{id:n.data("componentid")})[0];window.pageDesigner.goToComponent(i.typeId,i.id,n.data("propertyid"))}})}(window.pe,apex.jQuery,apex.util);