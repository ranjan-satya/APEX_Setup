/*!
 * Copyright (c) 2023, Oracle and/or its affiliates.
 */
window.componentGallery={},function(e,t,a,n){"use strict";const i=a.hasOwnProperty,o="activity",r="activities",s="diagram",l="is-draggable",c="is-not-draggable",p={activities:[]},d={[o]:"a-Gallery-activity"},u={[o]:r};let g,m;function E(t,a,n){let i=d[n.type],o=e.isPageReadOnly();t.markup("<li").attr("class",i).optionalAttr("aria-grabbed",o?null:"false").attr("data-component",n.type+":"+a).attr("draggable","true").markup("><span class='a-Icon ").attr(n.iconClass).markup("'></span><span class='a-Gallery-componentName'>").content(n.title).markup("</span></li>")}function f(){let n=e.isPageReadOnly(),i=a.htmlBuilder();[r].forEach((function(o){let r,s=p[o],l=t(`#cg-${a.escapeCSS(o)} ul`).first();i.clear();for(let e=0;e<s.length;e++)r=s[e],r.isSupported&&E(i,e,r);l.html(i.toString()).iconList("refresh"),n||(m=t(`#cg-${a.escapeCSS(o)} li`).draggable({appendTo:"#app-viewport",cursor2:"default",containment:"#glv-viewport-container",scroll:!1,cursorAt:{left:2,top:2},delay:10,distance:5,opacity:.1,zIndex:1e3,addClasses:!0,revert:!1,helper:()=>document.createElement("div"),start:function(a){let n=function(e){let t,a=e.split(":"),n=p[u[a[0]]];if(n&&(t=n[a[1]]),!t)throw new Error("Invalid component data key");return t}(t(this).attr("data-component")),i=n.values.find((t=>t.id===e.PROP.PAGE_PROCESS_TYPE));g.startDragging(i.value,a),apex.tooltipManager.disableTooltips()},stop:()=>{apex.tooltipManager.enableTooltips()}}))}))}function v(a){const n="DEVELOPMENT"!==a?.getProperty(e.PROP.STATE).getValue();m.draggable(n?"disable":"enable"),m.each(((e,a)=>{n?t(a).removeClass(l).addClass(c):t(a).removeClass(c).addClass(l)}))}e.observer(s,{component:{typeIds:[e.COMP_TYPE.WORKFLOW_VERSION]},events:[e.EVENT.CHANGE],properties:[e.PROP.STATE]},(e=>{const t=e.component,a=g.getCurrentVersion();a&&t.id!==a?.id||v(a)})),e.observer(s,{component:{typeIds:[e.COMP_TYPE.WORKFLOW_VERSION]},events:[e.EVENT.DELETE]},(()=>{g.getCurrentVersion()||v()})),t(document).on("selectionChanged",(()=>{setTimeout((()=>{v(g.getCurrentVersion())}),1)})),t(document).on("diagramReady",(()=>{g=t("#app")[0].diagramBuilder,function(){let t=n.getWorkflowActivitiesConfig();for(let a in t)i(t,a)&&p.activities.push({type:o,iconClass:n.getComponentIconClass(o,a),title:t[a].title,isSupported:!0,values:[{id:e.PROP.PAGE_PROCESS_TYPE,value:a}]});f()}()})),t((function(){t("#cg-activities ul").addClass("a-Gallery").each((function(){t(this).iconList({multiple:!1})})),t("#gallery-tabs .u-ScrollingViewport.resize").resize((function(){t(this).children(".a-IconList").resize()}))}))}(pe,apex.jQuery,apex.util,window.pageDesigner);